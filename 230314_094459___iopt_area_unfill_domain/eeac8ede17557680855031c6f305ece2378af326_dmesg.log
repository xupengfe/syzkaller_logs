c[?7l[2J[0mSeaBIOS (version rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org)


iPXE (http://ipxe.org) 00:03.0 CA00 PCI2.10 PnP PMM+7FF91000+7FEF1000 CA00
Press Ctrl-B to configure iPXE (PCI 00:03.0)...                                                                               


Booting from ROM...
c[?7l[2J[    0.000000] Linux version 6.3.0-rc2-eeac8ede1755 (root@p-tglh01.sh.intel.com) (gcc (GCC) 8.5.0 20210514 (Red Hat 8.5.0-18), GNU ld version 2.36.1-2.el8) #1 SMP PREEMPT_DYNAMIC Tue Mar 14 09:41:02 CST 2023
[    0.000000] Command line: console=ttyS0 root=/dev/sda earlyprintk=serial net.ifnames=0
[    0.000000] KERNEL supported cpus:
[    0.000000]   Intel GenuineIntel
[    0.000000]   AMD AuthenticAMD
[    0.000000]   Hygon HygonGenuine
[    0.000000]   Centaur CentaurHauls
[    0.000000]   zhaoxin   Shanghai  
[    0.000000] x86/fpu: Supporting XSAVE feature 0x001: 'x87 floating point registers'
[    0.000000] x86/fpu: Supporting XSAVE feature 0x002: 'SSE registers'
[    0.000000] x86/fpu: Supporting XSAVE feature 0x004: 'AVX registers'
[    0.000000] x86/fpu: Supporting XSAVE feature 0x020: 'AVX-512 opmask'
[    0.000000] x86/fpu: Supporting XSAVE feature 0x040: 'AVX-512 Hi256'
[    0.000000] x86/fpu: Supporting XSAVE feature 0x080: 'AVX-512 ZMM_Hi256'
[    0.000000] x86/fpu: Supporting XSAVE feature 0x200: 'Protection Keys User registers'
[    0.000000] x86/fpu: xstate_offset[2]:  576, xstate_sizes[2]:  256
[    0.000000] x86/fpu: xstate_offset[5]:  832, xstate_sizes[5]:   64
[    0.000000] x86/fpu: xstate_offset[6]:  896, xstate_sizes[6]:  512
[    0.000000] x86/fpu: xstate_offset[7]: 1408, xstate_sizes[7]: 1024
[    0.000000] x86/fpu: xstate_offset[9]: 2432, xstate_sizes[9]:    8
[    0.000000] x86/fpu: Enabled xstate features 0x2e7, context size is 2440 bytes, using 'compacted' format.
[    0.000000] signal: max sigframe size: 3632
[    0.000000] BIOS-provided physical RAM map:
[    0.000000] BIOS-e820: [mem 0x0000000000000000-0x000000000009fbff] usable
[    0.000000] BIOS-e820: [mem 0x000000000009fc00-0x000000000009ffff] reserved
[    0.000000] BIOS-e820: [mem 0x00000000000f0000-0x00000000000fffff] reserved
[    0.000000] BIOS-e820: [mem 0x0000000000100000-0x000000007ffdffff] usable
[    0.000000] BIOS-e820: [mem 0x000000007ffe0000-0x000000007fffffff] reserved
[    0.000000] BIOS-e820: [mem 0x00000000feffc000-0x00000000feffffff] reserved
[    0.000000] BIOS-e820: [mem 0x00000000fffc0000-0x00000000ffffffff] reserved
[    0.000000] printk: bootconsole [earlyser0] enabled
[    0.000000] NX (Execute Disable) protection: active
[    0.000000] SMBIOS 2.8 present.
[    0.000000] DMI: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[    0.000000] Hypervisor detected: KVM
[    0.000000] kvm-clock: Using msrs 4b564d01 and 4b564d00
[    0.000007] kvm-clock: using sched offset of 774457788 cycles
[    0.000850] clocksource: kvm-clock: mask: 0xffffffffffffffff max_cycles: 0x1cd42e4dffb, max_idle_ns: 881590591483 ns
[    0.003669] tsc: Detected 3110.400 MHz processor
[    0.004000] last_pfn = 0x7ffe0 max_arch_pfn = 0x400000000
[    0.004000] x86/PAT: Configuration [0-7]: WB  WC  UC- UC  WB  WP  UC- WT  
[    0.004000] found SMP MP-table at [mem 0x000f5ba0-0x000f5baf]
[    0.004000] Using GB pages for direct mapping
[    0.004000] ACPI: Early table checksum verification disabled
[    0.004000] ACPI: RSDP 0x00000000000F59C0 000014 (v00 BOCHS )
[    0.004000] ACPI: RSDT 0x000000007FFE1951 000034 (v01 BOCHS  BXPC     00000001 BXPC 00000001)
[    0.004000] ACPI: FACP 0x000000007FFE17FD 000074 (v01 BOCHS  BXPC     00000001 BXPC 00000001)
[    0.004000] ACPI: DSDT 0x000000007FFE0040 0017BD (v01 BOCHS  BXPC     00000001 BXPC 00000001)
[    0.004000] ACPI: FACS 0x000000007FFE0000 000040
[    0.004000] ACPI: APIC 0x000000007FFE1871 000080 (v01 BOCHS  BXPC     00000001 BXPC 00000001)
[    0.004000] ACPI: HPET 0x000000007FFE18F1 000038 (v01 BOCHS  BXPC     00000001 BXPC 00000001)
[    0.004000] ACPI: WAET 0x000000007FFE1929 000028 (v01 BOCHS  BXPC     00000001 BXPC 00000001)
[    0.004000] ACPI: Reserving FACP table memory at [mem 0x7ffe17fd-0x7ffe1870]
[    0.004000] ACPI: Reserving DSDT table memory at [mem 0x7ffe0040-0x7ffe17fc]
[    0.004000] ACPI: Reserving FACS table memory at [mem 0x7ffe0000-0x7ffe003f]
[    0.004000] ACPI: Reserving APIC table memory at [mem 0x7ffe1871-0x7ffe18f0]
[    0.004000] ACPI: Reserving HPET table memory at [mem 0x7ffe18f1-0x7ffe1928]
[    0.004000] ACPI: Reserving WAET table memory at [mem 0x7ffe1929-0x7ffe1950]
[    0.004000] No NUMA configuration found
[    0.004000] Faking a node at [mem 0x0000000000000000-0x000000007ffdffff]
[    0.004000] NODE_DATA(0) allocated [mem 0x7ffb5000-0x7ffdffff]
[    0.004000] Zone ranges:
[    0.004000]   DMA      [mem 0x0000000000001000-0x0000000000ffffff]
[    0.004000]   DMA32    [mem 0x0000000001000000-0x000000007ffdffff]
[    0.004000]   Normal   empty
[    0.004000]   Device   empty
[    0.004000] Movable zone start for each node
[    0.004000] Early memory node ranges
[    0.004000]   node   0: [mem 0x0000000000001000-0x000000000009efff]
[    0.004000]   node   0: [mem 0x0000000000100000-0x000000007ffdffff]
[    0.004000] Initmem setup node 0 [mem 0x0000000000001000-0x000000007ffdffff]
[    0.004000] On node 0, zone DMA: 1 pages in unavailable ranges
[    0.004000] On node 0, zone DMA: 97 pages in unavailable ranges
[    0.004000] On node 0, zone DMA32: 32 pages in unavailable ranges
[    0.004000] ACPI: PM-Timer IO Port: 0x608
[    0.004000] ACPI: LAPIC_NMI (acpi_id[0xff] dfl dfl lint[0x1])
[    0.004000] IOAPIC[0]: apic_id 0, version 17, address 0xfec00000, GSI 0-23
[    0.004000] ACPI: INT_SRC_OVR (bus 0 bus_irq 0 global_irq 2 dfl dfl)
[    0.004000] ACPI: INT_SRC_OVR (bus 0 bus_irq 5 global_irq 5 high level)
[    0.004000] ACPI: INT_SRC_OVR (bus 0 bus_irq 9 global_irq 9 high level)
[    0.004000] ACPI: INT_SRC_OVR (bus 0 bus_irq 10 global_irq 10 high level)
[    0.004000] ACPI: INT_SRC_OVR (bus 0 bus_irq 11 global_irq 11 high level)
[    0.004000] ACPI: Using ACPI (MADT) for SMP configuration information
[    0.004000] ACPI: HPET id: 0x8086a201 base: 0xfed00000
[    0.004000] TSC deadline timer available
[    0.004000] smpboot: Allowing 2 CPUs, 0 hotplug CPUs
[    0.004000] kvm-guest: KVM setup pv remote TLB flush
[    0.004000] kvm-guest: setup PV sched yield
[    0.004000] PM: hibernation: Registered nosave memory: [mem 0x00000000-0x00000fff]
[    0.004000] PM: hibernation: Registered nosave memory: [mem 0x0009f000-0x0009ffff]
[    0.004000] PM: hibernation: Registered nosave memory: [mem 0x000a0000-0x000effff]
[    0.004000] PM: hibernation: Registered nosave memory: [mem 0x000f0000-0x000fffff]
[    0.004000] [mem 0x80000000-0xfeffbfff] available for PCI devices
[    0.004000] Booting paravirtualized kernel on KVM
[    0.004000] clocksource: refined-jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 7645519600211568 ns
[    0.004000] setup_percpu: NR_CPUS:8192 nr_cpumask_bits:2 nr_cpu_ids:2 nr_node_ids:1
[    0.004000] percpu: Embedded 65 pages/cpu s229376 r8192 d28672 u1048576
[    0.004000] kvm-guest: PV spinlocks enabled
[    0.004000] PV qspinlock hash table entries: 256 (order: 0, 4096 bytes, linear)
[    0.004000] Fallback order for Node 0: 0 
[    0.004000] Built 1 zonelists, mobility grouping on.  Total pages: 515808
[    0.004000] Policy zone: DMA32
[    0.004000] Kernel command line: net.ifnames=0 console=ttyS0 root=/dev/sda earlyprintk=serial net.ifnames=0
[    0.004000] random: crng init done
[    0.004000] Dentry cache hash table entries: 262144 (order: 9, 2097152 bytes, linear)
[    0.004000] Inode-cache hash table entries: 131072 (order: 8, 1048576 bytes, linear)
[    0.004000] mem auto-init: stack:off, heap alloc:off, heap free:off
[    0.004000] Memory: 1964888K/2096632K available (36864K kernel code, 4578K rwdata, 9848K rodata, 10508K init, 31780K bss, 131488K reserved, 0K cma-reserved)
[    0.004000] SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=2, Nodes=1
[    0.004000] kmemleak: Kernel memory leak detector disabled
[    0.004000] ftrace: allocating 68737 entries in 269 pages
[    0.004000] ftrace: allocated 269 pages with 4 groups
[    0.004000] Dynamic Preempt: voluntary
[    0.004000] Running RCU self tests
[    0.004000] Running RCU synchronous self tests
[    0.004000] rcu: Preemptible hierarchical RCU implementation.
[    0.004000] rcu: 	RCU lockdep checking is enabled.
[    0.004000] rcu: 	RCU restricting CPUs from NR_CPUS=8192 to nr_cpu_ids=2.
[    0.004000] 	Trampoline variant of Tasks RCU enabled.
[    0.004000] 	Rude variant of Tasks RCU enabled.
[    0.004000] 	Tracing variant of Tasks RCU enabled.
[    0.004000] rcu: RCU calculated value of scheduler-enlistment delay is 25 jiffies.
[    0.004000] rcu: Adjusting geometry for rcu_fanout_leaf=16, nr_cpu_ids=2
[    0.004000] Running RCU synchronous self tests
[    0.004000] NR_IRQS: 524544, nr_irqs: 440, preallocated irqs: 16
[    0.004000] rcu: srcu_init: Setting srcu_struct sizes based on contention.
[    0.004000] Console: colour VGA+ 80x25
[    0.004000] printk: console [ttyS0] enabled
[    0.004000] printk: console [ttyS0] enabled
[    0.004000] printk: bootconsole [earlyser0] disabled
[    0.004000] printk: bootconsole [earlyser0] disabled
[    0.004000] Lock dependency validator: Copyright (c) 2006 Red Hat, Inc., Ingo Molnar
[    0.004000] ... MAX_LOCKDEP_SUBCLASSES:  8
[    0.004000] ... MAX_LOCK_DEPTH:          48
[    0.004000] ... MAX_LOCKDEP_KEYS:        8192
[    0.004000] ... CLASSHASH_SIZE:          4096
[    0.004000] ... MAX_LOCKDEP_ENTRIES:     32768
[    0.004000] ... MAX_LOCKDEP_CHAINS:      65536
[    0.004000] ... CHAINHASH_SIZE:          32768
[    0.004000]  memory used by lock dependency info: 6365 kB
[    0.004000]  memory used for stack traces: 4224 kB
[    0.004000]  per task-struct memory footprint: 1920 bytes
[    0.004000] ACPI: Core revision 20221020
[    0.004000] clocksource: hpet: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604467 ns
[    0.004000] APIC: Switch to symmetric I/O mode setup
[    0.004000] x2apic enabled
[    0.004000] Switched APIC routing to physical x2apic.
[    0.004000] kvm-guest: setup PV IPIs
[    0.004000] ..TIMER: vector=0x30 apic1=0 pin1=2 apic2=-1 pin2=-1
[    0.004000] clocksource: tsc-early: mask: 0xffffffffffffffff max_cycles: 0x2cd5a8bb032, max_idle_ns: 440795365915 ns
[    0.322630] Calibrating delay loop (skipped) preset value.. 6220.80 BogoMIPS (lpj=12441600)
[    0.323588] pid_max: default: 32768 minimum: 301
[    0.324244] LSM: initializing lsm=capability,yama,integrity
[    0.324883] Yama: becoming mindful.
[    0.326867] Mount-cache hash table entries: 4096 (order: 3, 32768 bytes, linear)
[    0.327732] Mountpoint-cache hash table entries: 4096 (order: 3, 32768 bytes, linear)
[    0.330676] x86/cpu: User Mode Instruction Prevention (UMIP) activated
[    0.332044] Last level iTLB entries: 4KB 0, 2MB 0, 4MB 0
[    0.334642] Last level dTLB entries: 4KB 0, 2MB 0, 4MB 0, 1GB 0
[    0.335357] Spectre V1 : Mitigation: usercopy/swapgs barriers and __user pointer sanitization
[    0.336335] Spectre V2 : WARNING: Unprivileged eBPF is enabled with eIBRS on, data leaks possible via Spectre v2 BHB attacks!
[    0.337590] Spectre V2 : Mitigation: Enhanced / Automatic IBRS
[    0.338616] Spectre V2 : Spectre v2 / SpectreRSB mitigation: Filling RSB on context switch
[    0.339492] Spectre V2 : Spectre v2 / PBRSB-eIBRS: Retire a single CALL on VMEXIT
[    0.340301] Spectre V2 : mitigation: Enabling conditional Indirect Branch Prediction Barrier
[    0.341164] Speculative Store Bypass: Mitigation: Speculative Store Bypass disabled via prctl
[    0.498688] Freeing SMP alternatives memory: 56K
[    0.499242] Running RCU synchronous self tests
[    0.499730] Running RCU synchronous self tests
[    0.500664] smpboot: CPU0: Genuine Intel(R) CPU 0000 @ 2.20GHz (family: 0x6, model: 0x8d, stepping: 0x0)
[    0.502372] cblist_init_generic: Setting adjustable number of callback queues.
[    0.502609] cblist_init_generic: Setting shift to 1 and lim to 1.
[    0.502609] cblist_init_generic: Setting shift to 1 and lim to 1.
[    0.502618] cblist_init_generic: Setting shift to 1 and lim to 1.
[    0.503342] Running RCU-tasks wait API self tests
[    0.607001] Performance Events: Icelake events, full-width counters, Intel PMU driver.
[    0.608608] ... version:                2
[    0.609269] ... bit width:              48
[    0.609951] ... generic registers:      8
[    0.610625] ... value mask:             0000ffffffffffff
[    0.611501] ... max period:             00007fffffffffff
[    0.612372] ... fixed-purpose events:   3
[    0.613042] ... event mask:             00000007000000ff
[    0.614669] Callback from call_rcu_tasks_trace() invoked.
[    0.615824] rcu: Hierarchical SRCU implementation.
[    0.616585] rcu: 	Max phase no-delay instances is 1000.
[    0.621056] smp: Bringing up secondary CPUs ...
[    0.623437] x86: Booting SMP configuration:
[    0.624132] .... node  #0, CPUs:      #1
[    0.624690] smp: Brought up 1 node, 2 CPUs
[    0.624690] smpboot: Max logical packages: 1
[    0.626635] smpboot: Total of 2 processors activated (12441.60 BogoMIPS)
[    0.632788] devtmpfs: initialized
[    0.632788] x86/mm: Memory block size: 128MB
[    0.635875] Running RCU synchronous self tests
[    0.638655] Running RCU synchronous self tests
[    0.639445] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 7645041785100000 ns
[    0.640939] futex hash table entries: 512 (order: 4, 65536 bytes, linear)
[    0.642534] pinctrl core: initialized pinctrl subsystem
[    0.643891] 
[    0.644163] *************************************************************
[    0.645185] **     NOTICE NOTICE NOTICE NOTICE NOTICE NOTICE NOTICE    **
[    0.646214] **                                                         **
[    0.646622] **  IOMMU DebugFS SUPPORT HAS BEEN ENABLED IN THIS KERNEL  **
[    0.647661] **                                                         **
[    0.648694] ** This means that this kernel is built to expose internal **
[    0.649742] ** IOMMU data structures, which may compromise security on **
[    0.650623] ** your system.                                            **
[    0.651665] **                                                         **
[    0.652716] ** If you see this message and you are not debugging the   **
[    0.653755] ** kernel, report this immediately to your vendor!         **
[    0.654621] **                                                         **
[    0.655670] **     NOTICE NOTICE NOTICE NOTICE NOTICE NOTICE NOTICE    **
[    0.656724] *************************************************************
[    0.657892] PM: RTC time: 01:45:12, date: 2023-03-14
[    0.666269] NET: Registered PF_NETLINK/PF_ROUTE protocol family
[    0.668024] DMA: preallocated 256 KiB GFP_KERNEL pool for atomic allocations
[    0.669191] DMA: preallocated 256 KiB GFP_KERNEL|GFP_DMA pool for atomic allocations
[    0.670465] DMA: preallocated 256 KiB GFP_KERNEL|GFP_DMA32 pool for atomic allocations
[    0.670757] audit: initializing netlink subsys (disabled)
[    0.671689] audit: type=2000 audit(1678758312.685:1): state=initialized audit_enabled=0 res=1
[    0.671831] thermal_sys: Registered thermal governor 'fair_share'
[    0.671850] thermal_sys: Registered thermal governor 'bang_bang'
[    0.672837] thermal_sys: Registered thermal governor 'step_wise'
[    0.673775] thermal_sys: Registered thermal governor 'user_space'
[    0.674819] cpuidle: using governor ladder
[    0.676345] cpuidle: using governor menu
[    0.679246] acpiphp: ACPI Hot Plug PCI Controller Driver version: 0.5
[    0.681015] PCI: Using configuration type 1 for base access
[    0.683999] kprobes: kprobe jump-optimization is enabled. All kprobes are optimized if possible.
[    1.130208] HugeTLB: registered 1.00 GiB page size, pre-allocated 0 pages
[    1.130635] HugeTLB: 16380 KiB vmemmap can be freed for a 1.00 GiB page
[    1.131776] HugeTLB: registered 2.00 MiB page size, pre-allocated 0 pages
[    1.132892] HugeTLB: 28 KiB vmemmap can be freed for a 2.00 MiB page
[    1.138020] ACPI: Added _OSI(Module Device)
[    1.138631] ACPI: Added _OSI(Processor Device)
[    1.139360] ACPI: Added _OSI(3.0 _SCP Extensions)
[    1.140099] ACPI: Added _OSI(Processor Aggregator Device)
[    1.153539] ACPI: 1 ACPI AML tables successfully acquired and loaded
[    5.298625] Callback from call_rcu_tasks_rude() invoked.
[    5.403605] ACPI: Interpreter enabled
[    5.404477] ACPI: PM: (supports S0 S3 S4 S5)
[    5.405188] ACPI: Using IOAPIC for interrupt routing
[    5.406131] PCI: Using host bridge windows from ACPI; if necessary, use "pci=nocrs" and report a bug
[    5.406624] PCI: Using E820 reservations for host bridge windows
[    5.409225] ACPI: Enabled 2 GPEs in block 00 to 0F
[    5.451446] ACPI: PCI Root Bridge [PCI0] (domain 0000 [bus 00-ff])
[    5.452488] acpi PNP0A03:00: _OSC: OS supports [ASPM ClockPM Segments MSI EDR HPX-Type3]
[    5.453326] acpi PNP0A03:00: _OSC: not requesting OS control; OS requires [ExtendedConfig ASPM ClockPM MSI]
[    5.454409] acpi PNP0A03:00: fail to add MMCONFIG information, can't access extended configuration space under this bridge
[    5.457882] acpiphp: Slot [3] registered
[    5.458421] acpiphp: Slot [4] registered
[    5.458703] acpiphp: Slot [5] registered
[    5.459200] acpiphp: Slot [6] registered
[    5.459698] acpiphp: Slot [7] registered
[    5.460207] acpiphp: Slot [8] registered
[    5.460722] acpiphp: Slot [9] registered
[    5.461217] acpiphp: Slot [10] registered
[    5.461713] acpiphp: Slot [11] registered
[    5.462220] acpiphp: Slot [12] registered
[    5.462701] acpiphp: Slot [13] registered
[    5.463208] acpiphp: Slot [14] registered
[    5.463719] acpiphp: Slot [15] registered
[    5.464226] acpiphp: Slot [16] registered
[    5.464730] acpiphp: Slot [17] registered
[    5.465234] acpiphp: Slot [18] registered
[    5.465746] acpiphp: Slot [19] registered
[    5.466251] acpiphp: Slot [20] registered
[    5.466700] acpiphp: Slot [21] registered
[    5.467196] acpiphp: Slot [22] registered
[    5.467701] acpiphp: Slot [23] registered
[    5.468207] acpiphp: Slot [24] registered
[    5.468716] acpiphp: Slot [25] registered
[    5.469226] acpiphp: Slot [26] registered
[    5.469727] acpiphp: Slot [27] registered
[    5.470239] acpiphp: Slot [28] registered
[    5.470711] acpiphp: Slot [29] registered
[    5.471244] acpiphp: Slot [30] registered
[    5.471730] acpiphp: Slot [31] registered
[    5.472176] PCI host bridge to bus 0000:00
[    5.472612] pci_bus 0000:00: root bus resource [io  0x0000-0x0cf7 window]
[    5.473318] pci_bus 0000:00: root bus resource [io  0x0d00-0xffff window]
[    5.474029] pci_bus 0000:00: root bus resource [mem 0x000a0000-0x000bffff window]
[    5.474619] pci_bus 0000:00: root bus resource [mem 0x80000000-0xfebfffff window]
[    5.475391] pci_bus 0000:00: root bus resource [mem 0x100000000-0x17fffffff window]
[    5.476176] pci_bus 0000:00: root bus resource [bus 00-ff]
[    5.476910] pci 0000:00:00.0: [8086:1237] type 00 class 0x060000
[    5.481525] pci 0000:00:01.0: [8086:7000] type 00 class 0x060100
[    5.483130] pci 0000:00:01.1: [8086:7010] type 00 class 0x010180
[    5.485524] pci 0000:00:01.1: reg 0x20: [io  0xc040-0xc04f]
[    5.486842] pci 0000:00:01.1: legacy IDE quirk: reg 0x10: [io  0x01f0-0x01f7]
[    5.487605] pci 0000:00:01.1: legacy IDE quirk: reg 0x14: [io  0x03f6]
[    5.488289] pci 0000:00:01.1: legacy IDE quirk: reg 0x18: [io  0x0170-0x0177]
[    5.489045] pci 0000:00:01.1: legacy IDE quirk: reg 0x1c: [io  0x0376]
[    5.490130] pci 0000:00:01.3: [8086:7113] type 00 class 0x068000
[    5.491020] pci 0000:00:01.3: quirk: [io  0x0600-0x063f] claimed by PIIX4 ACPI
[    5.491774] pci 0000:00:01.3: quirk: [io  0x0700-0x070f] claimed by PIIX4 SMB
[    5.492901] pci 0000:00:02.0: [1234:1111] type 00 class 0x030000
[    5.495302] pci 0000:00:02.0: reg 0x10: [mem 0xfd000000-0xfdffffff pref]
[    5.498084] pci 0000:00:02.0: reg 0x18: [mem 0xfebf0000-0xfebf0fff]
[    5.503143] pci 0000:00:02.0: reg 0x30: [mem 0xfebe0000-0xfebeffff pref]
[    5.504122] pci 0000:00:02.0: Video device with shadowed ROM at [mem 0x000c0000-0x000dffff]
[    5.509860] pci 0000:00:03.0: [8086:100e] type 00 class 0x020000
[    5.510980] pci 0000:00:03.0: reg 0x10: [mem 0xfebc0000-0xfebdffff]
[    5.512218] pci 0000:00:03.0: reg 0x14: [io  0xc000-0xc03f]
[    5.516038] pci 0000:00:03.0: reg 0x30: [mem 0xfeb80000-0xfebbffff pref]
[    5.531202] ACPI: PCI: Interrupt link LNKA configured for IRQ 10
[    5.532353] ACPI: PCI: Interrupt link LNKB configured for IRQ 10
[    5.533454] ACPI: PCI: Interrupt link LNKC configured for IRQ 11
[    5.534550] ACPI: PCI: Interrupt link LNKD configured for IRQ 11
[    5.534849] ACPI: PCI: Interrupt link LNKS configured for IRQ 9
[    5.537128] iommu: Default domain type: Translated 
[    5.537128] iommu: DMA domain TLB invalidation policy: lazy mode 
[    5.538350] SCSI subsystem initialized
[    5.542876] ACPI: bus type USB registered
[    5.543417] usbcore: registered new interface driver usbfs
[    5.544039] usbcore: registered new interface driver hub
[    5.544640] usbcore: registered new device driver usb
[    5.545309] pps_core: LinuxPPS API ver. 1 registered
[    5.545826] pps_core: Software ver. 5.3.6 - Copyright 2005-2007 Rodolfo Giometti <giometti@linux.it>
[    5.546636] PTP clock support registered
[    5.547170] EDAC MC: Ver: 3.0.0
[    5.549159] NetLabel: Initializing
[    5.549698] NetLabel:  domain hash size = 128
[    5.550435] NetLabel:  protocols = UNLABELED CIPSOv4 CALIPSO
[    5.550609] NetLabel:  unlabeled traffic allowed by default
[    5.554817] Callback from call_rcu_tasks() invoked.
[    5.555557] PCI: Using ACPI for IRQ routing
[    5.556606] pci 0000:00:02.0: vgaarb: setting as boot VGA device
[    5.556606] pci 0000:00:02.0: vgaarb: bridge control possible
[    5.556606] pci 0000:00:02.0: vgaarb: VGA device added: decodes=io+mem,owns=io+mem,locks=none
[    5.558638] vgaarb: loaded
[    5.559190] hpet0: at MMIO 0xfed00000, IRQs 2, 8, 0
[    5.559733] hpet0: 3 comparators, 64-bit 100.000000 MHz counter
[    5.566892] clocksource: Switched to clocksource kvm-clock
[    5.569626] VFS: Disk quotas dquot_6.6.0
[    5.570133] VFS: Dquot-cache hash table entries: 512 (order 0, 4096 bytes)
[    5.571040] pnp: PnP ACPI init
[    5.573860] pnp: PnP ACPI: found 6 devices
[    5.587625] clocksource: acpi_pm: mask: 0xffffff max_cycles: 0xffffff, max_idle_ns: 2085701024 ns
[    5.588979] NET: Registered PF_INET protocol family
[    5.589810] IP idents hash table entries: 32768 (order: 6, 262144 bytes, linear)
[    5.592029] tcp_listen_portaddr_hash hash table entries: 1024 (order: 4, 73728 bytes, linear)
[    5.592996] Table-perturb hash table entries: 65536 (order: 6, 262144 bytes, linear)
[    5.593789] TCP established hash table entries: 16384 (order: 5, 131072 bytes, linear)
[    5.595011] TCP bind hash table entries: 16384 (order: 9, 2359296 bytes, linear)
[    5.599931] TCP: Hash tables configured (established 16384 bind 16384)
[    5.600987] UDP hash table entries: 1024 (order: 5, 163840 bytes, linear)
[    5.601889] UDP-Lite hash table entries: 1024 (order: 5, 163840 bytes, linear)
[    5.603018] NET: Registered PF_UNIX/PF_LOCAL protocol family
[    5.604272] RPC: Registered named UNIX socket transport module.
[    5.604929] RPC: Registered udp transport module.
[    5.605418] RPC: Registered tcp transport module.
[    5.605901] RPC: Registered tcp NFSv4.1 backchannel transport module.
[    5.606635] pci_bus 0000:00: resource 4 [io  0x0000-0x0cf7 window]
[    5.607293] pci_bus 0000:00: resource 5 [io  0x0d00-0xffff window]
[    5.607908] pci_bus 0000:00: resource 6 [mem 0x000a0000-0x000bffff window]
[    5.608598] pci_bus 0000:00: resource 7 [mem 0x80000000-0xfebfffff window]
[    5.609300] pci_bus 0000:00: resource 8 [mem 0x100000000-0x17fffffff window]
[    5.610365] pci 0000:00:01.0: PIIX3: Enabling Passive Release
[    5.610996] pci 0000:00:00.0: Limiting direct PCI/PCI transfers
[    5.611728] PCI: CLS 0 bytes, default 64
[    5.612671] ACPI: bus type thunderbolt registered
[    5.613605] clocksource: tsc: mask: 0xffffffffffffffff max_cycles: 0x2cd5a8bb032, max_idle_ns: 440795365915 ns
[    5.806470] Initialise system trusted keyrings
[    5.807224] Key type blacklist registered
[    5.807957] workingset: timestamp_bits=36 max_order=19 bucket_order=0
[    5.808703] zbud: loaded
[    5.809959] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    5.811589] NFS: Registering the id_resolver key type
[    5.812157] Key type id_resolver registered
[    5.812590] Key type id_legacy registered
[    5.813047] nfs4filelayout_init: NFSv4 File Layout Driver Registering...
[    5.813774] nfs4flexfilelayout_init: NFSv4 Flexfile Layout Driver Registering...
[    5.814766] fuse: init (API version 7.38)
[    5.815458] SGI XFS with ACLs, security attributes, realtime, quota, no debug enabled
[    5.817255] 9p: Installing v9fs 9p2000 file system support
[    5.827805] Key type asymmetric registered
[    5.828268] Asymmetric key parser 'x509' registered
[    5.828869] Block layer SCSI generic (bsg) driver version 0.4 loaded (major 243)
[    5.830071] io scheduler mq-deadline registered
[    5.830916] io scheduler bfq registered
[    5.832568] shpchp: Standard Hot Plug PCI Controller Driver version: 0.4
[    5.834551] IPMI message handler: version 39.2
[    5.835413] ipmi device interface
[    5.838443] input: Power Button as /devices/LNXSYSTM:00/LNXPWRBN:00/input/input0
[    5.839624] ACPI: button: Power Button [PWRF]
[    5.841605] ERST DBG: ERST support is disabled.
[    5.843838] Serial: 8250/16550 driver, 32 ports, IRQ sharing enabled
[    5.845211] 00:04: ttyS0 at I/O 0x3f8 (irq = 4, base_baud = 115200) is a 16550A
[    5.859579] Linux agpgart interface v0.103
[    5.861581] ACPI: bus type drm_connector registered
[    5.891965] brd: module loaded
[    5.909816] loop: module loaded
[    5.921748] scsi host0: ata_piix
[    5.923646] scsi host1: ata_piix
[    5.924621] ata1: PATA max MWDMA2 cmd 0x1f0 ctl 0x3f6 bmdma 0xc040 irq 14
[    5.925713] ata2: PATA max MWDMA2 cmd 0x170 ctl 0x376 bmdma 0xc048 irq 15
[    5.929842] tun: Universal TUN/TAP device driver, 1.6
[    5.931133] e100: Intel(R) PRO/100 Network Driver
[    5.931898] e100: Copyright(c) 1999-2006 Intel Corporation
[    5.932876] e1000: Intel(R) PRO/1000 Network Driver
[    5.933673] e1000: Copyright (c) 1999-2006 Intel Corporation.
[    6.086906] ata1: found unknown device (class 0)
[    6.088593] ata1.00: ATA-7: QEMU HARDDISK, 2.5+, max UDMA/100
[    6.089538] ata1.00: 16777216 sectors, multi 16: LBA48 
[    6.090871] ata2: found unknown device (class 0)
[    6.093115] scsi 0:0:0:0: Direct-Access     ATA      QEMU HARDDISK    2.5+ PQ: 0 ANSI: 5
[    6.096757] scsi 0:0:0:0: Attached scsi generic sg0 type 0
[    6.098420] ata2.00: ATAPI: QEMU DVD-ROM, 2.5+, max UDMA/100
[    6.101932] sd 0:0:0:0: [sda] 16777216 512-byte logical blocks: (8.59 GB/8.00 GiB)
[    6.103265] scsi 1:0:0:0: CD-ROM            QEMU     QEMU DVD-ROM     2.5+ PQ: 0 ANSI: 5
[    6.104932] sd 0:0:0:0: [sda] Write Protect is off
[    6.106308] sd 0:0:0:0: [sda] Write cache: enabled, read cache: enabled, doesn't support DPO or FUA
[    6.108649] sd 0:0:0:0: [sda] Preferred minimum I/O size 512 bytes
[    6.128447] scsi 1:0:0:0: Attached scsi generic sg1 type 5
[    6.131765] sd 0:0:0:0: [sda] Attached SCSI disk
[    6.338519] ACPI: \_SB_.LNKC: Enabled at IRQ 11
[    6.670490] e1000 0000:00:03.0 eth0: (PCI:33MHz:32-bit) 52:54:00:12:34:56
[    6.671273] e1000 0000:00:03.0 eth0: Intel(R) PRO/1000 Network Connection
[    6.672102] e1000e: Intel(R) PRO/1000 Network Driver
[    6.672611] e1000e: Copyright(c) 1999 - 2015 Intel Corporation.
[    6.673286] igb: Intel(R) Gigabit Ethernet Network Driver
[    6.673844] igb: Copyright (c) 2007-2014 Intel Corporation.
[    6.674526] PPP generic driver version 2.4.2
[    6.675855] VFIO - User Level meta-driver version: 0.3
[    6.677527] usbcore: registered new interface driver uas
[    6.678108] usbcore: registered new interface driver usb-storage
[    6.678932] i8042: PNP: PS/2 Controller [PNP0303:KBD,PNP0f13:MOU] at 0x60,0x64 irq 1,12
[    6.680642] serio: i8042 KBD port at 0x60,0x64 irq 1
[    6.681207] serio: i8042 AUX port at 0x60,0x64 irq 12
[    6.682735] mousedev: PS/2 mouse device common for all mice
[    6.684267] input: AT Translated Set 2 keyboard as /devices/platform/i8042/serio0/input/input1
[    6.686508] input: VirtualPS/2 VMware VMMouse as /devices/platform/i8042/serio1/input/input4
[    6.686876] rtc_cmos 00:05: RTC can wake from S4
[    6.688496] input: VirtualPS/2 VMware VMMouse as /devices/platform/i8042/serio1/input/input3
[    6.690240] rtc_cmos 00:05: registered as rtc0
[    6.691060] rtc_cmos 00:05: setting system clock to 2023-03-14T01:45:18 UTC (1678758318)
[    6.692760] rtc_cmos 00:05: alarms up to one day, y3k, 242 bytes nvram, hpet irqs
[    6.693949] i2c_dev: i2c /dev entries driver
[    6.694805] device-mapper: core: CONFIG_IMA_DISABLE_HTABLE is disabled. Duplicate IMA measurements will not be recorded in the IMA log.
[    6.696648] device-mapper: uevent: version 1.0.3
[    6.697829] device-mapper: ioctl: 4.47.0-ioctl (2022-07-28) initialised: dm-devel@redhat.com
[    6.699160] intel_pstate: CPU model not supported
[    6.700119] sdhci: Secure Digital Host Controller Interface driver
[    6.701060] sdhci: Copyright(c) Pierre Ossman
[    6.701936] sdhci-pltfm: SDHCI platform and OF driver helper
[    6.702942] ledtrig-cpu: registered to indicate activity on CPUs
[    6.704858] drop_monitor: Initializing network drop monitor service
[    6.706198] NET: Registered PF_INET6 protocol family
[    6.712172] Segment Routing with IPv6
[    6.712816] In-situ OAM (IOAM) with IPv6
[    6.713542] NET: Registered PF_PACKET protocol family
[    6.714645] 9pnet: Installing 9P2000 support
[    6.715461] Key type dns_resolver registered
[    6.717679] IPI shorthand broadcast: enabled
[    6.754685] sched_clock: Marking stable (6440009291, 314609992)->(6807893468, -53274185)
[    6.757492] registered taskstats version 1
[    6.758787] Loading compiled-in X.509 certificates
[    6.759950] zswap: loaded using pool lzo/zbud
[    6.781554] Key type .fscrypt registered
[    6.782165] Key type fscrypt-provisioning registered
[    6.785194] Key type encrypted registered
[    6.785692] ima: No TPM chip found, activating TPM-bypass!
[    6.786255] ima: Allocated hash algorithm: sha1
[    6.786793] ima: No architecture policies found
[    6.787355] evm: Initialising EVM extended attributes:
[    6.787867] evm: security.selinux
[    6.788198] evm: security.SMACK64
[    6.788531] evm: security.SMACK64EXEC
[    6.788895] evm: security.SMACK64TRANSMUTE
[    6.789301] evm: security.SMACK64MMAP
[    6.789671] evm: security.apparmor
[    6.790005] evm: security.ima
[    6.790299] evm: security.capability
[    6.790694] evm: HMAC attrs: 0x1
[    6.792637] PM:   Magic number: 15:371:761
[    6.793854] RAS: Correctable Errors collector initialized.
[    6.796986] md: Waiting for all devices to be available before autodetect
[    6.797724] md: If you don't use raid, use raid=noautodetect
[    6.798333] md: Autodetecting RAID arrays.
[    6.798834] md: autorun ...
[    6.799145] md: ... autorun DONE.
[    6.810572] EXT4-fs (sda): mounted filesystem 23a53bb9-f815-47a5-b74c-5e08f7731193 with ordered data mode. Quota mode: none.
[    6.811983] VFS: Mounted root (ext4 filesystem) readonly on device 8:0.
[    6.816095] devtmpfs: mounted
[    6.837037] Freeing unused decrypted memory: 2036K
[    6.842539] Freeing unused kernel image (initmem) memory: 10508K
[    6.843308] Write protecting the kernel read-only data: 47104k
[    6.847007] Freeing unused kernel image (rodata/data gap) memory: 392K
[    6.966435] x86/mm: Checked W+X mappings: passed, no W+X pages found.
[    6.966956] Run /sbin/init as init process
[    7.099809] systemd[1]: RTC configured in localtime, applying delta of 0 minutes to system time.
[    7.138345] systemd[1]: systemd 239 (239-49.el8) running in system mode. (+PAM +AUDIT +SELINUX +IMA -APPARMOR +SMACK +SYSVINIT +UTMP +LIBCRYPTSETUP +GCRYPT +GNUTLS +ACL +XZ +LZ4 +SECCOMP +BLKID +ELFUTILS +KMOD +IDN2 -IDN +PCRE2 default-hierarchy=legacy)
[    7.140101] systemd[1]: Detected virtualization kvm.
[    7.140449] systemd[1]: Detected architecture x86-64.

Welcome to [0;31mCentOS Stream 8[0m!

[    7.200031] systemd[1]: Set hostname to <test>.
[    7.621812] systemd[1]: Listening on multipathd control socket.
[[0;32m  OK  [0m] Listening on multipathd control socket.
[    7.623904] systemd[1]: Listening on LVM2 poll daemon socket.
[[0;32m  OK  [0m] Listening on LVM2 poll daemon socket.
[    7.626082] systemd[1]: Listening on RPCbind Server Activation Socket.
[[0;32m  OK  [0m] Listening on RPCbind Server Activation Socket.
[    7.628444] systemd[1]: Set up automount Arbitrary Executable File Formats File System Automount Point.
[[0;32m  OK  [0m] Set up automount Arbitrary Executabâ€¦rmats File System Automount Point.
[    7.630387] systemd[1]: Reached target Swap.
[[0;32m  OK  [0m] Reached target Swap.
[    7.635311] systemd[1]: Created slice system-serial\x2dgetty.slice.
[[0;32m  OK  [0m] Created slice system-serial\x2dgetty.slice.
[[0;32m  OK  [0m] Listening on Journal Socket (/dev/log).
[[0;32m  OK  [0m] Reached target RPC Port Mapper.
[[0;32m  OK  [0m] Listening on Device-mapper event daemon FIFOs.
[[0;32m  OK  [0m] Listening on udev Kernel Socket.
[[0;32m  OK  [0m] Listening on Process Core Dump Socket.
[[0;32m  OK  [0m] Created slice system-getty.slice.
[[0;32m  OK  [0m] Created slice User and Session Slice.
[[0;32m  OK  [0m] Reached target Slices.
[[0;32m  OK  [0m] Listening on udev Control Socket.
[[0;32m  OK  [0m] Listening on Journal Socket.
         Starting Setup Virtual Console...
         Starting Monitoring of LVM2 mirrorsâ€¦ng dmeventd or progress polling...
         Starting Load Kernel Modules...
         Mounting Huge Pages File System...
         Starting Remount Root and Kernel File Systems...
         Starting udev Coldplug all Devices...
         Mounting Kernel Debug File System...
         Starting Journal Service...
         Mounting POSIX Message Queue File System...
[[0;32m  OK  [0m] Listening on initctl Compatibility Named Pipe.
[[0;32m  OK  [0m] Started Forward Password Requests to Wall Directory Watch.
[[0;32m  OK  [0m] Created slice system-sshd\x2dkeygen.slice.
[[0;1;31mFAILED[0m] Failed to start Load Kernel Modules.
See 'systemctl status systemd-modules-load.service' for details.
[[0;32m  OK  [0m] Mounted Huge Pages File System.
[[0;32m  OK  [0m] Mounted Kernel Debug File System.
[[0;32m  OK  [0m] Mounted POSIX Message Queue File System.
[    8.287869] EXT4-fs (sda): re-mounted 23a53bb9-f815-47a5-b74c-5e08f7731193. Quota mode: none.
         Mounting Kernel Configuration File System...
         Starting Apply Kernel Variables...
         Mounting FUSE Control File System...
[[0;32m  OK  [0m] Started Journal Service.
[[0;32m  OK  [0m] Started Setup Virtual Console.
[[0;32m  OK  [0m] Started Remount Root and Kernel File Systems.
[[0;32m  OK  [0m] Mounted Kernel Configuration File System.
[[0;32m  OK  [0m] Started Apply Kernel Variables.
[[0;32m  OK  [0m] Mounted FUSE Control File System.
         Starting Load/Save Random Seed...
         Starting Create Static Device Nodes in /dev...
         Starting Flush Journal to Persistent Storage...
[[0;32m  OK  [0m] Started Load/Save Random Seed.
[[0;32m  OK  [0m] Started Create Static Device Nodes in /dev.
         Starting udev Kernel Device Manager...
[[0;32m  OK  [0m] Started Flush Journal to Persistent Storage.
[[0;32m  OK  [0m] Started udev Coldplug all Devices.
         Starting udev Wait for Complete Device Initialization...
[[0;32m  OK  [0m] Started udev Kernel Device Manager.
         Starting Show Plymouth Boot Screen...
[[0;32m  OK  [0m] Started Show Plymouth Boot Screen.
[[0;32m  OK  [0m] Reached target Local Encrypted Volumes.
[[0;32m  OK  [0m] Reached target Paths.
[[0;32m  OK  [0m] Started Forward Password Requests to Plymouth Directory Watch.
[[0;32m  OK  [0m] Found device /dev/ttyS0.
[[0;32m  OK  [0m] Listening on Load/Save RF Kill Switch Status /dev/rfkill Watch.
[[0;32m  OK  [0m] Started Monitoring of LVM2 mirrors,â€¦sing dmeventd or progress polling.
[[0;32m  OK  [0m] Started udev Wait for Complete Device Initialization.
[[0;32m  OK  [0m] Reached target Local File Systems (Pre).
[[0;32m  OK  [0m] Reached target Local File Systems.
         Starting Tell Plymouth To Write Out Runtime Data...
         Starting Create Volatile Files and Directories...
         Starting Restore /run/initramfs on shutdown...
[[0;32m  OK  [0m] Started Tell Plymouth To Write Out Runtime Data.
[[0;32m  OK  [0m] Started Create Volatile Files and Directories.
[[0;32m  OK  [0m] Started Restore /run/initramfs on shutdown.
         Starting RPC Bind...
         Starting Security Auditing Service...
         Mounting RPC Pipe File System...
[[0;32m  OK  [0m] Started RPC Bind.
[[0;32m  OK  [0m] Mounted RPC Pipe File System.
[[0;32m  OK  [0m] Reached target rpc_pipefs.target.
[[0;32m  OK  [0m] Started Security Auditing Service.
         Starting Update UTMP about System Boot/Shutdown...
[[0;32m  OK  [0m] Started Update UTMP about System Boot/Shutdown.
[[0;32m  OK  [0m] Reached target System Initialization.
[[0;32m  OK  [0m] Listening on D-Bus System Message Bus Socket.
[[0;32m  OK  [0m] Started dnf makecache --timer.
[[0;32m  OK  [0m] Listening on SSSD Kerberos Cache Manager responder socket.
[[0;32m  OK  [0m] Reached target Sockets.
[[0;32m  OK  [0m] Reached target Basic System.
[[0;32m  OK  [0m] Started D-Bus System Message Bus.
         Starting Authorization Manager...
[[0;32m  OK  [0m] Started irqbalance daemon.
         Starting Auto-connect to subsystemsâ€¦-NVME devices found during boot...
[[0;32m  OK  [0m] Reached target sshd-keygen.target.
         Starting Network Manager...
         Starting NTP client/server...
         Starting Login Service...
[[0;32m  OK  [0m] Started Machine Check Exception Logging Daemon.
[[0;32m  OK  [0m] Started Daily Cleanup of Temporary Directories.
         Starting Self Monitoring and Reporting Technology (SMART) Daemon...
[[0;32m  OK  [0m] Started daily update of the root trust anchor for DNSSEC.
[[0;32m  OK  [0m] Reached target Timers.
[[0;32m  OK  [0m] Started Auto-connect to subsystems â€¦FC-NVME devices found during boot.
         Starting update of the root trust aâ€¦or DNSSEC validation in unbound...
[[0;32m  OK  [0m] Started Self Monitoring and Reporting Technology (SMART) Daemon.
[[0;32m  OK  [0m] Started Network Manager.
[[0;32m  OK  [0m] Reached target Network.
         Starting GSSAPI Proxy Daemon...
         Starting OpenSSH server daemon...
         Starting Dynamic System Tuning Daemon...
         Starting Network Manager Wait Online...
[[0;32m  OK  [0m] Started NTP client/server.
[[0;32m  OK  [0m] Started GSSAPI Proxy Daemon.
[[0;32m  OK  [0m] Started Login Service.
         Starting Hostname Service...
[[0;32m  OK  [0m] Reached target NFS client services.
[[0;32m  OK  [0m] Reached target Remote File Systems (Pre).
[[0;32m  OK  [0m] Reached target Remote File Systems.
         Starting Permit User Sessions...
[[0;32m  OK  [0m] Started OpenSSH server daemon.
[[0;32m  OK  [0m] Started update of the root trust anâ€¦ for DNSSEC validation in unbound.
[[0;32m  OK  [0m] Started Authorization Manager.
[[0;32m  OK  [0m] Started Permit User Sessions.
         Starting Terminate Plymouth Boot Screen...
         Starting Hold until boot process finishes up...
[[0;32m  OK  [0m] Started Command Scheduler.
[[0;32m  OK  [0m] Started Terminate Plymouth Boot Screen.
[[0;32m  OK  [0m] Started Hold until boot process finishes up.
[   12.400615] e1000: eth0 NIC Link is Up 1000 Mbps Full Duplex, Flow Control: RX
[   12.402165] IPv6: ADDRCONF(NETDEV_CHANGE): eth0: link becomes ready
[   12.888773] Spectre V2 : WARNING: Unprivileged eBPF is enabled with eIBRS on, data leaks possible via Spectre v2 BHB attacks!
[   12.890119] Spectre V2 : WARNING: Unprivileged eBPF is enabled with eIBRS on, data leaks possible via Spectre v2 BHB attacks!

CentOS Stream 8
Kernel 6.3.0-rc2-eeac8ede1755 on an x86_64

test login: [   24.464930] memfd_create() without MFD_EXEC nor MFD_NOEXEC_SEAL, pid=329 'systemd'
[   32.196744] ------------[ cut here ]------------
[   32.197234] WARNING: CPU: 0 PID: 557 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   32.197954] Modules linked in:
[   32.198195] CPU: 0 PID: 557 Comm: repro Not tainted 6.3.0-rc2-eeac8ede1755 #1
[   32.198777] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.199605] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   32.200029] Code: d2 0f ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 fc d3 0f ff 45 85 e4 0f 85 eb 01 00 00 e8 0e d2 0f ff <0f> 0b e8 07 d2 0f ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   32.201354] RSP: 0018:ffffc9000108baf0 EFLAGS: 00010246
[   32.201759] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff821e3f85
[   32.202270] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   32.202819] RBP: ffffc9000108bd18 R08: 000000000003ca25 R09: 0000000000000014
[   32.203341] R10: 000000000003ca00 R11: 0000000000000024 R12: 0000000000000004
[   32.203875] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   32.204383] FS:  00007f3499ce1740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.204978] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.205393] CR2: 0000000020000243 CR3: 00000000179c2001 CR4: 0000000000770ef0
[   32.205927] PKRU: 55555554
[   32.206132] Call Trace:
[   32.206320]  <TASK>
[   32.206491]  ? __this_cpu_preempt_check+0x20/0x30
[   32.206915]  ? __this_cpu_preempt_check+0x20/0x30
[   32.207299]  ? lock_is_held_type+0xe6/0x140
[   32.207630]  ? rcu_read_lock_sched_held+0x57/0x80
[   32.208000]  ? __mutex_lock+0x13a/0xf80
[   32.208327]  ? write_comp_data+0x2f/0x90
[   32.208643]  ? write_comp_data+0x2f/0x90
[   32.208948]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.209333]  iopt_area_unfill_domain+0x32/0x40
[   32.209688]  iopt_table_remove_domain+0x23f/0x4c0
[   32.210053]  iommufd_device_selftest_detach+0x3a/0x90
[   32.210451]  iommufd_selftest_destroy+0x55/0x70
[   32.210832]  iommufd_object_destroy_user+0xce/0x130
[   32.211214]  iommufd_destroy+0xa2/0xc0
[   32.211528]  iommufd_fops_ioctl+0x206/0x330
[   32.211851]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.212212]  ? write_comp_data+0x2f/0x90
[   32.212541]  __x64_sys_ioctl+0x10e/0x160
[   32.212848]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   32.213207]  do_syscall_64+0x3b/0x90
[   32.213511]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   32.213896] RIP: 0033:0x7f3499e0659d
[   32.214174] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   32.215510] RSP: 002b:00007ffd7bbdb808 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   32.216071] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3499e0659d
[   32.216581] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   32.217108] RBP: 00007ffd7bbdb820 R08: 00007ffd7bbdb820 R09: 00007ffd7bbdb820
[   32.217624] R10: 00007ffd7bbdb820 R11: 0000000000000213 R12: 0000000000401180
[   32.218154] R13: 00007ffd7bbdb940 R14: 0000000000000000 R15: 0000000000000000
[   32.218704]  </TASK>
[   32.218899] irq event stamp: 18545
[   32.219156] hardirqs last  enabled at (18553): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   32.219774] hardirqs last disabled at (18560): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   32.220410] softirqs last  enabled at (18388): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   32.221014] softirqs last disabled at (18383): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   32.221641] ---[ end trace 0000000000000000 ]---
[   32.222064] ------------[ cut here ]------------
[   32.222422] WARNING: CPU: 0 PID: 557 at drivers/iommu/iommufd/pages.c:1292 __iopt_area_unfill_domain+0x54f/0x560
[   32.223186] Modules linked in:
[   32.223443] CPU: 0 PID: 557 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   32.224055] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.224871] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   32.225295] Code: e8 16 d0 0f ff 85 db 0f 85 35 fb ff ff e8 29 ce 0f ff 0f 0b e9 29 fb ff ff e8 1d ce 0f ff 0f 0b e9 69 fe ff ff e8 11 ce 0f ff <0f> 0b e9 58 ff ff ff e8 b5 cb e1 00 0f 1f 44 00 00 90 90 90 90 90
[   32.226655] RSP: 0018:ffffc9000108baf0 EFLAGS: 00010246
[   32.227039] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff821e40d6
[   32.227559] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   32.228079] RBP: ffffc9000108bd18 R08: 000000000003ca25 R09: 0000000000000014
[   32.228581] R10: 000000000003ca00 R11: 0000000000000024 R12: 00000000000007ff
[   32.229108] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   32.229625] FS:  00007f3499ce1740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.230218] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.230655] CR2: 0000000020000243 CR3: 00000000179c2001 CR4: 0000000000770ef0
[   32.231186] PKRU: 55555554
[   32.231389] Call Trace:
[   32.231573]  <TASK>
[   32.231743]  ? __this_cpu_preempt_check+0x20/0x30
[   32.232143]  ? __this_cpu_preempt_check+0x20/0x30
[   32.232510]  ? lock_is_held_type+0xe6/0x140
[   32.232837]  ? rcu_read_lock_sched_held+0x57/0x80
[   32.233216]  ? __mutex_lock+0x13a/0xf80
[   32.233521]  ? write_comp_data+0x2f/0x90
[   32.233876]  ? write_comp_data+0x2f/0x90
[   32.234341]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.234945]  iopt_area_unfill_domain+0x32/0x40
[   32.235481]  iopt_table_remove_domain+0x23f/0x4c0
[   32.236045]  iommufd_device_selftest_detach+0x3a/0x90
[   32.236629]  iommufd_selftest_destroy+0x55/0x70
[   32.237167]  iommufd_object_destroy_user+0xce/0x130
[   32.237741]  iommufd_destroy+0xa2/0xc0
[   32.238186]  iommufd_fops_ioctl+0x206/0x330
[   32.238713]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.239271]  ? write_comp_data+0x2f/0x90
[   32.239755]  __x64_sys_ioctl+0x10e/0x160
[   32.240231]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   32.240785]  do_syscall_64+0x3b/0x90
[   32.241215]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   32.241790] RIP: 0033:0x7f3499e0659d
[   32.242198] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   32.244203] RSP: 002b:00007ffd7bbdb808 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   32.245040] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3499e0659d
[   32.245818] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   32.246588] RBP: 00007ffd7bbdb820 R08: 00007ffd7bbdb820 R09: 00007ffd7bbdb820
[   32.247401] R10: 00007ffd7bbdb820 R11: 0000000000000213 R12: 0000000000401180
[   32.248175] R13: 00007ffd7bbdb940 R14: 0000000000000000 R15: 0000000000000000
[   32.248949]  </TASK>
[   32.249203] irq event stamp: 19017
[   32.249588] hardirqs last  enabled at (19025): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   32.250502] hardirqs last disabled at (19032): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   32.251423] softirqs last  enabled at (18388): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   32.252325] softirqs last disabled at (18383): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   32.253224] ---[ end trace 0000000000000000 ]---
[   32.259484] ------------[ cut here ]------------
[   32.260072] WARNING: CPU: 0 PID: 557 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.22+0x151/0x1a0
[   32.261108] Modules linked in:
[   32.261461] CPU: 0 PID: 557 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   32.262362] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.263582] RIP: 0010:batch_unpin.isra.22+0x151/0x1a0
[   32.264155] Code: e8 e4 f1 0f ff 48 8b 45 d0 48 85 c0 75 17 e8 c6 ef 0f ff 48 8b 7d c8 48 89 de e8 da f0 0f ff 48 39 5d c8 73 07 e8 af ef 0f ff <0f> 0b e8 a8 ef 0f ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   32.266081] RSP: 0018:ffffc9000108b9d8 EFLAGS: 00010246
[   32.266673] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff821e1fbc
[   32.267442] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   32.268214] RBP: ffffc9000108ba20 R08: 0000000000000000 R09: ffff88807dc3c910
[   32.268982] R10: 0000000000000cf3 R11: 0000000000000000 R12: 0000000000000001
[   32.269727] R13: 0000000000000001 R14: 0000000000000000 R15: ffff88800b2fda00
[   32.270457] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.271354] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.271979] CR2: 00007f3499ed8500 CR3: 0000000003e3a005 CR4: 0000000000770ef0
[   32.272733] PKRU: 55555554
[   32.273031] Call Trace:
[   32.273307]  <TASK>
[   32.273577]  iopt_pages_unfill_xarray+0x3c6/0x5e0
[   32.274194]  ? write_comp_data+0x2f/0x90
[   32.274684]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.275249]  ? write_comp_data+0x2f/0x90
[   32.275717]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.276261]  ? interval_tree_remove+0x291/0x4e0
[   32.276785]  ? write_comp_data+0x2f/0x90
[   32.277255]  iopt_area_remove_access+0x108/0x120
[   32.277795]  iommufd_access_unpin_pages+0x177/0x210
[   32.278362]  iommufd_test_access_unmap+0xe0/0x130
[   32.278944]  ? __pfx_iommufd_test_staccess_release+0x10/0x10
[   32.279592]  iommufd_test_staccess_release+0x39/0x60
[   32.280160]  __fput+0x11f/0x450
[   32.280555]  ____fput+0x1e/0x30
[   32.280936]  task_work_run+0xb6/0x120
[   32.281374]  do_exit+0x547/0x1360
[   32.281748]  ? __this_cpu_preempt_check+0x20/0x30
[   32.282277]  ? lockdep_hardirqs_on+0x8a/0x110
[   32.282811]  do_group_exit+0x5e/0xf0
[   32.283233]  __x64_sys_exit_group+0x25/0x30
[   32.283708]  do_syscall_64+0x3b/0x90
[   32.284126]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   32.284693] RIP: 0033:0x7f3499dcecf6
[   32.285101] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   32.285758] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   32.286552] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   32.287344] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   32.288109] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   32.288865] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   32.289627] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   32.290426]  </TASK>
[   32.290743] irq event stamp: 20297
[   32.291125] hardirqs last  enabled at (20305): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   32.292067] hardirqs last disabled at (20312): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   32.292980] softirqs last  enabled at (20294): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   32.293887] softirqs last disabled at (20283): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   32.294790] ---[ end trace 0000000000000000 ]---
[   32.295442] ------------[ cut here ]------------
[   32.295939] WARNING: CPU: 0 PID: 557 at drivers/iommu/iommufd/pages.c:888 update_unpinned+0x75/0x80
[   32.296924] Modules linked in:
[   32.297274] CPU: 0 PID: 557 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   32.298175] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.299388] RIP: 0010:update_unpinned+0x75/0x80
[   32.299908] Code: de 0f ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 ab de 0f ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 9b de 0f ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 90 90 90 90 90 90 90 90 90 90 90
[   32.301812] RSP: 0018:ffffc9000108ba08 EFLAGS: 00010246
[   32.302390] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff821e30af
[   32.303167] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   32.303900] RBP: ffffc9000108ba20 R08: 0000000000000000 R09: ffff88807dc3c910
[   32.304647] R10: 0000000000000cf3 R11: 0000000000000000 R12: ffffffffffffffff
[   32.305415] R13: ffff88800b2fda00 R14: 0000000000000002 R15: 0000000000000002
[   32.306160] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.307046] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.307676] CR2: 00007f3499ed8500 CR3: 0000000003e3a005 CR4: 0000000000770ef0
[   32.308422] PKRU: 55555554
[   32.308725] Call Trace:
[   32.309004]  <TASK>
[   32.309263]  iopt_pages_unfill_xarray+0x549/0x5e0
[   32.309878]  ? write_comp_data+0x2f/0x90
[   32.310335]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.310925]  ? write_comp_data+0x2f/0x90
[   32.311393]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.311936]  ? interval_tree_remove+0x291/0x4e0
[   32.312447]  ? write_comp_data+0x2f/0x90
[   32.312901]  iopt_area_remove_access+0x108/0x120
[   32.313439]  iommufd_access_unpin_pages+0x177/0x210
[   32.314030]  iommufd_test_access_unmap+0xe0/0x130
[   32.314581]  ? __pfx_iommufd_test_staccess_release+0x10/0x10
[   32.315257]  iommufd_test_staccess_release+0x39/0x60
[   32.315828]  __fput+0x11f/0x450
[   32.316212]  ____fput+0x1e/0x30
[   32.316588]  task_work_run+0xb6/0x120
[   32.317028]  do_exit+0x547/0x1360
[   32.317414]  ? __this_cpu_preempt_check+0x20/0x30
[   32.317944]  ? lockdep_hardirqs_on+0x8a/0x110
[   32.318451]  do_group_exit+0x5e/0xf0
[   32.318919]  __x64_sys_exit_group+0x25/0x30
[   32.319395]  do_syscall_64+0x3b/0x90
[   32.319815]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   32.320383] RIP: 0033:0x7f3499dcecf6
[   32.320791] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   32.321455] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   32.322257] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   32.323052] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   32.323822] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   32.324588] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   32.325351] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   32.326133]  </TASK>
[   32.326385] irq event stamp: 20789
[   32.326789] hardirqs last  enabled at (20799): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   32.327722] hardirqs last disabled at (20806): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   32.328654] softirqs last  enabled at (20550): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   32.329552] softirqs last disabled at (20541): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   32.330443] ---[ end trace 0000000000000000 ]---
[   32.331229] ------------[ cut here ]------------
[   32.331836] WARNING: CPU: 0 PID: 557 at drivers/iommu/iommufd/pages.c:1183 iopt_release_pages+0x159/0x190
[   32.332876] Modules linked in:
[   32.333231] CPU: 0 PID: 557 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   32.334133] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.335372] RIP: 0010:iopt_release_pages+0x159/0x190
[   32.335939] Code: fc f2 fe eb cb e8 27 c1 0f ff be 03 00 00 00 4c 89 f7 e8 ea 19 bd ff eb b7 e8 13 c1 0f ff 0f 0b e9 ed fe ff ff e8 07 c1 0f ff <0f> 0b e9 00 ff ff ff e8 fb c0 0f ff 0f 0b e9 07 ff ff ff e8 ef c0
[   32.337860] RSP: 0018:ffffc9000108bc88 EFLAGS: 00010246
[   32.338427] RAX: 0000000000000000 RBX: ffff88800b2fda00 RCX: ffffffff821e4d87
[   32.339263] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   32.340029] RBP: ffffc9000108bca8 R08: 000000000000001c R09: 0000000000000001
[   32.340794] R10: ffff88800faf0d98 R11: 0000000000000000 R12: ffffffffffffffff
[   32.341544] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   32.342274] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.343141] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.343767] CR2: 00007f3499ed8500 CR3: 0000000003e3a005 CR4: 0000000000770ef0
[   32.344529] PKRU: 55555554
[   32.344826] Call Trace:
[   32.345101]  <TASK>
[   32.345355]  iopt_unmap_iova_range+0x1ef/0x2e0
[   32.345888]  iopt_unmap_all+0x2f/0x60
[   32.346314]  iommufd_ioas_destroy+0x2c/0x70
[   32.346811]  iommufd_fops_release+0xd4/0x170
[   32.347297]  ? __pfx_iommufd_fops_release+0x10/0x10
[   32.347851]  __fput+0x11f/0x450
[   32.348248]  ____fput+0x1e/0x30
[   32.348618]  task_work_run+0xb6/0x120
[   32.348939]  do_exit+0x547/0x1360
[   32.349207]  ? __this_cpu_preempt_check+0x20/0x30
[   32.349610]  ? lockdep_hardirqs_on+0x8a/0x110
[   32.349941]  do_group_exit+0x5e/0xf0
[   32.350215]  __x64_sys_exit_group+0x25/0x30
[   32.350528]  do_syscall_64+0x3b/0x90
[   32.350850]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   32.351267] RIP: 0033:0x7f3499dcecf6
[   32.351552] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   32.352032] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   32.352607] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   32.353156] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   32.353688] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   32.354209] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   32.354759] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   32.355415]  </TASK>
[   32.355676] irq event stamp: 21323
[   32.355970] hardirqs last  enabled at (21331): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   32.356637] hardirqs last disabled at (21338): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   32.357304] softirqs last  enabled at (21034): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   32.357927] softirqs last disabled at (20981): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   32.358551] ---[ end trace 0000000000000000 ]---
[   32.496661] ------------[ cut here ]------------
[   32.497035] WARNING: CPU: 0 PID: 561 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   32.497784] Modules linked in:
[   32.498019] CPU: 0 PID: 561 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   32.498682] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.499509] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   32.499921] Code: d2 0f ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 fc d3 0f ff 45 85 e4 0f 85 eb 01 00 00 e8 0e d2 0f ff <0f> 0b e8 07 d2 0f ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   32.501514] RSP: 0018:ffffc900010abaf0 EFLAGS: 00010246
[   32.501915] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff821e3f85
[   32.502586] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   32.503170] RBP: ffffc900010abd18 R08: 000000000003ca25 R09: 0000000000000002
[   32.503665] R10: 000000000003ca00 R11: 0000000000000024 R12: 0000000000000012
[   32.504187] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   32.504830] FS:  00007f3499ce1740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.505417] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.505842] CR2: 0000000020000243 CR3: 00000000179dc005 CR4: 0000000000770ef0
[   32.506527] PKRU: 55555554
[   32.506746] Call Trace:
[   32.506941]  <TASK>
[   32.507117]  ? __this_cpu_preempt_check+0x20/0x30
[   32.507515]  ? __this_cpu_preempt_check+0x20/0x30
[   32.507865]  ? lock_is_held_type+0xe6/0x140
[   32.508199]  ? rcu_read_lock_sched_held+0x57/0x80
[   32.508560]  ? __mutex_lock+0x13a/0xf80
[   32.508851]  ? write_comp_data+0x2f/0x90
[   32.509144]  ? write_comp_data+0x2f/0x90
[   32.509468]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.509844]  iopt_area_unfill_domain+0x32/0x40
[   32.510182]  iopt_table_remove_domain+0x23f/0x4c0
[   32.510555]  iommufd_device_selftest_detach+0x3a/0x90
[   32.511105]  iommufd_selftest_destroy+0x55/0x70
[   32.511476]  iommufd_object_destroy_user+0xce/0x130
[   32.511835]  iommufd_destroy+0xa2/0xc0
[   32.512115]  iommufd_fops_ioctl+0x206/0x330
[   32.512424]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.512786]  ? write_comp_data+0x2f/0x90
[   32.513084]  __x64_sys_ioctl+0x10e/0x160
[   32.513542]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   32.513908]  do_syscall_64+0x3b/0x90
[   32.514176]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   32.514547] RIP: 0033:0x7f3499e0659d
[   32.514841] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   32.516131] RSP: 002b:00007ffd7bbdb808 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   32.516662] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3499e0659d
[   32.517195] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   32.517814] RBP: 00007ffd7bbdb820 R08: 00007ffd7bbdb820 R09: 00007ffd7bbdb820
[   32.518345] R10: 00007ffd7bbdb820 R11: 0000000000000213 R12: 0000000000401180
[   32.518874] R13: 00007ffd7bbdb940 R14: 0000000000000000 R15: 0000000000000000
[   32.519562]  </TASK>
[   32.519733] irq event stamp: 18737
[   32.519977] hardirqs last  enabled at (18745): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   32.520596] hardirqs last disabled at (18752): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   32.521206] softirqs last  enabled at (18726): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   32.521807] softirqs last disabled at (18715): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   32.522408] ---[ end trace 0000000000000000 ]---
[   32.522990] ------------[ cut here ]------------
[   32.523354] WARNING: CPU: 0 PID: 561 at drivers/iommu/iommufd/pages.c:1292 __iopt_area_unfill_domain+0x54f/0x560
[   32.524065] Modules linked in:
[   32.524288] CPU: 0 PID: 561 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   32.524902] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.525838] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   32.526252] Code: e8 16 d0 0f ff 85 db 0f 85 35 fb ff ff e8 29 ce 0f ff 0f 0b e9 29 fb ff ff e8 1d ce 0f ff 0f 0b e9 69 fe ff ff e8 11 ce 0f ff <0f> 0b e9 58 ff ff ff e8 b5 cb e1 00 0f 1f 44 00 00 90 90 90 90 90
[   32.527731] RSP: 0018:ffffc900010abaf0 EFLAGS: 00010246
[   32.528108] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff821e40d6
[   32.528602] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   32.529115] RBP: ffffc900010abd18 R08: 000000000003ca25 R09: 0000000000000002
[   32.529623] R10: 000000000003ca00 R11: 0000000000000024 R12: 00000000000007ff
[   32.530134] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   32.530651] FS:  00007f3499ce1740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.531242] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.531638] CR2: 0000000020000243 CR3: 00000000179dc005 CR4: 0000000000770ef0
[   32.532318] PKRU: 55555554
[   32.532523] Call Trace:
[   32.532709]  <TASK>
[   32.532873]  ? __this_cpu_preempt_check+0x20/0x30
[   32.533274]  ? __this_cpu_preempt_check+0x20/0x30
[   32.533655]  ? lock_is_held_type+0xe6/0x140
[   32.534087]  ? rcu_read_lock_sched_held+0x57/0x80
[   32.534466]  ? __mutex_lock+0x13a/0xf80
[   32.534774]  ? write_comp_data+0x2f/0x90
[   32.535071]  ? write_comp_data+0x2f/0x90
[   32.535388]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.535740]  iopt_area_unfill_domain+0x32/0x40
[   32.536071]  iopt_table_remove_domain+0x23f/0x4c0
[   32.536438]  iommufd_device_selftest_detach+0x3a/0x90
[   32.536800]  iommufd_selftest_destroy+0x55/0x70
[   32.537137]  iommufd_object_destroy_user+0xce/0x130
[   32.537540]  iommufd_destroy+0xa2/0xc0
[   32.537934]  iommufd_fops_ioctl+0x206/0x330
[   32.538257]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.538647]  ? write_comp_data+0x2f/0x90
[   32.538956]  __x64_sys_ioctl+0x10e/0x160
[   32.539272]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   32.539637]  do_syscall_64+0x3b/0x90
[   32.539913]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   32.540277] RIP: 0033:0x7f3499e0659d
[   32.540541] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   32.542049] RSP: 002b:00007ffd7bbdb808 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   32.542592] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3499e0659d
[   32.543280] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   32.543778] RBP: 00007ffd7bbdb820 R08: 00007ffd7bbdb820 R09: 00007ffd7bbdb820
[   32.544288] R10: 00007ffd7bbdb820 R11: 0000000000000213 R12: 0000000000401180
[   32.544791] R13: 00007ffd7bbdb940 R14: 0000000000000000 R15: 0000000000000000
[   32.545325]  </TASK>
[   32.545504] irq event stamp: 19319
[   32.545749] hardirqs last  enabled at (19327): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   32.546528] hardirqs last disabled at (19348): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   32.547194] softirqs last  enabled at (19346): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   32.547803] softirqs last disabled at (19335): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   32.548404] ---[ end trace 0000000000000000 ]---
[   32.552292] ------------[ cut here ]------------
[   32.552632] WARNING: CPU: 0 PID: 561 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.22+0x151/0x1a0
[   32.553488] Modules linked in:
[   32.553722] CPU: 0 PID: 561 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   32.554347] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.555250] RIP: 0010:batch_unpin.isra.22+0x151/0x1a0
[   32.555744] Code: e8 e4 f1 0f ff 48 8b 45 d0 48 85 c0 75 17 e8 c6 ef 0f ff 48 8b 7d c8 48 89 de e8 da f0 0f ff 48 39 5d c8 73 07 e8 af ef 0f ff <0f> 0b e8 a8 ef 0f ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   32.557079] RSP: 0018:ffffc900010ab9d8 EFLAGS: 00010246
[   32.557634] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff821e1fbc
[   32.558167] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   32.558707] RBP: ffffc900010aba20 R08: 0000000000000000 R09: ffff88807dc3c910
[   32.559297] R10: 0000000000000d38 R11: 0000000000000000 R12: 0000000000000001
[   32.559902] R13: 0000000000000001 R14: 0000000000000000 R15: ffff88800b2fda00
[   32.560440] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.561017] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.561629] CR2: 00007f3499ed8500 CR3: 000000000b1b6001 CR4: 0000000000770ef0
[   32.562143] PKRU: 55555554
[   32.562355] Call Trace:
[   32.562568]  <TASK>
[   32.562765]  iopt_pages_unfill_xarray+0x3c6/0x5e0
[   32.563251]  ? write_comp_data+0x2f/0x90
[   32.563653]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.564020]  ? write_comp_data+0x2f/0x90
[   32.564324]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.564705]  ? interval_tree_remove+0x291/0x4e0
[   32.565055]  ? write_comp_data+0x2f/0x90
[   32.565362]  iopt_area_remove_access+0x108/0x120
[   32.565882]  iommufd_access_unpin_pages+0x177/0x210
[   32.566261]  iommufd_test_access_unmap+0xe0/0x130
[   32.566636]  ? __pfx_iommufd_test_staccess_release+0x10/0x10
[   32.567078]  iommufd_test_staccess_release+0x39/0x60
[   32.567522]  __fput+0x11f/0x450
[   32.567882]  ____fput+0x1e/0x30
[   32.568141]  task_work_run+0xb6/0x120
[   32.568439]  do_exit+0x547/0x1360
[   32.568693]  ? __this_cpu_preempt_check+0x20/0x30
[   32.569078]  ? lockdep_hardirqs_on+0x8a/0x110
[   32.569554]  do_group_exit+0x5e/0xf0
[   32.569841]  __x64_sys_exit_group+0x25/0x30
[   32.570177]  do_syscall_64+0x3b/0x90
[   32.570457]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   32.570860] RIP: 0033:0x7f3499dcecf6
[   32.571156] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   32.571757] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   32.572329] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   32.572844] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   32.573559] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   32.574091] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   32.574658] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   32.575203]  </TASK>
[   32.575516] irq event stamp: 20815
[   32.575777] hardirqs last  enabled at (20823): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   32.576405] hardirqs last disabled at (20830): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   32.577082] softirqs last  enabled at (20812): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   32.577832] softirqs last disabled at (20847): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   32.578436] ---[ end trace 0000000000000000 ]---
[   32.578913] ------------[ cut here ]------------
[   32.579445] WARNING: CPU: 0 PID: 561 at drivers/iommu/iommufd/pages.c:888 update_unpinned+0x75/0x80
[   32.580132] Modules linked in:
[   32.580364] CPU: 0 PID: 561 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   32.581002] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.581967] RIP: 0010:update_unpinned+0x75/0x80
[   32.582336] Code: de 0f ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 ab de 0f ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 9b de 0f ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 90 90 90 90 90 90 90 90 90 90 90
[   32.583848] RSP: 0018:ffffc900010aba08 EFLAGS: 00010246
[   32.584258] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff821e30af
[   32.584781] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   32.585309] RBP: ffffc900010aba20 R08: 0000000000000000 R09: ffff88807dc3c910
[   32.585973] R10: 0000000000000d38 R11: 0000000000000000 R12: ffffffffffffffff
[   32.586515] R13: ffff88800b2fda00 R14: 0000000000000002 R15: 0000000000000002
[   32.587036] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.587795] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.588216] CR2: 00007f3499ed8500 CR3: 000000000b1b6001 CR4: 0000000000770ef0
[   32.588733] PKRU: 55555554
[   32.588940] Call Trace:
[   32.589127]  <TASK>
[   32.589298]  iopt_pages_unfill_xarray+0x549/0x5e0
[   32.589849]  ? write_comp_data+0x2f/0x90
[   32.590164]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.590531]  ? write_comp_data+0x2f/0x90
[   32.590856]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.591222]  ? interval_tree_remove+0x291/0x4e0
[   32.591573]  ? write_comp_data+0x2f/0x90
[   32.591881]  iopt_area_remove_access+0x108/0x120
[   32.592258]  iommufd_access_unpin_pages+0x177/0x210
[   32.592645]  iommufd_test_access_unmap+0xe0/0x130
[   32.593012]  ? __pfx_iommufd_test_staccess_release+0x10/0x10
[   32.593436]  iommufd_test_staccess_release+0x39/0x60
[   32.593820]  __fput+0x11f/0x450
[   32.594078]  ____fput+0x1e/0x30
[   32.594328]  task_work_run+0xb6/0x120
[   32.594632]  do_exit+0x547/0x1360
[   32.594889]  ? __this_cpu_preempt_check+0x20/0x30
[   32.595246]  ? lockdep_hardirqs_on+0x8a/0x110
[   32.595580]  do_group_exit+0x5e/0xf0
[   32.595854]  __x64_sys_exit_group+0x25/0x30
[   32.596167]  do_syscall_64+0x3b/0x90
[   32.596446]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   32.596823] RIP: 0033:0x7f3499dcecf6
[   32.597091] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   32.597536] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   32.598089] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   32.598600] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   32.599150] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   32.599648] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   32.600159] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   32.600674]  </TASK>
[   32.600846] irq event stamp: 21397
[   32.601099] hardirqs last  enabled at (21405): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   32.601729] hardirqs last disabled at (21412): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   32.602365] softirqs last  enabled at (21142): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   32.602988] softirqs last disabled at (21131): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   32.603581] ---[ end trace 0000000000000000 ]---
[   32.604442] ------------[ cut here ]------------
[   32.604780] WARNING: CPU: 0 PID: 561 at drivers/iommu/iommufd/pages.c:1183 iopt_release_pages+0x159/0x190
[   32.605464] Modules linked in:
[   32.605706] CPU: 0 PID: 561 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   32.606321] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.607165] RIP: 0010:iopt_release_pages+0x159/0x190
[   32.607546] Code: fc f2 fe eb cb e8 27 c1 0f ff be 03 00 00 00 4c 89 f7 e8 ea 19 bd ff eb b7 e8 13 c1 0f ff 0f 0b e9 ed fe ff ff e8 07 c1 0f ff <0f> 0b e9 00 ff ff ff e8 fb c0 0f ff 0f 0b e9 07 ff ff ff e8 ef c0
[   32.608855] RSP: 0018:ffffc900010abc88 EFLAGS: 00010246
[   32.609236] RAX: 0000000000000000 RBX: ffff88800b2fda00 RCX: ffffffff821e4d87
[   32.609755] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   32.610273] RBP: ffffc900010abca8 R08: 000000000000001c R09: 0000000000000001
[   32.610838] R10: ffff88800faf0d98 R11: 0000000000000000 R12: ffffffffffffffff
[   32.611348] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   32.611855] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.612431] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.612849] CR2: 00007f3499ed8500 CR3: 000000000b1b6001 CR4: 0000000000770ef0
[   32.613356] PKRU: 55555554
[   32.613564] Call Trace:
[   32.613750]  <TASK>
[   32.613920]  iopt_unmap_iova_range+0x1ef/0x2e0
[   32.614265]  iopt_unmap_all+0x2f/0x60
[   32.614548]  iommufd_ioas_destroy+0x2c/0x70
[   32.614883]  iommufd_fops_release+0xd4/0x170
[   32.615216]  ? __pfx_iommufd_fops_release+0x10/0x10
[   32.615585]  __fput+0x11f/0x450
[   32.615861]  ____fput+0x1e/0x30
[   32.616114]  task_work_run+0xb6/0x120
[   32.616406]  do_exit+0x547/0x1360
[   32.616668]  ? __this_cpu_preempt_check+0x20/0x30
[   32.617032]  ? lockdep_hardirqs_on+0x8a/0x110
[   32.617385]  do_group_exit+0x5e/0xf0
[   32.617676]  __x64_sys_exit_group+0x25/0x30
[   32.617987]  do_syscall_64+0x3b/0x90
[   32.618265]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   32.618667] RIP: 0033:0x7f3499dcecf6
[   32.618938] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   32.619373] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   32.619907] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   32.620412] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   32.620927] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   32.621436] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   32.621942] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   32.622456]  </TASK>
[   32.622643] irq event stamp: 21895
[   32.622899] hardirqs last  enabled at (21903): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   32.623511] hardirqs last disabled at (21910): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   32.624114] softirqs last  enabled at (21624): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   32.624733] softirqs last disabled at (21605): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   32.625324] ---[ end trace 0000000000000000 ]---
[   32.906702] ------------[ cut here ]------------
[   32.907092] WARNING: CPU: 0 PID: 569 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   32.907822] Modules linked in:
[   32.908099] CPU: 0 PID: 569 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   32.908726] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.909533] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   32.909988] Code: d2 0f ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 fc d3 0f ff 45 85 e4 0f 85 eb 01 00 00 e8 0e d2 0f ff <0f> 0b e8 07 d2 0f ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   32.911350] RSP: 0018:ffffc900010e3af0 EFLAGS: 00010246
[   32.911744] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff821e3f85
[   32.912263] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   32.912781] RBP: ffffc900010e3d18 R08: 000000000003ca25 R09: 0000000000000007
[   32.913290] R10: 000000000003ca00 R11: 0000000000000024 R12: 000000000000000e
[   32.913805] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   32.914763] FS:  00007f3499ce1740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.915429] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.915993] CR2: 0000000020000243 CR3: 00000000179d8004 CR4: 0000000000770ef0
[   32.916511] PKRU: 55555554
[   32.916720] Call Trace:
[   32.916908]  <TASK>
[   32.917072]  ? __this_cpu_preempt_check+0x20/0x30
[   32.917463]  ? __this_cpu_preempt_check+0x20/0x30
[   32.917866]  ? lock_is_held_type+0xe6/0x140
[   32.918205]  ? rcu_read_lock_sched_held+0x57/0x80
[   32.918669]  ? __mutex_lock+0x13a/0xf80
[   32.918973]  ? write_comp_data+0x2f/0x90
[   32.919279]  ? write_comp_data+0x2f/0x90
[   32.919587]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.919963]  iopt_area_unfill_domain+0x32/0x40
[   32.920316]  iopt_table_remove_domain+0x23f/0x4c0
[   32.920675]  iommufd_device_selftest_detach+0x3a/0x90
[   32.921070]  iommufd_selftest_destroy+0x55/0x70
[   32.921441]  iommufd_object_destroy_user+0xce/0x130
[   32.921829]  iommufd_destroy+0xa2/0xc0
[   32.922136]  iommufd_fops_ioctl+0x206/0x330
[   32.922462]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.922853]  ? write_comp_data+0x2f/0x90
[   32.923197]  __x64_sys_ioctl+0x10e/0x160
[   32.923648]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   32.924022]  do_syscall_64+0x3b/0x90
[   32.924303]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   32.924681] RIP: 0033:0x7f3499e0659d
[   32.924963] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   32.926290] RSP: 002b:00007ffd7bbdb808 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   32.926905] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3499e0659d
[   32.927414] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   32.927919] RBP: 00007ffd7bbdb820 R08: 00007ffd7bbdb820 R09: 00007ffd7bbdb820
[   32.928429] R10: 00007ffd7bbdb820 R11: 0000000000000213 R12: 0000000000401180
[   32.928941] R13: 00007ffd7bbdb940 R14: 0000000000000000 R15: 0000000000000000
[   32.929463]  </TASK>
[   32.929641] irq event stamp: 18651
[   32.929892] hardirqs last  enabled at (18659): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   32.930510] hardirqs last disabled at (18666): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   32.931152] softirqs last  enabled at (18600): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   32.931851] softirqs last disabled at (18589): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   32.932450] ---[ end trace 0000000000000000 ]---
[   32.932882] ------------[ cut here ]------------
[   32.933220] WARNING: CPU: 0 PID: 569 at drivers/iommu/iommufd/pages.c:1292 __iopt_area_unfill_domain+0x54f/0x560
[   32.933951] Modules linked in:
[   32.934185] CPU: 0 PID: 569 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   32.934848] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.935662] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   32.936079] Code: e8 16 d0 0f ff 85 db 0f 85 35 fb ff ff e8 29 ce 0f ff 0f 0b e9 29 fb ff ff e8 1d ce 0f ff 0f 0b e9 69 fe ff ff e8 11 ce 0f ff <0f> 0b e9 58 ff ff ff e8 b5 cb e1 00 0f 1f 44 00 00 90 90 90 90 90
[   32.937378] RSP: 0018:ffffc900010e3af0 EFLAGS: 00010246
[   32.937765] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff821e40d6
[   32.938279] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   32.938820] RBP: ffffc900010e3d18 R08: 000000000003ca25 R09: 0000000000000007
[   32.939341] R10: 000000000003ca00 R11: 0000000000000024 R12: 00000000000007ff
[   32.939853] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   32.940365] FS:  00007f3499ce1740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.940936] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.941355] CR2: 0000000020000243 CR3: 00000000179d8004 CR4: 0000000000770ef0
[   32.941882] PKRU: 55555554
[   32.942094] Call Trace:
[   32.942285]  <TASK>
[   32.942456]  ? __this_cpu_preempt_check+0x20/0x30
[   32.942864]  ? __this_cpu_preempt_check+0x20/0x30
[   32.943233]  ? lock_is_held_type+0xe6/0x140
[   32.943562]  ? rcu_read_lock_sched_held+0x57/0x80
[   32.943922]  ? __mutex_lock+0x13a/0xf80
[   32.944222]  ? write_comp_data+0x2f/0x90
[   32.944534]  ? write_comp_data+0x2f/0x90
[   32.944844]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.945211]  iopt_area_unfill_domain+0x32/0x40
[   32.945569]  iopt_table_remove_domain+0x23f/0x4c0
[   32.945936]  iommufd_device_selftest_detach+0x3a/0x90
[   32.946332]  iommufd_selftest_destroy+0x55/0x70
[   32.946705]  iommufd_object_destroy_user+0xce/0x130
[   32.947077]  iommufd_destroy+0xa2/0xc0
[   32.947368]  iommufd_fops_ioctl+0x206/0x330
[   32.947693]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.948056]  ? write_comp_data+0x2f/0x90
[   32.948388]  __x64_sys_ioctl+0x10e/0x160
[   32.948698]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   32.949062]  do_syscall_64+0x3b/0x90
[   32.949346]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   32.949740] RIP: 0033:0x7f3499e0659d
[   32.950014] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   32.951341] RSP: 002b:00007ffd7bbdb808 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   32.951888] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3499e0659d
[   32.952394] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   32.952906] RBP: 00007ffd7bbdb820 R08: 00007ffd7bbdb820 R09: 00007ffd7bbdb820
[   32.953411] R10: 00007ffd7bbdb820 R11: 0000000000000213 R12: 0000000000401180
[   32.953932] R13: 00007ffd7bbdb940 R14: 0000000000000000 R15: 0000000000000000
[   32.954467]  </TASK>
[   32.954672] irq event stamp: 19135
[   32.954925] hardirqs last  enabled at (19143): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   32.955547] hardirqs last disabled at (19150): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   32.956168] softirqs last  enabled at (18750): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   32.956780] softirqs last disabled at (18739): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   32.957383] ---[ end trace 0000000000000000 ]---
[   32.961459] ------------[ cut here ]------------
[   32.961820] WARNING: CPU: 0 PID: 569 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.22+0x151/0x1a0
[   32.962521] Modules linked in:
[   32.962866] CPU: 0 PID: 569 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   32.963712] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.964525] RIP: 0010:batch_unpin.isra.22+0x151/0x1a0
[   32.965036] Code: e8 e4 f1 0f ff 48 8b 45 d0 48 85 c0 75 17 e8 c6 ef 0f ff 48 8b 7d c8 48 89 de e8 da f0 0f ff 48 39 5d c8 73 07 e8 af ef 0f ff <0f> 0b e8 a8 ef 0f ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   32.966324] RSP: 0018:ffffc900010e39d8 EFLAGS: 00010246
[   32.966883] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff821e1fbc
[   32.967401] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   32.967910] RBP: ffffc900010e3a20 R08: 0000000000000000 R09: ffff88807dc3c910
[   32.968419] R10: 0000000000000db9 R11: 0000000000000000 R12: 0000000000000001
[   32.968929] R13: 0000000000000001 R14: 0000000000000000 R15: ffff88800b2fda00
[   32.969445] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.970162] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.970591] CR2: 00007f3499ed8500 CR3: 0000000003e3a001 CR4: 0000000000770ef0
[   32.971126] PKRU: 55555554
[   32.971336] Call Trace:
[   32.971521]  <TASK>
[   32.971696]  iopt_pages_unfill_xarray+0x3c6/0x5e0
[   32.972089]  ? write_comp_data+0x2f/0x90
[   32.972398]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.972769]  ? write_comp_data+0x2f/0x90
[   32.973083]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.973449]  ? interval_tree_remove+0x291/0x4e0
[   32.973964]  ? write_comp_data+0x2f/0x90
[   32.974281]  iopt_area_remove_access+0x108/0x120
[   32.974662]  iommufd_access_unpin_pages+0x177/0x210
[   32.975052]  iommufd_test_access_unmap+0xe0/0x130
[   32.975419]  ? __pfx_iommufd_test_staccess_release+0x10/0x10
[   32.975854]  iommufd_test_staccess_release+0x39/0x60
[   32.976231]  __fput+0x11f/0x450
[   32.976493]  ____fput+0x1e/0x30
[   32.976916]  task_work_run+0xb6/0x120
[   32.977209]  do_exit+0x547/0x1360
[   32.977470]  ? __this_cpu_preempt_check+0x20/0x30
[   32.977842]  ? lockdep_hardirqs_on+0x8a/0x110
[   32.978189]  do_group_exit+0x5e/0xf0
[   32.978473]  __x64_sys_exit_group+0x25/0x30
[   32.978814]  do_syscall_64+0x3b/0x90
[   32.979097]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   32.979492] RIP: 0033:0x7f3499dcecf6
[   32.979904] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   32.980359] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   32.980899] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   32.981421] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   32.981964] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   32.982490] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   32.983024] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   32.983559]  </TASK>
[   32.983752] irq event stamp: 20545
[   32.984142] hardirqs last  enabled at (20567): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   32.984783] hardirqs last disabled at (20574): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   32.985423] softirqs last  enabled at (20564): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   32.986259] softirqs last disabled at (20591): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   32.986881] ---[ end trace 0000000000000000 ]---
[   32.987335] ------------[ cut here ]------------
[   32.987682] WARNING: CPU: 0 PID: 569 at drivers/iommu/iommufd/pages.c:888 update_unpinned+0x75/0x80
[   32.988362] Modules linked in:
[   32.988597] CPU: 0 PID: 569 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   32.989362] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   32.990180] RIP: 0010:update_unpinned+0x75/0x80
[   32.990525] Code: de 0f ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 ab de 0f ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 9b de 0f ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 90 90 90 90 90 90 90 90 90 90 90
[   32.991996] RSP: 0018:ffffc900010e3a08 EFLAGS: 00010246
[   32.992398] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff821e30af
[   32.992902] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   32.993410] RBP: ffffc900010e3a20 R08: 0000000000000000 R09: ffff88807dc3c910
[   32.993984] R10: 0000000000000db9 R11: 0000000000000000 R12: ffffffffffffffff
[   32.994568] R13: ffff88800b2fda00 R14: 0000000000000002 R15: 0000000000000002
[   32.995117] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   32.995700] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   32.996273] CR2: 00007f3499ed8500 CR3: 0000000003e3a001 CR4: 0000000000770ef0
[   32.996801] PKRU: 55555554
[   32.997011] Call Trace:
[   32.997205]  <TASK>
[   32.997441]  iopt_pages_unfill_xarray+0x549/0x5e0
[   32.997918]  ? write_comp_data+0x2f/0x90
[   32.998224]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.998571]  ? write_comp_data+0x2f/0x90
[   32.999041]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   32.999417]  ? interval_tree_remove+0x291/0x4e0
[   32.999756]  ? write_comp_data+0x2f/0x90
[   33.000066]  iopt_area_remove_access+0x108/0x120
[   33.000427]  iommufd_access_unpin_pages+0x177/0x210
[   33.000807]  iommufd_test_access_unmap+0xe0/0x130
[   33.001342]  ? __pfx_iommufd_test_staccess_release+0x10/0x10
[   33.001779]  iommufd_test_staccess_release+0x39/0x60
[   33.002163]  __fput+0x11f/0x450
[   33.002448]  ____fput+0x1e/0x30
[   33.002819]  task_work_run+0xb6/0x120
[   33.003118]  do_exit+0x547/0x1360
[   33.003376]  ? __this_cpu_preempt_check+0x20/0x30
[   33.003753]  ? lockdep_hardirqs_on+0x8a/0x110
[   33.004090]  do_group_exit+0x5e/0xf0
[   33.004366]  __x64_sys_exit_group+0x25/0x30
[   33.004728]  do_syscall_64+0x3b/0x90
[   33.005087]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   33.005482] RIP: 0033:0x7f3499dcecf6
[   33.005757] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   33.006341] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   33.006935] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   33.007457] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   33.007964] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   33.008680] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   33.009199] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   33.009893]  </TASK>
[   33.010073] irq event stamp: 21225
[   33.010337] hardirqs last  enabled at (21233): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   33.011166] hardirqs last disabled at (21256): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   33.011800] softirqs last  enabled at (21254): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   33.012410] softirqs last disabled at (21243): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   33.013167] ---[ end trace 0000000000000000 ]---
[   33.013663] ------------[ cut here ]------------
[   33.014022] WARNING: CPU: 0 PID: 569 at drivers/iommu/iommufd/pages.c:1183 iopt_release_pages+0x159/0x190
[   33.014872] Modules linked in:
[   33.015112] CPU: 0 PID: 569 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   33.015734] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.016743] RIP: 0010:iopt_release_pages+0x159/0x190
[   33.017129] Code: fc f2 fe eb cb e8 27 c1 0f ff be 03 00 00 00 4c 89 f7 e8 ea 19 bd ff eb b7 e8 13 c1 0f ff 0f 0b e9 ed fe ff ff e8 07 c1 0f ff <0f> 0b e9 00 ff ff ff e8 fb c0 0f ff 0f 0b e9 07 ff ff ff e8 ef c0
[   33.018688] RSP: 0018:ffffc900010e3c88 EFLAGS: 00010246
[   33.019077] RAX: 0000000000000000 RBX: ffff88800b2fda00 RCX: ffffffff821e4d87
[   33.019588] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   33.020095] RBP: ffffc900010e3ca8 R08: 000000000000001c R09: 0000000000000001
[   33.020602] R10: ffff88800faf0d98 R11: 0000000000000000 R12: ffffffffffffffff
[   33.021111] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   33.021624] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   33.022184] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.022595] CR2: 00007f3499ed8500 CR3: 0000000003e3a001 CR4: 0000000000770ef0
[   33.023141] PKRU: 55555554
[   33.023351] Call Trace:
[   33.023541]  <TASK>
[   33.023717]  iopt_unmap_iova_range+0x1ef/0x2e0
[   33.024067]  iopt_unmap_all+0x2f/0x60
[   33.024351]  iommufd_ioas_destroy+0x2c/0x70
[   33.024676]  iommufd_fops_release+0xd4/0x170
[   33.025002]  ? __pfx_iommufd_fops_release+0x10/0x10
[   33.025368]  __fput+0x11f/0x450
[   33.025635]  ____fput+0x1e/0x30
[   33.025887]  task_work_run+0xb6/0x120
[   33.026178]  do_exit+0x547/0x1360
[   33.026460]  ? __this_cpu_preempt_check+0x20/0x30
[   33.026850]  ? lockdep_hardirqs_on+0x8a/0x110
[   33.027187]  do_group_exit+0x5e/0xf0
[   33.027462]  __x64_sys_exit_group+0x25/0x30
[   33.027774]  do_syscall_64+0x3b/0x90
[   33.028052]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   33.028429] RIP: 0033:0x7f3499dcecf6
[   33.028699] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   33.029139] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   33.029690] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   33.030202] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   33.030733] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   33.031242] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   33.031748] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   33.032273]  </TASK>
[   33.032447] irq event stamp: 21755
[   33.032700] hardirqs last  enabled at (21763): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   33.033326] hardirqs last disabled at (21770): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   33.033987] softirqs last  enabled at (21446): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   33.034605] softirqs last disabled at (21431): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   33.035231] ---[ end trace 0000000000000000 ]---
[   33.074590] ------------[ cut here ]------------
[   33.075084] WARNING: CPU: 0 PID: 570 at mm/page-writeback.c:2706 __folio_mark_dirty+0x40c/0x5b0
[   33.075704] Modules linked in:
[   33.075935] CPU: 0 PID: 570 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   33.076536] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.077321] RIP: 0010:__folio_mark_dirty+0x40c/0x5b0
[   33.077707] Code: 0f 94 c7 31 ff 44 89 fe e8 01 08 e3 ff 45 84 ff 0f 84 c6 fc ff ff e8 93 06 e3 ff 0f 1f 44 00 00 e9 b7 fc ff ff e8 84 06 e3 ff <0f> 0b e9 6c fc ff ff 48 c7 45 c0 00 10 00 00 41 bf 01 00 00 00 c7
[   33.078990] RSP: 0018:ffffc900010e3988 EFLAGS: 00010046
[   33.079361] RAX: 0000000000000000 RBX: ffffea000010a940 RCX: ffffffff814b0571
[   33.079843] RDX: 0000000000000000 RSI: ffff88800faf2980 RDI: 0000000000000002
[   33.080319] RBP: ffffc900010e39d0 R08: 000000002ddb3b58 R09: 00000000c950d964
[   33.080812] R10: ffffc900010e3830 R11: ffff88800faf3718 R12: ffff8880074d9280
[   33.081305] R13: ffff8880074d9288 R14: 0000000000000246 R15: 0000000000000000
[   33.081814] FS:  00007f3499ce1740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   33.082390] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.082803] CR2: 00007f087df7a008 CR3: 0000000017a64001 CR4: 0000000000770ef0
[   33.083304] PKRU: 55555554
[   33.083507] Call Trace:
[   33.083694]  <TASK>
[   33.083858]  ? write_comp_data+0x2f/0x90
[   33.084168]  block_dirty_folio+0xeb/0x110
[   33.084479]  folio_mark_dirty+0x61/0xc0
[   33.084770]  unpin_user_page_range_dirty_lock+0x256/0x2b0
[   33.085168]  batch_unpin.isra.22+0xfa/0x1a0
[   33.085510]  __iopt_area_unfill_domain+0x257/0x560
[   33.085861]  ? __this_cpu_preempt_check+0x20/0x30
[   33.086235]  ? __this_cpu_preempt_check+0x20/0x30
[   33.086588]  ? lock_is_held_type+0xe6/0x140
[   33.086912]  ? rcu_read_lock_sched_held+0x57/0x80
[   33.087274]  ? __mutex_lock+0x13a/0xf80
[   33.087568]  ? write_comp_data+0x2f/0x90
[   33.087866]  ? write_comp_data+0x2f/0x90
[   33.088177]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.088537]  iopt_area_unfill_domain+0x32/0x40
[   33.088869]  iopt_table_remove_domain+0x23f/0x4c0
[   33.089220]  iommufd_device_selftest_detach+0x3a/0x90
[   33.089596]  iommufd_selftest_destroy+0x55/0x70
[   33.089937]  iommufd_object_destroy_user+0xce/0x130
[   33.090303]  iommufd_destroy+0xa2/0xc0
[   33.090598]  iommufd_fops_ioctl+0x206/0x330
[   33.090914]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.091267]  ? write_comp_data+0x2f/0x90
[   33.091569]  __x64_sys_ioctl+0x10e/0x160
[   33.091862]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   33.092213]  do_syscall_64+0x3b/0x90
[   33.092481]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   33.092850] RIP: 0033:0x7f3499e0659d
[   33.093111] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   33.094389] RSP: 002b:00007ffd7bbdb808 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   33.094917] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3499e0659d
[   33.095429] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   33.095929] RBP: 00007ffd7bbdb820 R08: 00007ffd7bbdb820 R09: 00007ffd7bbdb820
[   33.096430] R10: 00007ffd7bbdb820 R11: 0000000000000213 R12: 0000000000401180
[   33.096928] R13: 00007ffd7bbdb940 R14: 0000000000000000 R15: 0000000000000000
[   33.097441]  </TASK>
[   33.097623] irq event stamp: 18798
[   33.097866] hardirqs last  enabled at (18797): [<ffffffff815f3ba3>] folio_memcg_lock+0xa3/0x1a0
[   33.098487] hardirqs last disabled at (18798): [<ffffffff83022b5a>] _raw_spin_lock_irqsave+0x6a/0x70
[   33.099128] softirqs last  enabled at (18694): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   33.099716] softirqs last disabled at (18687): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   33.100297] ---[ end trace 0000000000000000 ]---
[   33.100737] ------------[ cut here ]------------
[   33.101071] WARNING: CPU: 0 PID: 570 at fs/ext4/inode.c:3713 ext4_dirty_folio+0x93/0xa0
[   33.101668] Modules linked in:
[   33.101894] CPU: 0 PID: 570 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   33.102517] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.103316] RIP: 0010:ext4_dirty_folio+0x93/0xa0
[   33.103658] Code: ef e8 c1 a5 ee ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 a1 16 b1 ff 0f 0b e8 9a 16 b1 ff 49 83 7c 24 28 00 75 d1 e8 8d 16 b1 ff <0f> 0b eb c8 66 0f 1f 84 00 00 00 00 00 90 90 90 90 90 90 90 90 90
[   33.104921] RSP: 0018:ffffc900010e39f8 EFLAGS: 00010246
[   33.105294] RAX: 0000000000000000 RBX: 0000000000000001 RCX: ffffffff817cf89e
[   33.105807] RDX: 0000000000000000 RSI: ffff88800faf2980 RDI: 0000000000000002
[   33.106330] RBP: ffffc900010e3a10 R08: 000000000003ca25 R09: 0000000000000002
[   33.106849] R10: 000000000003ca00 R11: 0000000000000024 R12: ffffea000010a980
[   33.107363] R13: ffff88800a712ad8 R14: 00000000000003f6 R15: 0000000000000001
[   33.107859] FS:  00007f3499ce1740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   33.108422] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.108831] CR2: 00007f087df7a008 CR3: 0000000017a64001 CR4: 0000000000770ef0
[   33.109332] PKRU: 55555554
[   33.109571] Call Trace:
[   33.109754]  <TASK>
[   33.109925]  folio_mark_dirty+0x61/0xc0
[   33.110211]  unpin_user_page_range_dirty_lock+0x256/0x2b0
[   33.110642]  batch_unpin.isra.22+0xfa/0x1a0
[   33.110965]  __iopt_area_unfill_domain+0x257/0x560
[   33.111321]  ? __this_cpu_preempt_check+0x20/0x30
[   33.111690]  ? __this_cpu_preempt_check+0x20/0x30
[   33.112042]  ? lock_is_held_type+0xe6/0x140
[   33.112355]  ? rcu_read_lock_sched_held+0x57/0x80
[   33.112715]  ? __mutex_lock+0x13a/0xf80
[   33.113010]  ? write_comp_data+0x2f/0x90
[   33.113307]  ? write_comp_data+0x2f/0x90
[   33.113611]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.113985]  iopt_area_unfill_domain+0x32/0x40
[   33.114327]  iopt_table_remove_domain+0x23f/0x4c0
[   33.114705]  iommufd_device_selftest_detach+0x3a/0x90
[   33.115082]  iommufd_selftest_destroy+0x55/0x70
[   33.115421]  iommufd_object_destroy_user+0xce/0x130
[   33.115779]  iommufd_destroy+0xa2/0xc0
[   33.116061]  iommufd_fops_ioctl+0x206/0x330
[   33.116375]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.116728]  ? write_comp_data+0x2f/0x90
[   33.117031]  __x64_sys_ioctl+0x10e/0x160
[   33.117327]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   33.117691]  do_syscall_64+0x3b/0x90
[   33.117973]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   33.118358] RIP: 0033:0x7f3499e0659d
[   33.118647] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   33.119932] RSP: 002b:00007ffd7bbdb808 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   33.120472] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3499e0659d
[   33.120974] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   33.121464] RBP: 00007ffd7bbdb820 R08: 00007ffd7bbdb820 R09: 00007ffd7bbdb820
[   33.121962] R10: 00007ffd7bbdb820 R11: 0000000000000213 R12: 0000000000401180
[   33.122472] R13: 00007ffd7bbdb940 R14: 0000000000000000 R15: 0000000000000000
[   33.123057]  </TASK>
[   33.123226] irq event stamp: 19265
[   33.123473] hardirqs last  enabled at (19273): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   33.124073] hardirqs last disabled at (19280): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   33.124684] softirqs last  enabled at (18808): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   33.125271] softirqs last disabled at (18801): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   33.125863] ---[ end trace 0000000000000000 ]---
[   33.142259] ------------[ cut here ]------------
[   33.142639] WARNING: CPU: 0 PID: 570 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.22+0x151/0x1a0
[   33.143377] Modules linked in:
[   33.143624] CPU: 0 PID: 570 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   33.144272] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.145116] RIP: 0010:batch_unpin.isra.22+0x151/0x1a0
[   33.145537] Code: e8 e4 f1 0f ff 48 8b 45 d0 48 85 c0 75 17 e8 c6 ef 0f ff 48 8b 7d c8 48 89 de e8 da f0 0f ff 48 39 5d c8 73 07 e8 af ef 0f ff <0f> 0b e8 a8 ef 0f ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   33.146909] RSP: 0018:ffffc900010e3a98 EFLAGS: 00010246
[   33.147316] RAX: 0000000000000000 RBX: fffffffffffffe04 RCX: ffffffff821e1fbc
[   33.147850] RDX: 0000000000000000 RSI: ffff88800faf2980 RDI: 0000000000000002
[   33.148387] RBP: ffffc900010e3ae0 R08: 000000000003ca25 R09: 0000000000000002
[   33.148917] R10: 000000000003ca00 R11: 0000000000000024 R12: 00000000000003f6
[   33.149453] R13: 00000000000003f6 R14: 0000000000001000 R15: ffff88800ab16800
[   33.149978] FS:  00007f3499ce1740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   33.150573] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.151031] CR2: 00007f087df7a008 CR3: 0000000017a64001 CR4: 0000000000770ef0
[   33.151566] PKRU: 55555554
[   33.151828] Call Trace:
[   33.152022]  <TASK>
[   33.152200]  __iopt_area_unfill_domain+0x257/0x560
[   33.152582]  ? __this_cpu_preempt_check+0x20/0x30
[   33.152971]  ? __this_cpu_preempt_check+0x20/0x30
[   33.153337]  ? lock_is_held_type+0xe6/0x140
[   33.153688]  ? rcu_read_lock_sched_held+0x57/0x80
[   33.154066]  ? __mutex_lock+0x13a/0xf80
[   33.154375]  ? write_comp_data+0x2f/0x90
[   33.154723]  ? write_comp_data+0x2f/0x90
[   33.155049]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.155423]  iopt_area_unfill_domain+0x32/0x40
[   33.155782]  iopt_table_remove_domain+0x23f/0x4c0
[   33.156158]  iommufd_device_selftest_detach+0x3a/0x90
[   33.156545]  iommufd_selftest_destroy+0x55/0x70
[   33.156910]  iommufd_object_destroy_user+0xce/0x130
[   33.157297]  iommufd_destroy+0xa2/0xc0
[   33.157600]  iommufd_fops_ioctl+0x206/0x330
[   33.157936]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.158314]  ? write_comp_data+0x2f/0x90
[   33.158662]  __x64_sys_ioctl+0x10e/0x160
[   33.158986]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   33.159359]  do_syscall_64+0x3b/0x90
[   33.159644]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   33.160041] RIP: 0033:0x7f3499e0659d
[   33.160320] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   33.161675] RSP: 002b:00007ffd7bbdb808 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   33.162214] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3499e0659d
[   33.162766] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   33.163299] RBP: 00007ffd7bbdb820 R08: 00007ffd7bbdb820 R09: 00007ffd7bbdb820
[   33.163817] R10: 00007ffd7bbdb820 R11: 0000000000000213 R12: 0000000000401180
[   33.164314] R13: 00007ffd7bbdb940 R14: 0000000000000000 R15: 0000000000000000
[   33.164844]  </TASK>
[   33.165021] irq event stamp: 20885
[   33.165285] hardirqs last  enabled at (20893): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   33.165943] hardirqs last disabled at (20900): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   33.166588] softirqs last  enabled at (20770): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   33.167258] softirqs last disabled at (20765): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   33.167890] ---[ end trace 0000000000000000 ]---
[   33.168328] ------------[ cut here ]------------
[   33.168683] WARNING: CPU: 0 PID: 570 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   33.169950] Modules linked in:
[   33.170203] CPU: 0 PID: 570 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   33.170951] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.171941] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   33.172396] Code: d2 0f ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 fc d3 0f ff 45 85 e4 0f 85 eb 01 00 00 e8 0e d2 0f ff <0f> 0b e8 07 d2 0f ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   33.173978] RSP: 0018:ffffc900010e3af0 EFLAGS: 00010246
[   33.174385] RAX: 0000000000000000 RBX: 00000000fffffe03 RCX: ffffffff821e3f85
[   33.175150] RDX: 0000000000000000 RSI: ffff88800faf2980 RDI: 0000000000000002
[   33.175689] RBP: ffffc900010e3d18 R08: 000000000003ca25 R09: 0000000000000002
[   33.176215] R10: 000000000003ca00 R11: 0000000000000024 R12: 0000000000000004
[   33.176761] R13: 00000000000009fd R14: 00000000000007ff R15: 0000000000000800
[   33.177307] FS:  00007f3499ce1740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   33.178090] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.178520] CR2: 00007f087df7a008 CR3: 0000000017a64001 CR4: 0000000000770ef0
[   33.179060] PKRU: 55555554
[   33.179272] Call Trace:
[   33.179463]  <TASK>
[   33.179630]  ? __this_cpu_preempt_check+0x20/0x30
[   33.180212]  ? __this_cpu_preempt_check+0x20/0x30
[   33.180582]  ? lock_is_held_type+0xe6/0x140
[   33.180912]  ? rcu_read_lock_sched_held+0x57/0x80
[   33.181279]  ? __mutex_lock+0x13a/0xf80
[   33.181586]  ? write_comp_data+0x2f/0x90
[   33.181892]  ? write_comp_data+0x2f/0x90
[   33.182366]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.182773]  iopt_area_unfill_domain+0x32/0x40
[   33.183129]  iopt_table_remove_domain+0x23f/0x4c0
[   33.183492]  iommufd_device_selftest_detach+0x3a/0x90
[   33.183876]  iommufd_selftest_destroy+0x55/0x70
[   33.184391]  iommufd_object_destroy_user+0xce/0x130
[   33.184769]  iommufd_destroy+0xa2/0xc0
[   33.185063]  iommufd_fops_ioctl+0x206/0x330
[   33.185503]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.185930]  ? write_comp_data+0x2f/0x90
[   33.186235]  __x64_sys_ioctl+0x10e/0x160
[   33.186537]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   33.187092]  do_syscall_64+0x3b/0x90
[   33.187386]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   33.187844] RIP: 0033:0x7f3499e0659d
[   33.188115] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   33.189450] RSP: 002b:00007ffd7bbdb808 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   33.190106] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3499e0659d
[   33.190673] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   33.191297] RBP: 00007ffd7bbdb820 R08: 00007ffd7bbdb820 R09: 00007ffd7bbdb820
[   33.191818] R10: 00007ffd7bbdb820 R11: 0000000000000213 R12: 0000000000401180
[   33.192419] R13: 00007ffd7bbdb940 R14: 0000000000000000 R15: 0000000000000000
[   33.193017]  </TASK>
[   33.193187] irq event stamp: 21539
[   33.193436] hardirqs last  enabled at (21547): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   33.194204] hardirqs last disabled at (21568): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   33.194876] softirqs last  enabled at (21566): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   33.195578] softirqs last disabled at (21587): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   33.196176] ---[ end trace 0000000000000000 ]---
[   33.196619] ------------[ cut here ]------------
[   33.196990] WARNING: CPU: 0 PID: 570 at drivers/iommu/iommufd/pages.c:1292 __iopt_area_unfill_domain+0x54f/0x560
[   33.197878] Modules linked in:
[   33.198119] CPU: 0 PID: 570 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   33.198910] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.199705] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   33.200236] Code: e8 16 d0 0f ff 85 db 0f 85 35 fb ff ff e8 29 ce 0f ff 0f 0b e9 29 fb ff ff e8 1d ce 0f ff 0f 0b e9 69 fe ff ff e8 11 ce 0f ff <0f> 0b e9 58 ff ff ff e8 b5 cb e1 00 0f 1f 44 00 00 90 90 90 90 90
[   33.201628] RSP: 0018:ffffc900010e3af0 EFLAGS: 00010246
[   33.202013] RAX: 0000000000000000 RBX: 00000000fffffe03 RCX: ffffffff821e40d6
[   33.202524] RDX: 0000000000000000 RSI: ffff88800faf2980 RDI: 0000000000000002
[   33.203053] RBP: ffffc900010e3d18 R08: 000000000003ca25 R09: 0000000000000002
[   33.203561] R10: 000000000003ca00 R11: 0000000000000024 R12: 00000000000007ff
[   33.204073] R13: 00000000000009fd R14: 00000000000007ff R15: 0000000000000800
[   33.204601] FS:  00007f3499ce1740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   33.205179] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.205608] CR2: 00007f087df7a008 CR3: 0000000017a64001 CR4: 0000000000770ef0
[   33.206123] PKRU: 55555554
[   33.206337] Call Trace:
[   33.206527]  <TASK>
[   33.206713]  ? __this_cpu_preempt_check+0x20/0x30
[   33.207107]  ? __this_cpu_preempt_check+0x20/0x30
[   33.207476]  ? lock_is_held_type+0xe6/0x140
[   33.207825]  ? rcu_read_lock_sched_held+0x57/0x80
[   33.208183]  ? __mutex_lock+0x13a/0xf80
[   33.208486]  ? write_comp_data+0x2f/0x90
[   33.208790]  ? write_comp_data+0x2f/0x90
[   33.209097]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.209461]  iopt_area_unfill_domain+0x32/0x40
[   33.209812]  iopt_table_remove_domain+0x23f/0x4c0
[   33.210180]  iommufd_device_selftest_detach+0x3a/0x90
[   33.210556]  iommufd_selftest_destroy+0x55/0x70
[   33.210930]  iommufd_object_destroy_user+0xce/0x130
[   33.211306]  iommufd_destroy+0xa2/0xc0
[   33.211602]  iommufd_fops_ioctl+0x206/0x330
[   33.211923]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.212295]  ? write_comp_data+0x2f/0x90
[   33.212607]  __x64_sys_ioctl+0x10e/0x160
[   33.212908]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   33.213263]  do_syscall_64+0x3b/0x90
[   33.213556]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   33.213937] RIP: 0033:0x7f3499e0659d
[   33.214208] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   33.215490] RSP: 002b:00007ffd7bbdb808 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   33.216012] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3499e0659d
[   33.216506] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   33.217015] RBP: 00007ffd7bbdb820 R08: 00007ffd7bbdb820 R09: 00007ffd7bbdb820
[   33.217517] R10: 00007ffd7bbdb820 R11: 0000000000000213 R12: 0000000000401180
[   33.218026] R13: 00007ffd7bbdb940 R14: 0000000000000000 R15: 0000000000000000
[   33.218549]  </TASK>
[   33.218739] irq event stamp: 22089
[   33.218989] hardirqs last  enabled at (22097): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   33.219594] hardirqs last disabled at (22104): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   33.220194] softirqs last  enabled at (22086): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   33.220782] softirqs last disabled at (22081): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   33.221366] ---[ end trace 0000000000000000 ]---
[   33.221810] ------------[ cut here ]------------
[   33.222151] WARNING: CPU: 0 PID: 570 at drivers/iommu/iommufd/pages.c:888 update_unpinned+0x75/0x80
[   33.222819] Modules linked in:
[   33.223049] CPU: 0 PID: 570 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   33.223654] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.224448] RIP: 0010:update_unpinned+0x75/0x80
[   33.224783] Code: de 0f ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 ab de 0f ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 9b de 0f ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 90 90 90 90 90 90 90 90 90 90 90
[   33.226055] RSP: 0018:ffffc900010e3ac8 EFLAGS: 00010246
[   33.226432] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff821e30af
[   33.226960] RDX: 0000000000000000 RSI: ffff88800faf2980 RDI: 0000000000000002
[   33.227456] RBP: ffffc900010e3ae0 R08: 0000000000000000 R09: ffff88807dc3c9a0
[   33.227948] R10: 00000000000008c7 R11: 0000000000000009 R12: fffffffffffffe04
[   33.228438] R13: ffff88800ab16800 R14: 00000000000007ff R15: 0000000000000800
[   33.228927] FS:  00007f3499ce1740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   33.229487] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.229891] CR2: 00007f087df7a008 CR3: 0000000017a64001 CR4: 0000000000770ef0
[   33.230392] PKRU: 55555554
[   33.230599] Call Trace:
[   33.230802]  <TASK>
[   33.230964]  __iopt_area_unfill_domain+0x4e1/0x560
[   33.231324]  ? __this_cpu_preempt_check+0x20/0x30
[   33.231753]  ? __this_cpu_preempt_check+0x20/0x30
[   33.232115]  ? lock_is_held_type+0xe6/0x140
[   33.232438]  ? rcu_read_lock_sched_held+0x57/0x80
[   33.232790]  ? __mutex_lock+0x13a/0xf80
[   33.233077]  ? write_comp_data+0x2f/0x90
[   33.233377]  ? write_comp_data+0x2f/0x90
[   33.233685]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.234041]  iopt_area_unfill_domain+0x32/0x40
[   33.234376]  iopt_table_remove_domain+0x23f/0x4c0
[   33.234756]  iommufd_device_selftest_detach+0x3a/0x90
[   33.235150]  iommufd_selftest_destroy+0x55/0x70
[   33.235491]  iommufd_object_destroy_user+0xce/0x130
[   33.235846]  iommufd_destroy+0xa2/0xc0
[   33.236129]  iommufd_fops_ioctl+0x206/0x330
[   33.236441]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.236791]  ? write_comp_data+0x2f/0x90
[   33.237091]  __x64_sys_ioctl+0x10e/0x160
[   33.237383]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   33.237745]  do_syscall_64+0x3b/0x90
[   33.238023]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   33.238388] RIP: 0033:0x7f3499e0659d
[   33.238676] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   33.239952] RSP: 002b:00007ffd7bbdb808 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   33.240478] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3499e0659d
[   33.240970] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   33.241470] RBP: 00007ffd7bbdb820 R08: 00007ffd7bbdb820 R09: 00007ffd7bbdb820
[   33.241997] R10: 00007ffd7bbdb820 R11: 0000000000000213 R12: 0000000000401180
[   33.242498] R13: 00007ffd7bbdb940 R14: 0000000000000000 R15: 0000000000000000
[   33.243029]  </TASK>
[   33.243199] irq event stamp: 22569
[   33.243443] hardirqs last  enabled at (22577): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   33.244074] hardirqs last disabled at (22584): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   33.244698] softirqs last  enabled at (22086): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   33.245299] softirqs last disabled at (22081): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   33.245894] ---[ end trace 0000000000000000 ]---
[   33.250326] ------------[ cut here ]------------
[   33.250764] WARNING: CPU: 1 PID: 570 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.22+0x151/0x1a0
[   33.251597] Modules linked in:
[   33.251827] CPU: 1 PID: 570 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   33.252520] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.253421] RIP: 0010:batch_unpin.isra.22+0x151/0x1a0
[   33.253822] Code: e8 e4 f1 0f ff 48 8b 45 d0 48 85 c0 75 17 e8 c6 ef 0f ff 48 8b 7d c8 48 89 de e8 da f0 0f ff 48 39 5d c8 73 07 e8 af ef 0f ff <0f> 0b e8 a8 ef 0f ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   33.255283] RSP: 0018:ffffc900010e39d8 EFLAGS: 00010246
[   33.255651] RAX: 0000000000000000 RBX: fffffffffffffe03 RCX: ffffffff821e1fd6
[   33.256167] RDX: 0000000000000000 RSI: ffff88800faf2980 RDI: 0000000000000002
[   33.256720] RBP: ffffc900010e3a20 R08: 0000000000000000 R09: ffff88807dd3c910
[   33.257221] R10: 0000000000000bd8 R11: 0000000000000000 R12: 0000000000000001
[   33.257785] R13: 0000000000000001 R14: 0000000000000000 R15: ffff88800ab16800
[   33.258276] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   33.258903] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.259304] CR2: 00007f0870009088 CR3: 000000000e02c006 CR4: 0000000000770ee0
[   33.259900] PKRU: 55555554
[   33.260096] Call Trace:
[   33.260274]  <TASK>
[   33.260443]  iopt_pages_unfill_xarray+0x3c6/0x5e0
[   33.260921]  ? write_comp_data+0x2f/0x90
[   33.261222]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.261588]  ? write_comp_data+0x2f/0x90
[   33.261888]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.262245]  ? interval_tree_remove+0x291/0x4e0
[   33.262595]  ? write_comp_data+0x2f/0x90
[   33.262912]  iopt_area_remove_access+0x108/0x120
[   33.263259]  iommufd_access_unpin_pages+0x177/0x210
[   33.263629]  iommufd_test_access_unmap+0xe0/0x130
[   33.264001]  ? __pfx_iommufd_test_staccess_release+0x10/0x10
[   33.264417]  iommufd_test_staccess_release+0x39/0x60
[   33.264781]  __fput+0x11f/0x450
[   33.265032]  ____fput+0x1e/0x30
[   33.265274]  task_work_run+0xb6/0x120
[   33.265571]  do_exit+0x547/0x1360
[   33.265816]  ? __this_cpu_preempt_check+0x20/0x30
[   33.266166]  ? lockdep_hardirqs_on+0x8a/0x110
[   33.266493]  do_group_exit+0x5e/0xf0
[   33.266784]  __x64_sys_exit_group+0x25/0x30
[   33.267086]  do_syscall_64+0x3b/0x90
[   33.267355]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   33.267713] RIP: 0033:0x7f3499dcecf6
[   33.267974] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   33.268394] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   33.268912] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   33.269404] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   33.269911] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   33.270417] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   33.270931] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   33.271441]  </TASK>
[   33.271603] irq event stamp: 23917
[   33.271848] hardirqs last  enabled at (23925): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   33.272468] hardirqs last disabled at (23932): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   33.273073] softirqs last  enabled at (23492): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   33.273676] softirqs last disabled at (23429): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   33.274242] ---[ end trace 0000000000000000 ]---
[   33.274673] ------------[ cut here ]------------
[   33.274998] WARNING: CPU: 1 PID: 570 at drivers/iommu/iommufd/pages.c:888 update_unpinned+0x75/0x80
[   33.275656] Modules linked in:
[   33.275884] CPU: 1 PID: 570 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   33.276493] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.277277] RIP: 0010:update_unpinned+0x75/0x80
[   33.277618] Code: de 0f ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 ab de 0f ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 9b de 0f ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 90 90 90 90 90 90 90 90 90 90 90
[   33.278912] RSP: 0018:ffffc900010e3a08 EFLAGS: 00010246
[   33.279278] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff821e30af
[   33.279761] RDX: 0000000000000000 RSI: ffff88800faf2980 RDI: 0000000000000002
[   33.280244] RBP: ffffc900010e3a20 R08: 0000000000000000 R09: ffff88807dd3c910
[   33.280741] R10: 0000000000000bd8 R11: 0000000000000000 R12: fffffffffffffe03
[   33.281238] R13: ffff88800ab16800 R14: 0000000000000002 R15: 0000000000000002
[   33.281728] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   33.282281] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.282699] CR2: 00007f0870009088 CR3: 000000000e02c006 CR4: 0000000000770ee0
[   33.283186] PKRU: 55555554
[   33.283384] Call Trace:
[   33.283562]  <TASK>
[   33.283723]  iopt_pages_unfill_xarray+0x549/0x5e0
[   33.284098]  ? write_comp_data+0x2f/0x90
[   33.284396]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.284758]  ? write_comp_data+0x2f/0x90
[   33.285049]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   33.285401]  ? interval_tree_remove+0x291/0x4e0
[   33.285743]  ? write_comp_data+0x2f/0x90
[   33.286041]  iopt_area_remove_access+0x108/0x120
[   33.286390]  iommufd_access_unpin_pages+0x177/0x210
[   33.286788]  iommufd_test_access_unmap+0xe0/0x130
[   33.287138]  ? __pfx_iommufd_test_staccess_release+0x10/0x10
[   33.287545]  iommufd_test_staccess_release+0x39/0x60
[   33.287908]  __fput+0x11f/0x450
[   33.288159]  ____fput+0x1e/0x30
[   33.288418]  task_work_run+0xb6/0x120
[   33.288705]  do_exit+0x547/0x1360
[   33.288952]  ? __this_cpu_preempt_check+0x20/0x30
[   33.289311]  ? lockdep_hardirqs_on+0x8a/0x110
[   33.289640]  do_group_exit+0x5e/0xf0
[   33.289907]  __x64_sys_exit_group+0x25/0x30
[   33.290218]  do_syscall_64+0x3b/0x90
[   33.290493]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   33.290871] RIP: 0033:0x7f3499dcecf6
[   33.291128] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   33.291544] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   33.292057] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   33.292543] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   33.293059] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   33.293551] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   33.294056] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   33.294583]  </TASK>
[   33.294773] irq event stamp: 24395
[   33.295019] hardirqs last  enabled at (24403): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   33.295612] hardirqs last disabled at (24410): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   33.296208] softirqs last  enabled at (23492): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   33.296791] softirqs last disabled at (23429): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   33.297360] ---[ end trace 0000000000000000 ]---
[   33.297921] ------------[ cut here ]------------
[   33.298306] WARNING: CPU: 0 PID: 570 at drivers/iommu/iommufd/pages.c:1183 iopt_release_pages+0x159/0x190
[   33.299044] Modules linked in:
[   33.299278] CPU: 0 PID: 570 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   33.299880] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   33.300660] RIP: 0010:iopt_release_pages+0x159/0x190
[   33.301033] Code: fc f2 fe eb cb e8 27 c1 0f ff be 03 00 00 00 4c 89 f7 e8 ea 19 bd ff eb b7 e8 13 c1 0f ff 0f 0b e9 ed fe ff ff e8 07 c1 0f ff <0f> 0b e9 00 ff ff ff e8 fb c0 0f ff 0f 0b e9 07 ff ff ff e8 ef c0
[   33.302312] RSP: 0018:ffffc900010e3c88 EFLAGS: 00010246
[   33.302725] RAX: 0000000000000000 RBX: ffff88800ab16800 RCX: ffffffff821e4d87
[   33.303231] RDX: 0000000000000000 RSI: ffff88800faf2980 RDI: 0000000000000002
[   33.303777] RBP: ffffc900010e3ca8 R08: ffff888007c83240 R09: 0000000080150014
[   33.304541] R10: 0000000000000001 R11: 0000000000000001 R12: fffffffffffffe03
[   33.305315] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   33.306082] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   33.306785] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   33.307191] CR2: 00007f67869a6000 CR3: 000000000c4b2006 CR4: 0000000000770ef0
[   33.307682] PKRU: 55555554
[   33.307884] Call Trace:
[   33.308077]  <TASK>
[   33.308243]  iopt_unmap_iova_range+0x1ef/0x2e0
[   33.308580]  iopt_unmap_all+0x2f/0x60
[   33.308858]  iommufd_ioas_destroy+0x2c/0x70
[   33.309168]  iommufd_fops_release+0xd4/0x170
[   33.309505]  ? __pfx_iommufd_fops_release+0x10/0x10
[   33.309869]  __fput+0x11f/0x450
[   33.310122]  ____fput+0x1e/0x30
[   33.310373]  task_work_run+0xb6/0x120
[   33.310687]  do_exit+0x547/0x1360
[   33.310945]  ? __this_cpu_preempt_check+0x20/0x30
[   33.311304]  ? lockdep_hardirqs_on+0x8a/0x110
[   33.311637]  do_group_exit+0x5e/0xf0
[   33.311914]  __x64_sys_exit_group+0x25/0x30
[   33.312328]  do_syscall_64+0x3b/0x90
[   33.312745]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   33.313288] RIP: 0033:0x7f3499dcecf6
[   33.313704] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   33.314360] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   33.315228] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   33.316002] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   33.316755] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   33.317528] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   33.318290] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   33.319133]  </TASK>
[   33.319397] irq event stamp: 24933
[   33.319767] hardirqs last  enabled at (24941): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   33.320709] hardirqs last disabled at (24948): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   33.321661] softirqs last  enabled at (24574): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   33.322590] softirqs last disabled at (24501): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   33.323549] ---[ end trace 0000000000000000 ]---
[   36.007843] ------------[ cut here ]------------
[   36.008332] WARNING: CPU: 0 PID: 636 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   36.009295] Modules linked in:
[   36.009613] CPU: 0 PID: 636 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   36.010441] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.011530] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   36.012078] Code: d2 0f ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 fc d3 0f ff 45 85 e4 0f 85 eb 01 00 00 e8 0e d2 0f ff <0f> 0b e8 07 d2 0f ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   36.013806] RSP: 0018:ffffc900012e3af0 EFLAGS: 00010246
[   36.014318] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff821e3f85
[   36.015009] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   36.015686] RBP: ffffc900012e3d18 R08: 000000000003ca25 R09: 0000000000000014
[   36.016358] R10: 000000000003ca00 R11: 0000000000000024 R12: 0000000000000001
[   36.017030] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   36.017697] FS:  00007f3499ce1740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   36.018454] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.019017] CR2: 0000000020000243 CR3: 00000000180b2004 CR4: 0000000000770ef0
[   36.019696] PKRU: 55555554
[   36.019965] Call Trace:
[   36.020189]  <TASK>
[   36.020353]  ? __this_cpu_preempt_check+0x20/0x30
[   36.020741]  ? __this_cpu_preempt_check+0x20/0x30
[   36.021107]  ? lock_is_held_type+0xe6/0x140
[   36.021437]  ? rcu_read_lock_sched_held+0x57/0x80
[   36.021800]  ? __mutex_lock+0x13a/0xf80
[   36.022097]  ? write_comp_data+0x2f/0x90
[   36.022402]  ? write_comp_data+0x2f/0x90
[   36.022765]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.023141]  iopt_area_unfill_domain+0x32/0x40
[   36.023479]  iopt_table_remove_domain+0x23f/0x4c0
[   36.023840]  iommufd_device_selftest_detach+0x3a/0x90
[   36.024222]  iommufd_selftest_destroy+0x55/0x70
[   36.024582]  iommufd_object_destroy_user+0xce/0x130
[   36.024947]  iommufd_destroy+0xa2/0xc0
[   36.025242]  iommufd_fops_ioctl+0x206/0x330
[   36.025581]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.025931]  ? write_comp_data+0x2f/0x90
[   36.026237]  __x64_sys_ioctl+0x10e/0x160
[   36.026539]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   36.026919]  do_syscall_64+0x3b/0x90
[   36.027213]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   36.027599] RIP: 0033:0x7f3499e0659d
[   36.027867] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   36.029189] RSP: 002b:00007ffd7bbdb808 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   36.029743] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3499e0659d
[   36.030252] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   36.030803] RBP: 00007ffd7bbdb820 R08: 00007ffd7bbdb820 R09: 00007ffd7bbdb820
[   36.031317] R10: 00007ffd7bbdb820 R11: 0000000000000213 R12: 0000000000401180
[   36.031825] R13: 00007ffd7bbdb940 R14: 0000000000000000 R15: 0000000000000000
[   36.032355]  </TASK>
[   36.032525] irq event stamp: 18461
[   36.032781] hardirqs last  enabled at (18469): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   36.033411] hardirqs last disabled at (18476): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   36.034035] softirqs last  enabled at (17904): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   36.034677] softirqs last disabled at (17899): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   36.035286] ---[ end trace 0000000000000000 ]---
[   36.035730] ------------[ cut here ]------------
[   36.036073] WARNING: CPU: 0 PID: 636 at drivers/iommu/iommufd/pages.c:1292 __iopt_area_unfill_domain+0x54f/0x560
[   36.036819] Modules linked in:
[   36.037055] CPU: 0 PID: 636 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   36.037683] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.038485] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   36.038923] Code: e8 16 d0 0f ff 85 db 0f 85 35 fb ff ff e8 29 ce 0f ff 0f 0b e9 29 fb ff ff e8 1d ce 0f ff 0f 0b e9 69 fe ff ff e8 11 ce 0f ff <0f> 0b e9 58 ff ff ff e8 b5 cb e1 00 0f 1f 44 00 00 90 90 90 90 90
[   36.040256] RSP: 0018:ffffc900012e3af0 EFLAGS: 00010246
[   36.040639] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff821e40d6
[   36.041160] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   36.041684] RBP: ffffc900012e3d18 R08: 000000000003ca25 R09: 0000000000000014
[   36.042187] R10: 000000000003ca00 R11: 0000000000000024 R12: 00000000000007ff
[   36.042724] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   36.043255] FS:  00007f3499ce1740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   36.043843] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.044284] CR2: 0000000020000243 CR3: 00000000180b2004 CR4: 0000000000770ef0
[   36.044794] PKRU: 55555554
[   36.045004] Call Trace:
[   36.045201]  <TASK>
[   36.045367]  ? __this_cpu_preempt_check+0x20/0x30
[   36.045753]  ? __this_cpu_preempt_check+0x20/0x30
[   36.046111]  ? lock_is_held_type+0xe6/0x140
[   36.046435]  ? rcu_read_lock_sched_held+0x57/0x80
[   36.046825]  ? __mutex_lock+0x13a/0xf80
[   36.047136]  ? write_comp_data+0x2f/0x90
[   36.047447]  ? write_comp_data+0x2f/0x90
[   36.047766]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.048141]  iopt_area_unfill_domain+0x32/0x40
[   36.048494]  iopt_table_remove_domain+0x23f/0x4c0
[   36.048873]  iommufd_device_selftest_detach+0x3a/0x90
[   36.049260]  iommufd_selftest_destroy+0x55/0x70
[   36.049613]  iommufd_object_destroy_user+0xce/0x130
[   36.049979]  iommufd_destroy+0xa2/0xc0
[   36.050270]  iommufd_fops_ioctl+0x206/0x330
[   36.050597]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.050984]  ? write_comp_data+0x2f/0x90
[   36.051319]  __x64_sys_ioctl+0x10e/0x160
[   36.051631]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   36.051997]  do_syscall_64+0x3b/0x90
[   36.052285]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   36.052658] RIP: 0033:0x7f3499e0659d
[   36.052927] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   36.054266] RSP: 002b:00007ffd7bbdb808 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   36.054857] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3499e0659d
[   36.055382] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   36.055930] RBP: 00007ffd7bbdb820 R08: 00007ffd7bbdb820 R09: 00007ffd7bbdb820
[   36.056453] R10: 00007ffd7bbdb820 R11: 0000000000000213 R12: 0000000000401180
[   36.056977] R13: 00007ffd7bbdb940 R14: 0000000000000000 R15: 0000000000000000
[   36.057524]  </TASK>
[   36.057691] irq event stamp: 18941
[   36.057942] hardirqs last  enabled at (18949): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   36.058572] hardirqs last disabled at (18956): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   36.059230] softirqs last  enabled at (18890): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   36.059858] softirqs last disabled at (18881): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   36.060467] ---[ end trace 0000000000000000 ]---
[   36.063946] ------------[ cut here ]------------
[   36.064310] WARNING: CPU: 0 PID: 636 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.22+0x151/0x1a0
[   36.065026] Modules linked in:
[   36.065266] CPU: 0 PID: 636 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   36.065890] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.066734] RIP: 0010:batch_unpin.isra.22+0x151/0x1a0
[   36.067134] Code: e8 e4 f1 0f ff 48 8b 45 d0 48 85 c0 75 17 e8 c6 ef 0f ff 48 8b 7d c8 48 89 de e8 da f0 0f ff 48 39 5d c8 73 07 e8 af ef 0f ff <0f> 0b e8 a8 ef 0f ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   36.068458] RSP: 0018:ffffc900012e39d8 EFLAGS: 00010246
[   36.068856] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff821e1fbc
[   36.069371] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   36.069876] RBP: ffffc900012e3a20 R08: 0000000000000000 R09: ffff88807dc3c910
[   36.070383] R10: 0000000000000ee3 R11: 0000000000000000 R12: 0000000000000001
[   36.070915] R13: 0000000000000001 R14: 0000000000000000 R15: ffff88800b2fc200
[   36.071448] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   36.072046] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.072491] CR2: 00007f3499ed8500 CR3: 0000000003e3a002 CR4: 0000000000770ef0
[   36.073008] PKRU: 55555554
[   36.073220] Call Trace:
[   36.073415]  <TASK>
[   36.073596]  iopt_pages_unfill_xarray+0x3c6/0x5e0
[   36.073991]  ? write_comp_data+0x2f/0x90
[   36.074304]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.074706]  ? write_comp_data+0x2f/0x90
[   36.075029]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.075400]  ? interval_tree_remove+0x291/0x4e0
[   36.075761]  ? write_comp_data+0x2f/0x90
[   36.076083]  iopt_area_remove_access+0x108/0x120
[   36.076453]  iommufd_access_unpin_pages+0x177/0x210
[   36.076831]  iommufd_test_access_unmap+0xe0/0x130
[   36.077198]  ? __pfx_iommufd_test_staccess_release+0x10/0x10
[   36.077641]  iommufd_test_staccess_release+0x39/0x60
[   36.078030]  __fput+0x11f/0x450
[   36.078296]  ____fput+0x1e/0x30
[   36.078551]  task_work_run+0xb6/0x120
[   36.078868]  do_exit+0x547/0x1360
[   36.079138]  ? __this_cpu_preempt_check+0x20/0x30
[   36.079507]  ? lockdep_hardirqs_on+0x8a/0x110
[   36.079852]  do_group_exit+0x5e/0xf0
[   36.080137]  __x64_sys_exit_group+0x25/0x30
[   36.080457]  do_syscall_64+0x3b/0x90
[   36.080740]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   36.081130] RIP: 0033:0x7f3499dcecf6
[   36.081409] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   36.081853] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   36.082402] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   36.082949] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   36.083478] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   36.083996] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   36.084519] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   36.085066]  </TASK>
[   36.085250] irq event stamp: 20193
[   36.085521] hardirqs last  enabled at (20201): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   36.086137] hardirqs last disabled at (20208): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   36.086789] softirqs last  enabled at (19446): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   36.087416] softirqs last disabled at (19441): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   36.088029] ---[ end trace 0000000000000000 ]---
[   36.088460] ------------[ cut here ]------------
[   36.088804] WARNING: CPU: 0 PID: 636 at drivers/iommu/iommufd/pages.c:888 update_unpinned+0x75/0x80
[   36.089471] Modules linked in:
[   36.089710] CPU: 0 PID: 636 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   36.090325] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.091162] RIP: 0010:update_unpinned+0x75/0x80
[   36.091510] Code: de 0f ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 ab de 0f ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 9b de 0f ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 90 90 90 90 90 90 90 90 90 90 90
[   36.092842] RSP: 0018:ffffc900012e3a08 EFLAGS: 00010246
[   36.093238] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff821e30af
[   36.093760] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   36.094283] RBP: ffffc900012e3a20 R08: 0000000000000000 R09: ffff88807dc3c910
[   36.094822] R10: 0000000000000ee3 R11: 0000000000000000 R12: ffffffffffffffff
[   36.095343] R13: ffff88800b2fc200 R14: 0000000000000002 R15: 0000000000000002
[   36.095868] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   36.096464] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.096890] CR2: 00007f3499ed8500 CR3: 0000000003e3a002 CR4: 0000000000770ef0
[   36.097393] PKRU: 55555554
[   36.097606] Call Trace:
[   36.097801]  <TASK>
[   36.097973]  iopt_pages_unfill_xarray+0x549/0x5e0
[   36.098423]  ? write_comp_data+0x2f/0x90
[   36.098748]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.099106]  ? write_comp_data+0x2f/0x90
[   36.099410]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.099761]  ? interval_tree_remove+0x291/0x4e0
[   36.100102]  ? write_comp_data+0x2f/0x90
[   36.100422]  iopt_area_remove_access+0x108/0x120
[   36.100787]  iommufd_access_unpin_pages+0x177/0x210
[   36.101165]  iommufd_test_access_unmap+0xe0/0x130
[   36.101548]  ? __pfx_iommufd_test_staccess_release+0x10/0x10
[   36.101966]  iommufd_test_staccess_release+0x39/0x60
[   36.102340]  __fput+0x11f/0x450
[   36.102598]  ____fput+0x1e/0x30
[   36.102869]  task_work_run+0xb6/0x120
[   36.103160]  do_exit+0x547/0x1360
[   36.103426]  ? __this_cpu_preempt_check+0x20/0x30
[   36.103782]  ? lockdep_hardirqs_on+0x8a/0x110
[   36.104138]  do_group_exit+0x5e/0xf0
[   36.104412]  __x64_sys_exit_group+0x25/0x30
[   36.104719]  do_syscall_64+0x3b/0x90
[   36.104991]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   36.105363] RIP: 0033:0x7f3499dcecf6
[   36.105641] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   36.106078] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   36.106695] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   36.107207] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   36.107706] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   36.108204] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   36.108708] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   36.109223]  </TASK>
[   36.109388] irq event stamp: 20683
[   36.109642] hardirqs last  enabled at (20691): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   36.110273] hardirqs last disabled at (20698): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   36.110905] softirqs last  enabled at (20632): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   36.111515] softirqs last disabled at (20621): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   36.112109] ---[ end trace 0000000000000000 ]---
[   36.112599] ------------[ cut here ]------------
[   36.112937] WARNING: CPU: 0 PID: 636 at drivers/iommu/iommufd/pages.c:1183 iopt_release_pages+0x159/0x190
[   36.113626] Modules linked in:
[   36.113852] CPU: 0 PID: 636 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   36.114455] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.115277] RIP: 0010:iopt_release_pages+0x159/0x190
[   36.115647] Code: fc f2 fe eb cb e8 27 c1 0f ff be 03 00 00 00 4c 89 f7 e8 ea 19 bd ff eb b7 e8 13 c1 0f ff 0f 0b e9 ed fe ff ff e8 07 c1 0f ff <0f> 0b e9 00 ff ff ff e8 fb c0 0f ff 0f 0b e9 07 ff ff ff e8 ef c0
[   36.116931] RSP: 0018:ffffc900012e3c88 EFLAGS: 00010246
[   36.117307] RAX: 0000000000000000 RBX: ffff88800b2fc200 RCX: ffffffff821e4d87
[   36.117946] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   36.118453] RBP: ffffc900012e3ca8 R08: 000000000000001c R09: 0000000000000001
[   36.119063] R10: ffff88800faf0d98 R11: 0000000000000000 R12: ffffffffffffffff
[   36.119568] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   36.120067] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   36.120652] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.121072] CR2: 00007f3499ed8500 CR3: 0000000003e3a002 CR4: 0000000000770ef0
[   36.121583] PKRU: 55555554
[   36.121767] Call Trace:
[   36.121953]  <TASK>
[   36.122117]  iopt_unmap_iova_range+0x1ef/0x2e0
[   36.122476]  iopt_unmap_all+0x2f/0x60
[   36.122791]  iommufd_ioas_destroy+0x2c/0x70
[   36.123119]  iommufd_fops_release+0xd4/0x170
[   36.123450]  ? __pfx_iommufd_fops_release+0x10/0x10
[   36.123820]  __fput+0x11f/0x450
[   36.124079]  ____fput+0x1e/0x30
[   36.124326]  task_work_run+0xb6/0x120
[   36.124612]  do_exit+0x547/0x1360
[   36.124869]  ? __this_cpu_preempt_check+0x20/0x30
[   36.125227]  ? lockdep_hardirqs_on+0x8a/0x110
[   36.125567]  do_group_exit+0x5e/0xf0
[   36.125836]  __x64_sys_exit_group+0x25/0x30
[   36.126147]  do_syscall_64+0x3b/0x90
[   36.126428]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   36.126836] RIP: 0033:0x7f3499dcecf6
[   36.127111] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   36.127551] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   36.128087] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   36.128585] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   36.129086] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   36.129601] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   36.130102] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   36.130652]  </TASK>
[   36.130837] irq event stamp: 21277
[   36.131109] hardirqs last  enabled at (21285): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   36.131720] hardirqs last disabled at (21292): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   36.132340] softirqs last  enabled at (21088): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   36.132942] softirqs last disabled at (21083): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   36.133558] ---[ end trace 0000000000000000 ]---
[   36.536712] ------------[ cut here ]------------
[   36.537075] WARNING: CPU: 0 PID: 644 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   36.537826] Modules linked in:
[   36.538091] CPU: 0 PID: 644 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   36.538743] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.539608] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   36.540169] Code: d2 0f ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 fc d3 0f ff 45 85 e4 0f 85 eb 01 00 00 e8 0e d2 0f ff <0f> 0b e8 07 d2 0f ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   36.541953] RSP: 0018:ffffc90001323af0 EFLAGS: 00010246
[   36.542468] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff821e3f85
[   36.543181] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   36.543875] RBP: ffffc90001323d18 R08: 000000000003ca25 R09: 0000000000000004
[   36.544568] R10: 000000000003ca00 R11: 0000000000000024 R12: 0000000000000001
[   36.545252] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   36.545951] FS:  00007f3499ce1740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   36.546748] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.547317] CR2: 0000000020000243 CR3: 00000000180b4003 CR4: 0000000000770ef0
[   36.548011] PKRU: 55555554
[   36.548287] Call Trace:
[   36.548540]  <TASK>
[   36.548761]  ? __this_cpu_preempt_check+0x20/0x30
[   36.549272]  ? __this_cpu_preempt_check+0x20/0x30
[   36.549772]  ? lock_is_held_type+0xe6/0x140
[   36.550202]  ? rcu_read_lock_sched_held+0x57/0x80
[   36.550703]  ? __mutex_lock+0x13a/0xf80
[   36.551107]  ? write_comp_data+0x2f/0x90
[   36.551518]  ? write_comp_data+0x2f/0x90
[   36.551927]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.552416]  iopt_area_unfill_domain+0x32/0x40
[   36.552873]  iopt_table_remove_domain+0x23f/0x4c0
[   36.553352]  iommufd_device_selftest_detach+0x3a/0x90
[   36.553861]  iommufd_selftest_destroy+0x55/0x70
[   36.554327]  iommufd_object_destroy_user+0xce/0x130
[   36.554759]  iommufd_destroy+0xa2/0xc0
[   36.555063]  iommufd_fops_ioctl+0x206/0x330
[   36.555389]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.555755]  ? write_comp_data+0x2f/0x90
[   36.556070]  __x64_sys_ioctl+0x10e/0x160
[   36.556378]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   36.556735]  do_syscall_64+0x3b/0x90
[   36.557015]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   36.557396] RIP: 0033:0x7f3499e0659d
[   36.557671] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   36.559019] RSP: 002b:00007ffd7bbdb808 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   36.559552] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3499e0659d
[   36.560051] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   36.560578] RBP: 00007ffd7bbdb820 R08: 00007ffd7bbdb820 R09: 00007ffd7bbdb820
[   36.561100] R10: 00007ffd7bbdb820 R11: 0000000000000213 R12: 0000000000401180
[   36.561621] R13: 00007ffd7bbdb940 R14: 0000000000000000 R15: 0000000000000000
[   36.562158]  </TASK>
[   36.562343] irq event stamp: 18555
[   36.562599] hardirqs last  enabled at (18563): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   36.563247] hardirqs last disabled at (18572): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   36.563869] softirqs last  enabled at (17998): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   36.564485] softirqs last disabled at (17841): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   36.565098] ---[ end trace 0000000000000000 ]---
[   36.565539] ------------[ cut here ]------------
[   36.565884] WARNING: CPU: 0 PID: 644 at drivers/iommu/iommufd/pages.c:1292 __iopt_area_unfill_domain+0x54f/0x560
[   36.566640] Modules linked in:
[   36.566875] CPU: 0 PID: 644 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   36.567493] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.568287] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   36.568706] Code: e8 16 d0 0f ff 85 db 0f 85 35 fb ff ff e8 29 ce 0f ff 0f 0b e9 29 fb ff ff e8 1d ce 0f ff 0f 0b e9 69 fe ff ff e8 11 ce 0f ff <0f> 0b e9 58 ff ff ff e8 b5 cb e1 00 0f 1f 44 00 00 90 90 90 90 90
[   36.570014] RSP: 0018:ffffc90001323af0 EFLAGS: 00010246
[   36.570398] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff821e40d6
[   36.570933] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   36.571455] RBP: ffffc90001323d18 R08: 000000000003ca25 R09: 0000000000000004
[   36.571978] R10: 000000000003ca00 R11: 0000000000000024 R12: 00000000000007ff
[   36.572494] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   36.573000] FS:  00007f3499ce1740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   36.573580] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.574002] CR2: 0000000020000243 CR3: 00000000180b4003 CR4: 0000000000770ef0
[   36.574537] PKRU: 55555554
[   36.574776] Call Trace:
[   36.574967]  <TASK>
[   36.575136]  ? __this_cpu_preempt_check+0x20/0x30
[   36.575548]  ? __this_cpu_preempt_check+0x20/0x30
[   36.575938]  ? lock_is_held_type+0xe6/0x140
[   36.576266]  ? rcu_read_lock_sched_held+0x57/0x80
[   36.576627]  ? __mutex_lock+0x13a/0xf80
[   36.576927]  ? write_comp_data+0x2f/0x90
[   36.577238]  ? write_comp_data+0x2f/0x90
[   36.577553]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.577925]  iopt_area_unfill_domain+0x32/0x40
[   36.578278]  iopt_table_remove_domain+0x23f/0x4c0
[   36.578673]  iommufd_device_selftest_detach+0x3a/0x90
[   36.579061]  iommufd_selftest_destroy+0x55/0x70
[   36.579413]  iommufd_object_destroy_user+0xce/0x130
[   36.579784]  iommufd_destroy+0xa2/0xc0
[   36.580078]  iommufd_fops_ioctl+0x206/0x330
[   36.580400]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.580761]  ? write_comp_data+0x2f/0x90
[   36.581071]  __x64_sys_ioctl+0x10e/0x160
[   36.581375]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   36.581740]  do_syscall_64+0x3b/0x90
[   36.582025]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   36.582411] RIP: 0033:0x7f3499e0659d
[   36.582703] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   36.584027] RSP: 002b:00007ffd7bbdb808 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   36.584603] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3499e0659d
[   36.585127] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   36.585651] RBP: 00007ffd7bbdb820 R08: 00007ffd7bbdb820 R09: 00007ffd7bbdb820
[   36.586175] R10: 00007ffd7bbdb820 R11: 0000000000000213 R12: 0000000000401180
[   36.586718] R13: 00007ffd7bbdb940 R14: 0000000000000000 R15: 0000000000000000
[   36.587251]  </TASK>
[   36.587422] irq event stamp: 19043
[   36.587682] hardirqs last  enabled at (19051): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   36.588314] hardirqs last disabled at (19058): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   36.588944] softirqs last  enabled at (18772): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   36.589565] softirqs last disabled at (18763): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   36.590163] ---[ end trace 0000000000000000 ]---
[   36.593712] ------------[ cut here ]------------
[   36.594079] WARNING: CPU: 0 PID: 644 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.22+0x151/0x1a0
[   36.594855] Modules linked in:
[   36.595095] CPU: 0 PID: 644 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   36.595734] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.596550] RIP: 0010:batch_unpin.isra.22+0x151/0x1a0
[   36.596934] Code: e8 e4 f1 0f ff 48 8b 45 d0 48 85 c0 75 17 e8 c6 ef 0f ff 48 8b 7d c8 48 89 de e8 da f0 0f ff 48 39 5d c8 73 07 e8 af ef 0f ff <0f> 0b e8 a8 ef 0f ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   36.598238] RSP: 0018:ffffc900013239d8 EFLAGS: 00010246
[   36.598651] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff821e1fbc
[   36.599169] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   36.599675] RBP: ffffc90001323a20 R08: 0000000000000000 R09: ffff88807dc3c910
[   36.600181] R10: 0000000000000f6d R11: 0000000000000000 R12: 0000000000000001
[   36.600692] R13: 0000000000000001 R14: 0000000000000000 R15: ffff88800b2fc200
[   36.601221] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   36.601821] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.602242] CR2: 00007f3499ed8500 CR3: 0000000003e3a004 CR4: 0000000000770ef0
[   36.602794] PKRU: 55555554
[   36.603006] Call Trace:
[   36.603192]  <TASK>
[   36.603368]  iopt_pages_unfill_xarray+0x3c6/0x5e0
[   36.603770]  ? write_comp_data+0x2f/0x90
[   36.604115]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.604480]  ? write_comp_data+0x2f/0x90
[   36.604789]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.605156]  ? interval_tree_remove+0x291/0x4e0
[   36.605522]  ? write_comp_data+0x2f/0x90
[   36.605847]  iopt_area_remove_access+0x108/0x120
[   36.606215]  iommufd_access_unpin_pages+0x177/0x210
[   36.606649]  iommufd_test_access_unmap+0xe0/0x130
[   36.607021]  ? __pfx_iommufd_test_staccess_release+0x10/0x10
[   36.607459]  iommufd_test_staccess_release+0x39/0x60
[   36.607840]  __fput+0x11f/0x450
[   36.608100]  ____fput+0x1e/0x30
[   36.608358]  task_work_run+0xb6/0x120
[   36.608647]  do_exit+0x547/0x1360
[   36.608914]  ? __this_cpu_preempt_check+0x20/0x30
[   36.609279]  ? lockdep_hardirqs_on+0x8a/0x110
[   36.609618]  do_group_exit+0x5e/0xf0
[   36.609889]  __x64_sys_exit_group+0x25/0x30
[   36.610210]  do_syscall_64+0x3b/0x90
[   36.610494]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   36.610898] RIP: 0033:0x7f3499dcecf6
[   36.611173] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   36.611621] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   36.612168] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   36.612686] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   36.613203] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   36.613719] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   36.614236] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   36.614793]  </TASK>
[   36.614972] irq event stamp: 20363
[   36.615230] hardirqs last  enabled at (20371): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   36.615861] hardirqs last disabled at (20378): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   36.616496] softirqs last  enabled at (20076): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   36.617114] softirqs last disabled at (20071): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   36.617729] ---[ end trace 0000000000000000 ]---
[   36.618161] ------------[ cut here ]------------
[   36.618501] WARNING: CPU: 0 PID: 644 at drivers/iommu/iommufd/pages.c:888 update_unpinned+0x75/0x80
[   36.619193] Modules linked in:
[   36.619434] CPU: 0 PID: 644 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   36.620075] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.620895] RIP: 0010:update_unpinned+0x75/0x80
[   36.621247] Code: de 0f ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 ab de 0f ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 9b de 0f ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 90 90 90 90 90 90 90 90 90 90 90
[   36.622586] RSP: 0018:ffffc90001323a08 EFLAGS: 00010246
[   36.622998] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff821e30af
[   36.623520] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   36.624040] RBP: ffffc90001323a20 R08: 0000000000000000 R09: ffff88807dc3c910
[   36.624565] R10: 0000000000000f6d R11: 0000000000000000 R12: ffffffffffffffff
[   36.625088] R13: ffff88800b2fc200 R14: 0000000000000002 R15: 0000000000000002
[   36.625614] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   36.626201] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.626643] CR2: 00007f3499ed8500 CR3: 0000000003e3a004 CR4: 0000000000770ef0
[   36.627175] PKRU: 55555554
[   36.627414] Call Trace:
[   36.627625]  <TASK>
[   36.627794]  iopt_pages_unfill_xarray+0x549/0x5e0
[   36.628210]  ? write_comp_data+0x2f/0x90
[   36.628519]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.628885]  ? write_comp_data+0x2f/0x90
[   36.629197]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.629577]  ? interval_tree_remove+0x291/0x4e0
[   36.629928]  ? write_comp_data+0x2f/0x90
[   36.630245]  iopt_area_remove_access+0x108/0x120
[   36.630657]  iommufd_access_unpin_pages+0x177/0x210
[   36.631053]  iommufd_test_access_unmap+0xe0/0x130
[   36.631419]  ? __pfx_iommufd_test_staccess_release+0x10/0x10
[   36.631854]  iommufd_test_staccess_release+0x39/0x60
[   36.632243]  __fput+0x11f/0x450
[   36.632504]  ____fput+0x1e/0x30
[   36.632760]  task_work_run+0xb6/0x120
[   36.633051]  do_exit+0x547/0x1360
[   36.633322]  ? __this_cpu_preempt_check+0x20/0x30
[   36.633692]  ? lockdep_hardirqs_on+0x8a/0x110
[   36.634039]  do_group_exit+0x5e/0xf0
[   36.634321]  __x64_sys_exit_group+0x25/0x30
[   36.634722]  do_syscall_64+0x3b/0x90
[   36.635008]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   36.635388] RIP: 0033:0x7f3499dcecf6
[   36.635662] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   36.636108] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   36.636654] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   36.637169] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   36.637735] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   36.638248] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   36.638782] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   36.639319]  </TASK>
[   36.639494] irq event stamp: 20853
[   36.639751] hardirqs last  enabled at (20861): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   36.640384] hardirqs last disabled at (20868): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   36.641012] softirqs last  enabled at (20754): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   36.641639] softirqs last disabled at (20749): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   36.642244] ---[ end trace 0000000000000000 ]---
[   36.643171] ------------[ cut here ]------------
[   36.643520] WARNING: CPU: 0 PID: 644 at drivers/iommu/iommufd/pages.c:1183 iopt_release_pages+0x159/0x190
[   36.644221] Modules linked in:
[   36.644458] CPU: 0 PID: 644 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   36.645086] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.645898] RIP: 0010:iopt_release_pages+0x159/0x190
[   36.646278] Code: fc f2 fe eb cb e8 27 c1 0f ff be 03 00 00 00 4c 89 f7 e8 ea 19 bd ff eb b7 e8 13 c1 0f ff 0f 0b e9 ed fe ff ff e8 07 c1 0f ff <0f> 0b e9 00 ff ff ff e8 fb c0 0f ff 0f 0b e9 07 ff ff ff e8 ef c0
[   36.647678] RSP: 0018:ffffc90001323c88 EFLAGS: 00010246
[   36.648070] RAX: 0000000000000000 RBX: ffff88800b2fc200 RCX: ffffffff821e4d87
[   36.648590] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   36.649116] RBP: ffffc90001323ca8 R08: 000000000000001c R09: 0000000000000001
[   36.649639] R10: ffff88800faf0d98 R11: 0000000000000000 R12: ffffffffffffffff
[   36.650151] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   36.650682] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   36.651266] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.651690] CR2: 00007f3499ed8500 CR3: 0000000003e3a004 CR4: 0000000000770ef0
[   36.652213] PKRU: 55555554
[   36.652426] Call Trace:
[   36.652618]  <TASK>
[   36.652790]  iopt_unmap_iova_range+0x1ef/0x2e0
[   36.653141]  iopt_unmap_all+0x2f/0x60
[   36.653430]  iommufd_ioas_destroy+0x2c/0x70
[   36.653763]  iommufd_fops_release+0xd4/0x170
[   36.654097]  ? __pfx_iommufd_fops_release+0x10/0x10
[   36.654468]  __fput+0x11f/0x450
[   36.654764]  ____fput+0x1e/0x30
[   36.655024]  task_work_run+0xb6/0x120
[   36.655318]  do_exit+0x547/0x1360
[   36.655580]  ? __this_cpu_preempt_check+0x20/0x30
[   36.655952]  ? lockdep_hardirqs_on+0x8a/0x110
[   36.656296]  do_group_exit+0x5e/0xf0
[   36.656580]  __x64_sys_exit_group+0x25/0x30
[   36.656904]  do_syscall_64+0x3b/0x90
[   36.657188]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   36.657579] RIP: 0033:0x7f3499dcecf6
[   36.657853] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   36.658302] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   36.658878] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   36.659400] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   36.659921] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   36.660437] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   36.660953] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   36.661496]  </TASK>
[   36.661681] irq event stamp: 21395
[   36.661940] hardirqs last  enabled at (21403): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   36.662579] hardirqs last disabled at (21410): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   36.663232] softirqs last  enabled at (21086): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   36.663852] softirqs last disabled at (21001): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   36.664472] ---[ end trace 0000000000000000 ]---
[   36.733181] ------------[ cut here ]------------
[   36.733583] WARNING: CPU: 0 PID: 646 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   36.734328] Modules linked in:
[   36.734566] CPU: 0 PID: 646 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   36.735218] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.736037] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   36.736467] Code: d2 0f ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 fc d3 0f ff 45 85 e4 0f 85 eb 01 00 00 e8 0e d2 0f ff <0f> 0b e8 07 d2 0f ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   36.737779] RSP: 0018:ffffc90001333af0 EFLAGS: 00010246
[   36.738166] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff821e3f85
[   36.738719] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   36.739241] RBP: ffffc90001333d18 R08: 000000000003ca25 R09: 0000000000000006
[   36.739761] R10: 000000000003ca00 R11: 0000000000000024 R12: 0000000000000001
[   36.740279] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   36.740792] FS:  00007f3499ce1740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   36.741382] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.741823] CR2: 0000000020000243 CR3: 0000000017a5e006 CR4: 0000000000770ef0
[   36.742341] PKRU: 55555554
[   36.742551] Call Trace:
[   36.742788]  <TASK>
[   36.742959]  ? __this_cpu_preempt_check+0x20/0x30
[   36.743348]  ? __this_cpu_preempt_check+0x20/0x30
[   36.743713]  ? lock_is_held_type+0xe6/0x140
[   36.744047]  ? rcu_read_lock_sched_held+0x57/0x80
[   36.744412]  ? __mutex_lock+0x13a/0xf80
[   36.744713]  ? write_comp_data+0x2f/0x90
[   36.745027]  ? write_comp_data+0x2f/0x90
[   36.745356]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.745732]  iopt_area_unfill_domain+0x32/0x40
[   36.746087]  iopt_table_remove_domain+0x23f/0x4c0
[   36.746458]  iommufd_device_selftest_detach+0x3a/0x90
[   36.746856]  iommufd_selftest_destroy+0x55/0x70
[   36.747216]  iommufd_object_destroy_user+0xce/0x130
[   36.747593]  iommufd_destroy+0xa2/0xc0
[   36.747891]  iommufd_fops_ioctl+0x206/0x330
[   36.748221]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.748589]  ? write_comp_data+0x2f/0x90
[   36.748903]  __x64_sys_ioctl+0x10e/0x160
[   36.749215]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   36.749588]  do_syscall_64+0x3b/0x90
[   36.749873]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   36.750254] RIP: 0033:0x7f3499e0659d
[   36.750536] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   36.751890] RSP: 002b:00007ffd7bbdb808 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   36.752449] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3499e0659d
[   36.752973] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   36.753504] RBP: 00007ffd7bbdb820 R08: 00007ffd7bbdb820 R09: 00007ffd7bbdb820
[   36.754015] R10: 00007ffd7bbdb820 R11: 0000000000000213 R12: 0000000000401180
[   36.754534] R13: 00007ffd7bbdb940 R14: 0000000000000000 R15: 0000000000000000
[   36.755096]  </TASK>
[   36.755274] irq event stamp: 18619
[   36.755534] hardirqs last  enabled at (18627): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   36.756166] hardirqs last disabled at (18634): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   36.756798] softirqs last  enabled at (18552): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   36.757416] softirqs last disabled at (18547): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   36.758032] ---[ end trace 0000000000000000 ]---
[   36.758467] ------------[ cut here ]------------
[   36.758827] WARNING: CPU: 0 PID: 646 at drivers/iommu/iommufd/pages.c:1292 __iopt_area_unfill_domain+0x54f/0x560
[   36.759592] Modules linked in:
[   36.759829] CPU: 0 PID: 646 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   36.760477] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.761313] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   36.761753] Code: e8 16 d0 0f ff 85 db 0f 85 35 fb ff ff e8 29 ce 0f ff 0f 0b e9 29 fb ff ff e8 1d ce 0f ff 0f 0b e9 69 fe ff ff e8 11 ce 0f ff <0f> 0b e9 58 ff ff ff e8 b5 cb e1 00 0f 1f 44 00 00 90 90 90 90 90
[   36.763132] RSP: 0018:ffffc90001333af0 EFLAGS: 00010246
[   36.763532] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff821e40d6
[   36.764070] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   36.764600] RBP: ffffc90001333d18 R08: 000000000003ca25 R09: 0000000000000006
[   36.765134] R10: 000000000003ca00 R11: 0000000000000024 R12: 00000000000007ff
[   36.765676] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   36.766202] FS:  00007f3499ce1740(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   36.766816] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.767250] CR2: 0000000020000243 CR3: 0000000017a5e006 CR4: 0000000000770ef0
[   36.767780] PKRU: 55555554
[   36.767995] Call Trace:
[   36.768216]  <TASK>
[   36.768393]  ? __this_cpu_preempt_check+0x20/0x30
[   36.768790]  ? __this_cpu_preempt_check+0x20/0x30
[   36.769168]  ? lock_is_held_type+0xe6/0x140
[   36.769510]  ? rcu_read_lock_sched_held+0x57/0x80
[   36.769883]  ? __mutex_lock+0x13a/0xf80
[   36.770192]  ? write_comp_data+0x2f/0x90
[   36.770511]  ? write_comp_data+0x2f/0x90
[   36.770853]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.771239]  iopt_area_unfill_domain+0x32/0x40
[   36.771599]  iopt_table_remove_domain+0x23f/0x4c0
[   36.771978]  iommufd_device_selftest_detach+0x3a/0x90
[   36.772373]  iommufd_selftest_destroy+0x55/0x70
[   36.772739]  iommufd_object_destroy_user+0xce/0x130
[   36.773135]  iommufd_destroy+0xa2/0xc0
[   36.773441]  iommufd_fops_ioctl+0x206/0x330
[   36.773782]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.774161]  ? write_comp_data+0x2f/0x90
[   36.774482]  __x64_sys_ioctl+0x10e/0x160
[   36.774821]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   36.775202]  do_syscall_64+0x3b/0x90
[   36.775491]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   36.775894] RIP: 0033:0x7f3499e0659d
[   36.776179] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   36.777543] RSP: 002b:00007ffd7bbdb808 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   36.778133] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3499e0659d
[   36.778701] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   36.779246] RBP: 00007ffd7bbdb820 R08: 00007ffd7bbdb820 R09: 00007ffd7bbdb820
[   36.779783] R10: 00007ffd7bbdb820 R11: 0000000000000213 R12: 0000000000401180
[   36.780315] R13: 00007ffd7bbdb940 R14: 0000000000000000 R15: 0000000000000000
[   36.780859]  </TASK>
[   36.781038] irq event stamp: 19089
[   36.781301] hardirqs last  enabled at (19097): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   36.781947] hardirqs last disabled at (19104): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   36.782594] softirqs last  enabled at (18552): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   36.783282] softirqs last disabled at (19117): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   36.783920] ---[ end trace 0000000000000000 ]---
[   36.787622] ------------[ cut here ]------------
[   36.787997] WARNING: CPU: 0 PID: 646 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.22+0x151/0x1a0
[   36.788715] Modules linked in:
[   36.788963] CPU: 0 PID: 646 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   36.789629] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.790460] RIP: 0010:batch_unpin.isra.22+0x151/0x1a0
[   36.790900] Code: e8 e4 f1 0f ff 48 8b 45 d0 48 85 c0 75 17 e8 c6 ef 0f ff 48 8b 7d c8 48 89 de e8 da f0 0f ff 48 39 5d c8 73 07 e8 af ef 0f ff <0f> 0b e8 a8 ef 0f ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   36.792263] RSP: 0018:ffffc900013339d8 EFLAGS: 00010246
[   36.792667] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff821e1fbc
[   36.793203] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   36.794112] RBP: ffffc90001333a20 R08: 0000000000000000 R09: ffff88807dc3c910
[   36.794691] R10: 0000000000000f98 R11: 0000000000000000 R12: 0000000000000001
[   36.795439] R13: 0000000000000001 R14: 0000000000000000 R15: ffff88800b2fc200
[   36.795970] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   36.796588] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.797182] CR2: 00007f3499ed8500 CR3: 0000000003e3a004 CR4: 0000000000770ef0
[   36.797728] PKRU: 55555554
[   36.797955] Call Trace:
[   36.798278]  <TASK>
[   36.798464]  iopt_pages_unfill_xarray+0x3c6/0x5e0
[   36.798892]  ? write_comp_data+0x2f/0x90
[   36.799217]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.799770]  ? write_comp_data+0x2f/0x90
[   36.800116]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.800497]  ? interval_tree_remove+0x291/0x4e0
[   36.800863]  ? write_comp_data+0x2f/0x90
[   36.801187]  iopt_area_remove_access+0x108/0x120
[   36.801570]  iommufd_access_unpin_pages+0x177/0x210
[   36.802089]  iommufd_test_access_unmap+0xe0/0x130
[   36.802490]  ? __pfx_iommufd_test_staccess_release+0x10/0x10
[   36.802964]  iommufd_test_staccess_release+0x39/0x60
[   36.803363]  __fput+0x11f/0x450
[   36.803634]  ____fput+0x1e/0x30
[   36.803913]  task_work_run+0xb6/0x120
[   36.804331]  do_exit+0x547/0x1360
[   36.804638]  ? __this_cpu_preempt_check+0x20/0x30
[   36.805017]  ? lockdep_hardirqs_on+0x8a/0x110
[   36.805372]  do_group_exit+0x5e/0xf0
[   36.805674]  __x64_sys_exit_group+0x25/0x30
[   36.806007]  do_syscall_64+0x3b/0x90
[   36.806367]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   36.806857] RIP: 0033:0x7f3499dcecf6
[   36.807139] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   36.807586] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   36.808137] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   36.808660] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   36.809175] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   36.809692] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   36.810343] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   36.810901]  </TASK>
[   36.811077] irq event stamp: 20513
[   36.811336] hardirqs last  enabled at (20521): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   36.812014] hardirqs last disabled at (20528): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   36.812644] softirqs last  enabled at (20502): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   36.813456] softirqs last disabled at (20545): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   36.814082] ---[ end trace 0000000000000000 ]---
[   36.814526] ------------[ cut here ]------------
[   36.815037] WARNING: CPU: 0 PID: 646 at drivers/iommu/iommufd/pages.c:888 update_unpinned+0x75/0x80
[   36.815709] Modules linked in:
[   36.815950] CPU: 0 PID: 646 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   36.816575] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.817548] RIP: 0010:update_unpinned+0x75/0x80
[   36.817910] Code: de 0f ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 ab de 0f ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 9b de 0f ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 90 90 90 90 90 90 90 90 90 90 90
[   36.819380] RSP: 0018:ffffc90001333a08 EFLAGS: 00010246
[   36.819778] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff821e30af
[   36.820297] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   36.820823] RBP: ffffc90001333a20 R08: 0000000000000000 R09: ffff88807dc3c910
[   36.821346] R10: 0000000000000f98 R11: 0000000000000000 R12: ffffffffffffffff
[   36.821867] R13: ffff88800b2fc200 R14: 0000000000000002 R15: 0000000000000002
[   36.822389] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   36.823059] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.823577] CR2: 00007f3499ed8500 CR3: 0000000003e3a004 CR4: 0000000000770ef0
[   36.824104] PKRU: 55555554
[   36.824330] Call Trace:
[   36.824521]  <TASK>
[   36.824692]  iopt_pages_unfill_xarray+0x549/0x5e0
[   36.825089]  ? write_comp_data+0x2f/0x90
[   36.825404]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.825782]  ? write_comp_data+0x2f/0x90
[   36.826226]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   36.826590]  ? interval_tree_remove+0x291/0x4e0
[   36.826981]  ? write_comp_data+0x2f/0x90
[   36.827332]  iopt_area_remove_access+0x108/0x120
[   36.827700]  iommufd_access_unpin_pages+0x177/0x210
[   36.828221]  iommufd_test_access_unmap+0xe0/0x130
[   36.828594]  ? __pfx_iommufd_test_staccess_release+0x10/0x10
[   36.829051]  iommufd_test_staccess_release+0x39/0x60
[   36.829439]  __fput+0x11f/0x450
[   36.829704]  ____fput+0x1e/0x30
[   36.829995]  task_work_run+0xb6/0x120
[   36.830344]  do_exit+0x547/0x1360
[   36.830602]  ? __this_cpu_preempt_check+0x20/0x30
[   36.830988]  ? lockdep_hardirqs_on+0x8a/0x110
[   36.831329]  do_group_exit+0x5e/0xf0
[   36.831610]  __x64_sys_exit_group+0x25/0x30
[   36.831974]  do_syscall_64+0x3b/0x90
[   36.832394]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   36.832777] RIP: 0033:0x7f3499dcecf6
[   36.833048] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   36.833494] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   36.834225] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   36.834766] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   36.835284] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   36.835798] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   36.836467] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   36.836998]  </TASK>
[   36.837171] irq event stamp: 21157
[   36.837425] hardirqs last  enabled at (21165): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   36.838104] hardirqs last disabled at (21172): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   36.838826] softirqs last  enabled at (21194): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   36.839448] softirqs last disabled at (21183): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   36.840192] ---[ end trace 0000000000000000 ]---
[   36.844066] ------------[ cut here ]------------
[   36.844413] WARNING: CPU: 0 PID: 646 at drivers/iommu/iommufd/pages.c:1183 iopt_release_pages+0x159/0x190
[   36.845104] Modules linked in:
[   36.845341] CPU: 0 PID: 646 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   36.846126] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   36.846991] RIP: 0010:iopt_release_pages+0x159/0x190
[   36.847370] Code: fc f2 fe eb cb e8 27 c1 0f ff be 03 00 00 00 4c 89 f7 e8 ea 19 bd ff eb b7 e8 13 c1 0f ff 0f 0b e9 ed fe ff ff e8 07 c1 0f ff <0f> 0b e9 00 ff ff ff e8 fb c0 0f ff 0f 0b e9 07 ff ff ff e8 ef c0
[   36.848789] RSP: 0018:ffffc90001333c88 EFLAGS: 00010246
[   36.849171] RAX: 0000000000000000 RBX: ffff88800b2fc200 RCX: ffffffff821e4d87
[   36.849687] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   36.850200] RBP: ffffc90001333ca8 R08: 000000000000001c R09: 0000000000000001
[   36.850758] R10: ffff88800faf0d98 R11: 0000000000000000 R12: ffffffffffffffff
[   36.851281] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   36.851790] FS:  0000000000000000(0000) GS:ffff88807dc00000(0000) knlGS:0000000000000000
[   36.852422] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   36.852857] CR2: 00007f67869ec000 CR3: 000000000b1b6001 CR4: 0000000000770ef0
[   36.853382] PKRU: 55555554
[   36.853598] Call Trace:
[   36.853792]  <TASK>
[   36.853971]  iopt_unmap_iova_range+0x1ef/0x2e0
[   36.854321]  iopt_unmap_all+0x2f/0x60
[   36.854606]  iommufd_ioas_destroy+0x2c/0x70
[   36.854970]  iommufd_fops_release+0xd4/0x170
[   36.855310]  ? __pfx_iommufd_fops_release+0x10/0x10
[   36.855683]  __fput+0x11f/0x450
[   36.855948]  ____fput+0x1e/0x30
[   36.856202]  task_work_run+0xb6/0x120
[   36.856497]  do_exit+0x547/0x1360
[   36.856758]  ? __this_cpu_preempt_check+0x20/0x30
[   36.857121]  ? lockdep_hardirqs_on+0x8a/0x110
[   36.857462]  do_group_exit+0x5e/0xf0
[   36.857744]  __x64_sys_exit_group+0x25/0x30
[   36.858060]  do_syscall_64+0x3b/0x90
[   36.858342]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   36.858760] RIP: 0033:0x7f3499dcecf6
[   36.859035] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   36.859477] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   36.860039] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   36.860559] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   36.861076] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   36.861601] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   36.862111] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   36.862648]  </TASK>
[   36.862827] irq event stamp: 21679
[   36.863078] hardirqs last  enabled at (21687): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   36.863685] hardirqs last disabled at (21694): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   36.864307] softirqs last  enabled at (21350): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   36.864928] softirqs last disabled at (21333): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   36.865543] ---[ end trace 0000000000000000 ]---
[   37.112366] ------------[ cut here ]------------
[   37.112780] WARNING: CPU: 1 PID: 647 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.22+0x151/0x1a0
[   37.113504] Modules linked in:
[   37.113754] CPU: 1 PID: 647 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   37.114392] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.115262] RIP: 0010:batch_unpin.isra.22+0x151/0x1a0
[   37.115667] Code: e8 e4 f1 0f ff 48 8b 45 d0 48 85 c0 75 17 e8 c6 ef 0f ff 48 8b 7d c8 48 89 de e8 da f0 0f ff 48 39 5d c8 73 07 e8 af ef 0f ff <0f> 0b e8 a8 ef 0f ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   37.117032] RSP: 0018:ffffc9000133ba98 EFLAGS: 00010246
[   37.117426] RAX: 0000000000000000 RBX: ffffffffffffff27 RCX: ffffffff821e1fbc
[   37.118228] RDX: 0000000000000000 RSI: ffff88800faf2980 RDI: 0000000000000002
[   37.118800] RBP: ffffc9000133bae0 R08: 000000000003ca25 R09: 0000000000000012
[   37.119310] R10: 000000000003ca00 R11: 0000000000000024 R12: 00000000000001b4
[   37.119817] R13: 00000000000001b4 R14: 00000000000000b5 R15: ffff88800ab16800
[   37.120325] FS:  00007f3499ce1740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.120936] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.121367] CR2: 0000000020000243 CR3: 0000000017a54002 CR4: 0000000000770ee0
[   37.121909] PKRU: 55555554
[   37.122118] Call Trace:
[   37.122308]  <TASK>
[   37.122482]  __iopt_area_unfill_domain+0x257/0x560
[   37.122880]  ? __this_cpu_preempt_check+0x20/0x30
[   37.123265]  ? __this_cpu_preempt_check+0x20/0x30
[   37.123624]  ? lock_is_held_type+0xe6/0x140
[   37.123948]  ? rcu_read_lock_sched_held+0x57/0x80
[   37.124307]  ? __mutex_lock+0x13a/0xf80
[   37.124604]  ? write_comp_data+0x2f/0x90
[   37.124910]  ? write_comp_data+0x2f/0x90
[   37.125216]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.125592]  iopt_area_unfill_domain+0x32/0x40
[   37.125931]  iopt_table_remove_domain+0x23f/0x4c0
[   37.126297]  iommufd_device_selftest_detach+0x3a/0x90
[   37.126694]  iommufd_selftest_destroy+0x55/0x70
[   37.127052]  iommufd_object_destroy_user+0xce/0x130
[   37.127422]  iommufd_destroy+0xa2/0xc0
[   37.127715]  iommufd_fops_ioctl+0x206/0x330
[   37.128037]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.128397]  ? write_comp_data+0x2f/0x90
[   37.128730]  __x64_sys_ioctl+0x10e/0x160
[   37.129041]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   37.129401]  do_syscall_64+0x3b/0x90
[   37.129683]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   37.130059] RIP: 0033:0x7f3499e0659d
[   37.130332] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   37.131653] RSP: 002b:00007ffd7bbdb808 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   37.132210] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3499e0659d
[   37.132727] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   37.133239] RBP: 00007ffd7bbdb820 R08: 00007ffd7bbdb820 R09: 00007ffd7bbdb820
[   37.133750] R10: 00007ffd7bbdb820 R11: 0000000000000213 R12: 0000000000401180
[   37.134263] R13: 00007ffd7bbdb940 R14: 0000000000000000 R15: 0000000000000000
[   37.134809]  </TASK>
[   37.134984] irq event stamp: 18681
[   37.135242] hardirqs last  enabled at (18689): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   37.135888] hardirqs last disabled at (18696): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   37.136524] softirqs last  enabled at (18208): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   37.137141] softirqs last disabled at (18203): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   37.137758] ---[ end trace 0000000000000000 ]---
[   37.138206] ------------[ cut here ]------------
[   37.138548] WARNING: CPU: 1 PID: 647 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   37.139316] Modules linked in:
[   37.139552] CPU: 1 PID: 647 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   37.140178] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.140983] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   37.141422] Code: d2 0f ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 fc d3 0f ff 45 85 e4 0f 85 eb 01 00 00 e8 0e d2 0f ff <0f> 0b e8 07 d2 0f ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   37.142780] RSP: 0018:ffffc9000133baf0 EFLAGS: 00010246
[   37.143172] RAX: 0000000000000000 RBX: 00000000ffffff26 RCX: ffffffff821e3f85
[   37.143683] RDX: 0000000000000000 RSI: ffff88800faf2980 RDI: 0000000000000002
[   37.144190] RBP: ffffc9000133bd18 R08: 000000000003ca25 R09: 0000000000000012
[   37.144696] R10: 000000000003ca00 R11: 0000000000000024 R12: 0000000000000200
[   37.145208] R13: 00000000000008da R14: 00000000000007ff R15: 0000000000000800
[   37.145750] FS:  00007f3499ce1740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.146339] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.146818] CR2: 0000000020000243 CR3: 0000000017a54002 CR4: 0000000000770ee0
[   37.147333] PKRU: 55555554
[   37.147549] Call Trace:
[   37.147741]  <TASK>
[   37.147909]  ? __this_cpu_preempt_check+0x20/0x30
[   37.148304]  ? __this_cpu_preempt_check+0x20/0x30
[   37.148669]  ? lock_is_held_type+0xe6/0x140
[   37.148996]  ? rcu_read_lock_sched_held+0x57/0x80
[   37.149359]  ? __mutex_lock+0x13a/0xf80
[   37.149684]  ? write_comp_data+0x2f/0x90
[   37.149993]  ? write_comp_data+0x2f/0x90
[   37.150305]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.150709]  iopt_area_unfill_domain+0x32/0x40
[   37.151063]  iopt_table_remove_domain+0x23f/0x4c0
[   37.151437]  iommufd_device_selftest_detach+0x3a/0x90
[   37.151838]  iommufd_selftest_destroy+0x55/0x70
[   37.152197]  iommufd_object_destroy_user+0xce/0x130
[   37.152573]  iommufd_destroy+0xa2/0xc0
[   37.152877]  iommufd_fops_ioctl+0x206/0x330
[   37.153212]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.153591]  ? write_comp_data+0x2f/0x90
[   37.153903]  __x64_sys_ioctl+0x10e/0x160
[   37.154211]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   37.154568]  do_syscall_64+0x3b/0x90
[   37.154873]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   37.155267] RIP: 0033:0x7f3499e0659d
[   37.155546] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   37.156865] RSP: 002b:00007ffd7bbdb808 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   37.157413] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3499e0659d
[   37.157941] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   37.158454] RBP: 00007ffd7bbdb820 R08: 00007ffd7bbdb820 R09: 00007ffd7bbdb820
[   37.159008] R10: 00007ffd7bbdb820 R11: 0000000000000213 R12: 0000000000401180
[   37.159528] R13: 00007ffd7bbdb940 R14: 0000000000000000 R15: 0000000000000000
[   37.160075]  </TASK>
[   37.160249] irq event stamp: 19163
[   37.160505] hardirqs last  enabled at (19171): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   37.161131] hardirqs last disabled at (19178): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   37.161767] softirqs last  enabled at (19136): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   37.162381] softirqs last disabled at (19131): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   37.163015] ---[ end trace 0000000000000000 ]---
[   37.163450] ------------[ cut here ]------------
[   37.163793] WARNING: CPU: 1 PID: 647 at drivers/iommu/iommufd/pages.c:1292 __iopt_area_unfill_domain+0x54f/0x560
[   37.164547] Modules linked in:
[   37.164782] CPU: 1 PID: 647 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   37.165402] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.166285] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   37.166732] Code: e8 16 d0 0f ff 85 db 0f 85 35 fb ff ff e8 29 ce 0f ff 0f 0b e9 29 fb ff ff e8 1d ce 0f ff 0f 0b e9 69 fe ff ff e8 11 ce 0f ff <0f> 0b e9 58 ff ff ff e8 b5 cb e1 00 0f 1f 44 00 00 90 90 90 90 90
[   37.168052] RSP: 0018:ffffc9000133baf0 EFLAGS: 00010246
[   37.168448] RAX: 0000000000000000 RBX: 00000000ffffff26 RCX: ffffffff821e40d6
[   37.168958] RDX: 0000000000000000 RSI: ffff88800faf2980 RDI: 0000000000000002
[   37.169484] RBP: ffffc9000133bd18 R08: 000000000003ca25 R09: 0000000000000012
[   37.170004] R10: 000000000003ca00 R11: 0000000000000024 R12: 00000000000007ff
[   37.170532] R13: 00000000000008da R14: 00000000000007ff R15: 0000000000000800
[   37.171087] FS:  00007f3499ce1740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.171691] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.172111] CR2: 0000000020000243 CR3: 0000000017a54002 CR4: 0000000000770ee0
[   37.172624] PKRU: 55555554
[   37.172831] Call Trace:
[   37.173020]  <TASK>
[   37.173186]  ? __this_cpu_preempt_check+0x20/0x30
[   37.173579]  ? __this_cpu_preempt_check+0x20/0x30
[   37.173950]  ? lock_is_held_type+0xe6/0x140
[   37.174300]  ? rcu_read_lock_sched_held+0x57/0x80
[   37.174693]  ? __mutex_lock+0x13a/0xf80
[   37.174997]  ? write_comp_data+0x2f/0x90
[   37.175304]  ? write_comp_data+0x2f/0x90
[   37.175620]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.175995]  iopt_area_unfill_domain+0x32/0x40
[   37.176344]  iopt_table_remove_domain+0x23f/0x4c0
[   37.176708]  iommufd_device_selftest_detach+0x3a/0x90
[   37.177076]  iommufd_selftest_destroy+0x55/0x70
[   37.177424]  iommufd_object_destroy_user+0xce/0x130
[   37.177790]  iommufd_destroy+0xa2/0xc0
[   37.178086]  iommufd_fops_ioctl+0x206/0x330
[   37.178420]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.178819]  ? write_comp_data+0x2f/0x90
[   37.179139]  __x64_sys_ioctl+0x10e/0x160
[   37.179451]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   37.179816]  do_syscall_64+0x3b/0x90
[   37.180099]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   37.180491] RIP: 0033:0x7f3499e0659d
[   37.180764] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   37.182100] RSP: 002b:00007ffd7bbdb808 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   37.182677] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3499e0659d
[   37.183206] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   37.183732] RBP: 00007ffd7bbdb820 R08: 00007ffd7bbdb820 R09: 00007ffd7bbdb820
[   37.184244] R10: 00007ffd7bbdb820 R11: 0000000000000213 R12: 0000000000401180
[   37.184758] R13: 00007ffd7bbdb940 R14: 0000000000000000 R15: 0000000000000000
[   37.185283]  </TASK>
[   37.185460] irq event stamp: 19633
[   37.185727] hardirqs last  enabled at (19641): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   37.186362] hardirqs last disabled at (19648): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   37.187048] softirqs last  enabled at (19136): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   37.187659] softirqs last disabled at (19131): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   37.188265] ---[ end trace 0000000000000000 ]---
[   37.188708] ------------[ cut here ]------------
[   37.189047] WARNING: CPU: 1 PID: 647 at drivers/iommu/iommufd/pages.c:888 update_unpinned+0x75/0x80
[   37.189719] Modules linked in:
[   37.189959] CPU: 1 PID: 647 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   37.190584] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.191418] RIP: 0010:update_unpinned+0x75/0x80
[   37.191776] Code: de 0f ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 ab de 0f ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 9b de 0f ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 90 90 90 90 90 90 90 90 90 90 90
[   37.193081] RSP: 0018:ffffc9000133bac8 EFLAGS: 00010246
[   37.193464] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff821e30af
[   37.193977] RDX: 0000000000000000 RSI: ffff88800faf2980 RDI: 0000000000000002
[   37.194491] RBP: ffffc9000133bae0 R08: 0000000000000000 R09: ffff88807dd3c9a0
[   37.195021] R10: 00000000000005a9 R11: 0000000000000009 R12: ffffffffffffff27
[   37.195536] R13: ffff88800ab16800 R14: 00000000000007ff R15: 0000000000000800
[   37.196052] FS:  00007f3499ce1740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.196634] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.197054] CR2: 0000000020000243 CR3: 0000000017a54002 CR4: 0000000000770ee0
[   37.197579] PKRU: 55555554
[   37.197791] Call Trace:
[   37.197976]  <TASK>
[   37.198149]  __iopt_area_unfill_domain+0x4e1/0x560
[   37.198516]  ? __this_cpu_preempt_check+0x20/0x30
[   37.198924]  ? __this_cpu_preempt_check+0x20/0x30
[   37.199294]  ? lock_is_held_type+0xe6/0x140
[   37.199624]  ? rcu_read_lock_sched_held+0x57/0x80
[   37.199992]  ? __mutex_lock+0x13a/0xf80
[   37.200290]  ? write_comp_data+0x2f/0x90
[   37.200600]  ? write_comp_data+0x2f/0x90
[   37.200913]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.201294]  iopt_area_unfill_domain+0x32/0x40
[   37.201653]  iopt_table_remove_domain+0x23f/0x4c0
[   37.202055]  iommufd_device_selftest_detach+0x3a/0x90
[   37.202442]  iommufd_selftest_destroy+0x55/0x70
[   37.202819]  iommufd_object_destroy_user+0xce/0x130
[   37.203205]  iommufd_destroy+0xa2/0xc0
[   37.203505]  iommufd_fops_ioctl+0x206/0x330
[   37.203836]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.204203]  ? write_comp_data+0x2f/0x90
[   37.204519]  __x64_sys_ioctl+0x10e/0x160
[   37.204834]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   37.205197]  do_syscall_64+0x3b/0x90
[   37.205481]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   37.205864] RIP: 0033:0x7f3499e0659d
[   37.206150] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   37.207494] RSP: 002b:00007ffd7bbdb808 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   37.208071] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3499e0659d
[   37.208580] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   37.209095] RBP: 00007ffd7bbdb820 R08: 00007ffd7bbdb820 R09: 00007ffd7bbdb820
[   37.209614] R10: 00007ffd7bbdb820 R11: 0000000000000213 R12: 0000000000401180
[   37.210123] R13: 00007ffd7bbdb940 R14: 0000000000000000 R15: 0000000000000000
[   37.210695]  </TASK>
[   37.210872] irq event stamp: 20115
[   37.211129] hardirqs last  enabled at (20123): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   37.211760] hardirqs last disabled at (20130): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   37.212403] softirqs last  enabled at (19136): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   37.213041] softirqs last disabled at (19131): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   37.213682] ---[ end trace 0000000000000000 ]---
[   37.217057] ------------[ cut here ]------------
[   37.217426] WARNING: CPU: 1 PID: 647 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.22+0x151/0x1a0
[   37.218168] Modules linked in:
[   37.218414] CPU: 1 PID: 647 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   37.219112] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.219955] RIP: 0010:batch_unpin.isra.22+0x151/0x1a0
[   37.220353] Code: e8 e4 f1 0f ff 48 8b 45 d0 48 85 c0 75 17 e8 c6 ef 0f ff 48 8b 7d c8 48 89 de e8 da f0 0f ff 48 39 5d c8 73 07 e8 af ef 0f ff <0f> 0b e8 a8 ef 0f ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   37.221720] RSP: 0018:ffffc9000133b9d8 EFLAGS: 00010246
[   37.222153] RAX: 0000000000000000 RBX: ffffffffffffff26 RCX: ffffffff821e1fd6
[   37.222712] RDX: 0000000000000000 RSI: ffff88800faf2980 RDI: 0000000000000002
[   37.223257] RBP: ffffc9000133ba20 R08: 0000000000000000 R09: ffff88807dd3c910
[   37.223795] R10: 0000000000000b22 R11: 0000000000000000 R12: 0000000000000001
[   37.224327] R13: 0000000000000001 R14: 0000000000000000 R15: ffff88800ab16800
[   37.224858] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.225464] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.225902] CR2: 00007f3499ed8500 CR3: 0000000003e3a003 CR4: 0000000000770ee0
[   37.226436] PKRU: 55555554
[   37.226676] Call Trace:
[   37.226876]  <TASK>
[   37.227058]  iopt_pages_unfill_xarray+0x3c6/0x5e0
[   37.227471]  ? write_comp_data+0x2f/0x90
[   37.227796]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.228172]  ? write_comp_data+0x2f/0x90
[   37.228495]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.228873]  ? interval_tree_remove+0x291/0x4e0
[   37.229237]  ? write_comp_data+0x2f/0x90
[   37.229579]  iopt_area_remove_access+0x108/0x120
[   37.229954]  iommufd_access_unpin_pages+0x177/0x210
[   37.230365]  iommufd_test_access_unmap+0xe0/0x130
[   37.230781]  ? __pfx_iommufd_test_staccess_release+0x10/0x10
[   37.231242]  iommufd_test_staccess_release+0x39/0x60
[   37.231637]  __fput+0x11f/0x450
[   37.231917]  ____fput+0x1e/0x30
[   37.232182]  task_work_run+0xb6/0x120
[   37.232487]  do_exit+0x547/0x1360
[   37.232755]  ? __this_cpu_preempt_check+0x20/0x30
[   37.233138]  ? lockdep_hardirqs_on+0x8a/0x110
[   37.233500]  do_group_exit+0x5e/0xf0
[   37.233790]  __x64_sys_exit_group+0x25/0x30
[   37.234122]  do_syscall_64+0x3b/0x90
[   37.234412]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   37.234830] RIP: 0033:0x7f3499dcecf6
[   37.235117] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   37.235583] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   37.236150] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   37.236680] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   37.237210] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   37.237747] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   37.238298] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   37.238872]  </TASK>
[   37.239056] irq event stamp: 21357
[   37.239322] hardirqs last  enabled at (21365): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   37.239971] hardirqs last disabled at (21372): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   37.240619] softirqs last  enabled at (20964): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   37.241255] softirqs last disabled at (20947): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   37.241883] ---[ end trace 0000000000000000 ]---
[   37.242333] ------------[ cut here ]------------
[   37.242715] WARNING: CPU: 1 PID: 647 at drivers/iommu/iommufd/pages.c:888 update_unpinned+0x75/0x80
[   37.243398] Modules linked in:
[   37.243641] CPU: 1 PID: 647 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   37.244284] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.245127] RIP: 0010:update_unpinned+0x75/0x80
[   37.245497] Code: de 0f ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 ab de 0f ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 9b de 0f ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 90 90 90 90 90 90 90 90 90 90 90
[   37.246878] RSP: 0018:ffffc9000133ba08 EFLAGS: 00010246
[   37.247281] RAX: 0000000000000000 RBX: 0000000000000800 RCX: ffffffff821e30af
[   37.247821] RDX: 0000000000000000 RSI: ffff88800faf2980 RDI: 0000000000000002
[   37.248370] RBP: ffffc9000133ba20 R08: 0000000000000000 R09: ffff88807dd3c910
[   37.248901] R10: 0000000000000b22 R11: 0000000000000000 R12: ffffffffffffff26
[   37.249440] R13: ffff88800ab16800 R14: 0000000000000002 R15: 0000000000000002
[   37.249961] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.250563] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.251025] CR2: 00007f3499ed8500 CR3: 0000000003e3a003 CR4: 0000000000770ee0
[   37.251561] PKRU: 55555554
[   37.251775] Call Trace:
[   37.251972]  <TASK>
[   37.252146]  iopt_pages_unfill_xarray+0x549/0x5e0
[   37.252552]  ? write_comp_data+0x2f/0x90
[   37.252867]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.253251]  ? write_comp_data+0x2f/0x90
[   37.253570]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.253946]  ? interval_tree_remove+0x291/0x4e0
[   37.254318]  ? write_comp_data+0x2f/0x90
[   37.254664]  iopt_area_remove_access+0x108/0x120
[   37.255034]  iommufd_access_unpin_pages+0x177/0x210
[   37.255434]  iommufd_test_access_unmap+0xe0/0x130
[   37.255811]  ? __pfx_iommufd_test_staccess_release+0x10/0x10
[   37.256246]  iommufd_test_staccess_release+0x39/0x60
[   37.256629]  __fput+0x11f/0x450
[   37.256893]  ____fput+0x1e/0x30
[   37.257156]  task_work_run+0xb6/0x120
[   37.257451]  do_exit+0x547/0x1360
[   37.257713]  ? __this_cpu_preempt_check+0x20/0x30
[   37.258077]  ? lockdep_hardirqs_on+0x8a/0x110
[   37.258431]  do_group_exit+0x5e/0xf0
[   37.258735]  __x64_sys_exit_group+0x25/0x30
[   37.259060]  do_syscall_64+0x3b/0x90
[   37.259344]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   37.259727] RIP: 0033:0x7f3499dcecf6
[   37.259993] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   37.260441] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   37.261003] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   37.261556] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   37.262107] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   37.262648] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   37.263174] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   37.263709]  </TASK>
[   37.263882] irq event stamp: 21835
[   37.264135] hardirqs last  enabled at (21843): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   37.264764] hardirqs last disabled at (21850): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   37.265393] softirqs last  enabled at (20964): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   37.266034] softirqs last disabled at (20947): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   37.266681] ---[ end trace 0000000000000000 ]---
[   37.267181] ------------[ cut here ]------------
[   37.267540] WARNING: CPU: 1 PID: 647 at drivers/iommu/iommufd/pages.c:1183 iopt_release_pages+0x159/0x190
[   37.268264] Modules linked in:
[   37.268501] CPU: 1 PID: 647 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   37.269127] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.269940] RIP: 0010:iopt_release_pages+0x159/0x190
[   37.270329] Code: fc f2 fe eb cb e8 27 c1 0f ff be 03 00 00 00 4c 89 f7 e8 ea 19 bd ff eb b7 e8 13 c1 0f ff 0f 0b e9 ed fe ff ff e8 07 c1 0f ff <0f> 0b e9 00 ff ff ff e8 fb c0 0f ff 0f 0b e9 07 ff ff ff e8 ef c0
[   37.271661] RSP: 0018:ffffc9000133bc88 EFLAGS: 00010246
[   37.272055] RAX: 0000000000000000 RBX: ffff88800ab16800 RCX: ffffffff821e4d87
[   37.272574] RDX: 0000000000000000 RSI: ffff88800faf2980 RDI: 0000000000000002
[   37.273103] RBP: ffffc9000133bca8 R08: 000000000000001c R09: 0000000000000001
[   37.273627] R10: ffff88800faf3718 R11: 0000000000000000 R12: ffffffffffffff26
[   37.274149] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   37.274684] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.275268] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.275687] CR2: 00007f3499ed8500 CR3: 0000000003e3a003 CR4: 0000000000770ee0
[   37.276205] PKRU: 55555554
[   37.276415] Call Trace:
[   37.276604]  <TASK>
[   37.276777]  iopt_unmap_iova_range+0x1ef/0x2e0
[   37.277129]  iopt_unmap_all+0x2f/0x60
[   37.277418]  iommufd_ioas_destroy+0x2c/0x70
[   37.277743]  iommufd_fops_release+0xd4/0x170
[   37.278080]  ? __pfx_iommufd_fops_release+0x10/0x10
[   37.278455]  __fput+0x11f/0x450
[   37.278746]  ____fput+0x1e/0x30
[   37.279006]  task_work_run+0xb6/0x120
[   37.279301]  do_exit+0x547/0x1360
[   37.279564]  ? __this_cpu_preempt_check+0x20/0x30
[   37.279935]  ? lockdep_hardirqs_on+0x8a/0x110
[   37.280291]  do_group_exit+0x5e/0xf0
[   37.280572]  __x64_sys_exit_group+0x25/0x30
[   37.280893]  do_syscall_64+0x3b/0x90
[   37.281182]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   37.281571] RIP: 0033:0x7f3499dcecf6
[   37.281846] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   37.282315] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   37.282887] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   37.283409] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   37.283925] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   37.284441] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   37.284957] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   37.285499]  </TASK>
[   37.285671] irq event stamp: 22297
[   37.285927] hardirqs last  enabled at (22305): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   37.286553] hardirqs last disabled at (22312): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   37.287201] softirqs last  enabled at (22142): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   37.287818] softirqs last disabled at (22137): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   37.288423] ---[ end trace 0000000000000000 ]---
[   37.680298] ------------[ cut here ]------------
[   37.680702] WARNING: CPU: 1 PID: 658 at drivers/iommu/iommufd/pages.c:294 __iopt_area_unfill_domain+0x152/0x560
[   37.681466] Modules linked in:
[   37.681713] CPU: 1 PID: 658 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   37.682334] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.683193] RIP: 0010:__iopt_area_unfill_domain+0x152/0x560
[   37.683623] Code: d2 0f ff 44 8b 64 24 54 48 8b 44 24 48 31 ff 44 89 e6 48 89 44 24 38 e8 fc d3 0f ff 45 85 e4 0f 85 eb 01 00 00 e8 0e d2 0f ff <0f> 0b e8 07 d2 0f ff 48 8b 44 24 38 89 5c 24 58 89 18 8b 44 24 54
[   37.684942] RSP: 0018:ffffc9000133baf0 EFLAGS: 00010246
[   37.685393] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff821e3f85
[   37.685973] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   37.686490] RBP: ffffc9000133bd18 R08: 000000000003ca25 R09: 0000000000000011
[   37.687093] R10: 000000000003ca00 R11: 0000000000000024 R12: 00000000000000e9
[   37.687625] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   37.688151] FS:  00007f3499ce1740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.688731] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.689147] CR2: 0000000020000243 CR3: 00000000180a4005 CR4: 0000000000770ee0
[   37.689673] PKRU: 55555554
[   37.689884] Call Trace:
[   37.690074]  <TASK>
[   37.690243]  ? __this_cpu_preempt_check+0x20/0x30
[   37.690658]  ? __this_cpu_preempt_check+0x20/0x30
[   37.691029]  ? lock_is_held_type+0xe6/0x140
[   37.691382]  ? rcu_read_lock_sched_held+0x57/0x80
[   37.691747]  ? __mutex_lock+0x13a/0xf80
[   37.692048]  ? write_comp_data+0x2f/0x90
[   37.692359]  ? write_comp_data+0x2f/0x90
[   37.692670]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.693071]  iopt_area_unfill_domain+0x32/0x40
[   37.693421]  iopt_table_remove_domain+0x23f/0x4c0
[   37.693801]  iommufd_device_selftest_detach+0x3a/0x90
[   37.694188]  iommufd_selftest_destroy+0x55/0x70
[   37.694550]  iommufd_object_destroy_user+0xce/0x130
[   37.694952]  iommufd_destroy+0xa2/0xc0
[   37.695253]  iommufd_fops_ioctl+0x206/0x330
[   37.695582]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.695967]  ? write_comp_data+0x2f/0x90
[   37.696287]  __x64_sys_ioctl+0x10e/0x160
[   37.696591]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   37.696943]  do_syscall_64+0x3b/0x90
[   37.697219]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   37.697607] RIP: 0033:0x7f3499e0659d
[   37.697882] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   37.699228] RSP: 002b:00007ffd7bbdb808 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   37.699792] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3499e0659d
[   37.700312] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   37.700822] RBP: 00007ffd7bbdb820 R08: 00007ffd7bbdb820 R09: 00007ffd7bbdb820
[   37.701343] R10: 00007ffd7bbdb820 R11: 0000000000000213 R12: 0000000000401180
[   37.701871] R13: 00007ffd7bbdb940 R14: 0000000000000000 R15: 0000000000000000
[   37.702402]  </TASK>
[   37.702577] irq event stamp: 19011
[   37.702860] hardirqs last  enabled at (19027): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   37.703496] hardirqs last disabled at (19034): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   37.704155] softirqs last  enabled at (19024): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   37.704826] softirqs last disabled at (19019): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   37.705445] ---[ end trace 0000000000000000 ]---
[   37.705887] ------------[ cut here ]------------
[   37.706227] WARNING: CPU: 1 PID: 658 at drivers/iommu/iommufd/pages.c:1292 __iopt_area_unfill_domain+0x54f/0x560
[   37.706990] Modules linked in:
[   37.707233] CPU: 1 PID: 658 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   37.707883] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.708699] RIP: 0010:__iopt_area_unfill_domain+0x54f/0x560
[   37.709123] Code: e8 16 d0 0f ff 85 db 0f 85 35 fb ff ff e8 29 ce 0f ff 0f 0b e9 29 fb ff ff e8 1d ce 0f ff 0f 0b e9 69 fe ff ff e8 11 ce 0f ff <0f> 0b e9 58 ff ff ff e8 b5 cb e1 00 0f 1f 44 00 00 90 90 90 90 90
[   37.710465] RSP: 0018:ffffc9000133baf0 EFLAGS: 00010246
[   37.710877] RAX: 0000000000000000 RBX: 00000000ffffffff RCX: ffffffff821e40d6
[   37.711398] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   37.711931] RBP: ffffc9000133bd18 R08: 000000000003ca25 R09: 0000000000000011
[   37.712456] R10: 000000000003ca00 R11: 0000000000000024 R12: 00000000000007ff
[   37.712967] R13: 0000000000000801 R14: 00000000000007ff R15: 0000000000000800
[   37.713489] FS:  00007f3499ce1740(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.714087] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.714512] CR2: 0000000020000243 CR3: 00000000180a4005 CR4: 0000000000770ee0
[   37.715068] PKRU: 55555554
[   37.715281] Call Trace:
[   37.715472]  <TASK>
[   37.715639]  ? __this_cpu_preempt_check+0x20/0x30
[   37.716030]  ? __this_cpu_preempt_check+0x20/0x30
[   37.716398]  ? lock_is_held_type+0xe6/0x140
[   37.716729]  ? rcu_read_lock_sched_held+0x57/0x80
[   37.717100]  ? __mutex_lock+0x13a/0xf80
[   37.717404]  ? write_comp_data+0x2f/0x90
[   37.717743]  ? write_comp_data+0x2f/0x90
[   37.718056]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.718423]  iopt_area_unfill_domain+0x32/0x40
[   37.718787]  iopt_table_remove_domain+0x23f/0x4c0
[   37.719157]  iommufd_device_selftest_detach+0x3a/0x90
[   37.719549]  iommufd_selftest_destroy+0x55/0x70
[   37.719905]  iommufd_object_destroy_user+0xce/0x130
[   37.720280]  iommufd_destroy+0xa2/0xc0
[   37.720599]  iommufd_fops_ioctl+0x206/0x330
[   37.720941]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.721316]  ? write_comp_data+0x2f/0x90
[   37.721641]  __x64_sys_ioctl+0x10e/0x160
[   37.721951]  ? __pfx_iommufd_fops_ioctl+0x10/0x10
[   37.722315]  do_syscall_64+0x3b/0x90
[   37.722595]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   37.723011] RIP: 0033:0x7f3499e0659d
[   37.723291] Code: 00 c3 66 2e 0f 1f 84 00 00 00 00 00 90 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 8b 0d d3 08 0d 00 f7 d8 64 89 01 48
[   37.724603] RSP: 002b:00007ffd7bbdb808 EFLAGS: 00000213 ORIG_RAX: 0000000000000010
[   37.725166] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f3499e0659d
[   37.725683] RDX: 0000000020000140 RSI: 0000000000003b80 RDI: 0000000000000003
[   37.726207] RBP: 00007ffd7bbdb820 R08: 00007ffd7bbdb820 R09: 00007ffd7bbdb820
[   37.726744] R10: 00007ffd7bbdb820 R11: 0000000000000213 R12: 0000000000401180
[   37.727264] R13: 00007ffd7bbdb940 R14: 0000000000000000 R15: 0000000000000000
[   37.727791]  </TASK>
[   37.727965] irq event stamp: 19489
[   37.728220] hardirqs last  enabled at (19497): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   37.728841] hardirqs last disabled at (19504): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   37.729466] softirqs last  enabled at (19024): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   37.730116] softirqs last disabled at (19019): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   37.730738] ---[ end trace 0000000000000000 ]---
[   37.734206] ------------[ cut here ]------------
[   37.734564] WARNING: CPU: 1 PID: 658 at drivers/iommu/iommufd/pages.c:178 batch_unpin.isra.22+0x151/0x1a0
[   37.735288] Modules linked in:
[   37.735527] CPU: 1 PID: 658 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   37.736144] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.736954] RIP: 0010:batch_unpin.isra.22+0x151/0x1a0
[   37.737342] Code: e8 e4 f1 0f ff 48 8b 45 d0 48 85 c0 75 17 e8 c6 ef 0f ff 48 8b 7d c8 48 89 de e8 da f0 0f ff 48 39 5d c8 73 07 e8 af ef 0f ff <0f> 0b e8 a8 ef 0f ff 4d 29 e5 31 ff 41 83 c6 01 4c 89 ee 31 db e8
[   37.738694] RSP: 0018:ffffc9000133b9d8 EFLAGS: 00010246
[   37.739081] RAX: 0000000000000000 RBX: ffffffffffffffff RCX: ffffffff821e1fbc
[   37.739583] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   37.740100] RBP: ffffc9000133ba20 R08: 0000000000000000 R09: ffff88807dd3c910
[   37.740632] R10: 0000000000000e33 R11: 0000000000000000 R12: 0000000000000001
[   37.741160] R13: 0000000000000001 R14: 0000000000000000 R15: ffff88800ab17600
[   37.741683] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.742260] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.742703] CR2: 00007f3499ed8500 CR3: 0000000003e3a006 CR4: 0000000000770ee0
[   37.743228] PKRU: 55555554
[   37.743436] Call Trace:
[   37.743626]  <TASK>
[   37.743803]  iopt_pages_unfill_xarray+0x3c6/0x5e0
[   37.744213]  ? write_comp_data+0x2f/0x90
[   37.744534]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.744899]  ? write_comp_data+0x2f/0x90
[   37.745210]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.745587]  ? interval_tree_remove+0x291/0x4e0
[   37.745941]  ? write_comp_data+0x2f/0x90
[   37.746255]  iopt_area_remove_access+0x108/0x120
[   37.746646]  iommufd_access_unpin_pages+0x177/0x210
[   37.747035]  iommufd_test_access_unmap+0xe0/0x130
[   37.747401]  ? __pfx_iommufd_test_staccess_release+0x10/0x10
[   37.747831]  iommufd_test_staccess_release+0x39/0x60
[   37.748213]  __fput+0x11f/0x450
[   37.748484]  ____fput+0x1e/0x30
[   37.748742]  task_work_run+0xb6/0x120
[   37.749029]  do_exit+0x547/0x1360
[   37.749288]  ? __this_cpu_preempt_check+0x20/0x30
[   37.749659]  ? lockdep_hardirqs_on+0x8a/0x110
[   37.750000]  do_group_exit+0x5e/0xf0
[   37.750280]  __x64_sys_exit_group+0x25/0x30
[   37.750598]  do_syscall_64+0x3b/0x90
[   37.750908]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   37.751292] RIP: 0033:0x7f3499dcecf6
[   37.751571] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   37.752015] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   37.752564] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   37.753076] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   37.753597] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   37.754119] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   37.754690] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   37.755224]  </TASK>
[   37.755397] irq event stamp: 20739
[   37.755651] hardirqs last  enabled at (20747): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   37.756295] hardirqs last disabled at (20754): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   37.756951] softirqs last  enabled at (19024): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   37.757577] softirqs last disabled at (19019): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   37.758191] ---[ end trace 0000000000000000 ]---
[   37.758646] ------------[ cut here ]------------
[   37.758993] WARNING: CPU: 1 PID: 658 at drivers/iommu/iommufd/pages.c:888 update_unpinned+0x75/0x80
[   37.759650] Modules linked in:
[   37.759887] CPU: 1 PID: 658 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   37.760513] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.761324] RIP: 0010:update_unpinned+0x75/0x80
[   37.761687] Code: de 0f ff 48 89 de 31 c9 31 d2 4c 29 e6 4c 89 ef e8 60 fb ff ff e8 ab de 0f ff 5b 41 5c 41 5d 5d c3 cc cc cc cc e8 9b de 0f ff <0f> 0b eb e7 0f 1f 80 00 00 00 00 90 90 90 90 90 90 90 90 90 90 90
[   37.763043] RSP: 0018:ffffc9000133ba08 EFLAGS: 00010246
[   37.763436] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffffff821e30af
[   37.763952] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   37.764485] RBP: ffffc9000133ba20 R08: 0000000000000000 R09: ffff88807dd3c910
[   37.764999] R10: 0000000000000e33 R11: 0000000000000000 R12: ffffffffffffffff
[   37.765514] R13: ffff88800ab17600 R14: 0000000000000002 R15: 0000000000000002
[   37.766036] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.766634] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.767056] CR2: 00007f3499ed8500 CR3: 0000000003e3a006 CR4: 0000000000770ee0
[   37.767676] PKRU: 55555554
[   37.767898] Call Trace:
[   37.768083]  <TASK>
[   37.768252]  iopt_pages_unfill_xarray+0x549/0x5e0
[   37.768651]  ? write_comp_data+0x2f/0x90
[   37.768963]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.769327]  ? write_comp_data+0x2f/0x90
[   37.769656]  ? __sanitizer_cov_trace_pc+0x25/0x60
[   37.770034]  ? interval_tree_remove+0x291/0x4e0
[   37.770396]  ? write_comp_data+0x2f/0x90
[   37.770736]  iopt_area_remove_access+0x108/0x120
[   37.771105]  iommufd_access_unpin_pages+0x177/0x210
[   37.771490]  iommufd_test_access_unmap+0xe0/0x130
[   37.771858]  ? __pfx_iommufd_test_staccess_release+0x10/0x10
[   37.772288]  iommufd_test_staccess_release+0x39/0x60
[   37.772670]  __fput+0x11f/0x450
[   37.772932]  ____fput+0x1e/0x30
[   37.773188]  task_work_run+0xb6/0x120
[   37.773496]  do_exit+0x547/0x1360
[   37.773748]  ? __this_cpu_preempt_check+0x20/0x30
[   37.774128]  ? lockdep_hardirqs_on+0x8a/0x110
[   37.774486]  do_group_exit+0x5e/0xf0
[   37.774789]  __x64_sys_exit_group+0x25/0x30
[   37.775112]  do_syscall_64+0x3b/0x90
[   37.775403]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   37.775787] RIP: 0033:0x7f3499dcecf6
[   37.776064] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   37.776523] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   37.777089] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   37.777619] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   37.778129] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   37.778672] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   37.779185] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   37.779715]  </TASK>
[   37.779889] irq event stamp: 21223
[   37.780144] hardirqs last  enabled at (21231): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   37.780786] hardirqs last disabled at (21238): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   37.781422] softirqs last  enabled at (20856): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   37.782036] softirqs last disabled at (20851): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   37.782659] ---[ end trace 0000000000000000 ]---
[   37.783171] ------------[ cut here ]------------
[   37.783505] WARNING: CPU: 1 PID: 658 at drivers/iommu/iommufd/pages.c:1183 iopt_release_pages+0x159/0x190
[   37.784200] Modules linked in:
[   37.784437] CPU: 1 PID: 658 Comm: repro Tainted: G        W          6.3.0-rc2-eeac8ede1755 #1
[   37.785051] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.0-0-gd239552ce722-prebuilt.qemu.org 04/01/2014
[   37.785859] RIP: 0010:iopt_release_pages+0x159/0x190
[   37.786237] Code: fc f2 fe eb cb e8 27 c1 0f ff be 03 00 00 00 4c 89 f7 e8 ea 19 bd ff eb b7 e8 13 c1 0f ff 0f 0b e9 ed fe ff ff e8 07 c1 0f ff <0f> 0b e9 00 ff ff ff e8 fb c0 0f ff 0f 0b e9 07 ff ff ff e8 ef c0
[   37.787549] RSP: 0018:ffffc9000133bc88 EFLAGS: 00010246
[   37.787936] RAX: 0000000000000000 RBX: ffff88800ab17600 RCX: ffffffff821e4d87
[   37.788457] RDX: 0000000000000000 RSI: ffff88800faf0000 RDI: 0000000000000002
[   37.788966] RBP: ffffc9000133bca8 R08: 000000000000001c R09: 0000000000000001
[   37.789504] R10: ffff88800faf0d98 R11: 0000000000000000 R12: ffffffffffffffff
[   37.790026] R13: 0000000001000000 R14: 00000000017fffff R15: 0000000000000000
[   37.790540] FS:  0000000000000000(0000) GS:ffff88807dd00000(0000) knlGS:0000000000000000
[   37.791146] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   37.791569] CR2: 00007f3499ed8500 CR3: 0000000003e3a006 CR4: 0000000000770ee0
[   37.792086] PKRU: 55555554
[   37.792293] Call Trace:
[   37.792483]  <TASK>
[   37.792655]  iopt_unmap_iova_range+0x1ef/0x2e0
[   37.793009]  iopt_unmap_all+0x2f/0x60
[   37.793296]  iommufd_ioas_destroy+0x2c/0x70
[   37.793617]  iommufd_fops_release+0xd4/0x170
[   37.793947]  ? __pfx_iommufd_fops_release+0x10/0x10
[   37.794321]  __fput+0x11f/0x450
[   37.794594]  ____fput+0x1e/0x30
[   37.794871]  task_work_run+0xb6/0x120
[   37.795164]  do_exit+0x547/0x1360
[   37.795422]  ? __this_cpu_preempt_check+0x20/0x30
[   37.795783]  ? lockdep_hardirqs_on+0x8a/0x110
[   37.796132]  do_group_exit+0x5e/0xf0
[   37.796410]  __x64_sys_exit_group+0x25/0x30
[   37.796756]  do_syscall_64+0x3b/0x90
[   37.797043]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[   37.797426] RIP: 0033:0x7f3499dcecf6
[   37.797723] Code: Unable to access opcode bytes at 0x7f3499dceccc.
[   37.798175] RSP: 002b:00007ffd7bbdb7c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000e7
[   37.798749] RAX: ffffffffffffffda RBX: 00007f3499ed9490 RCX: 00007f3499dcecf6
[   37.799276] RDX: 0000000000000000 RSI: 000000000000003c RDI: 0000000000000000
[   37.799789] RBP: 0000000000000000 R08: 00000000000000e7 R09: ffffffffffffff80
[   37.800297] R10: 0000000000000004 R11: 0000000000000246 R12: 00007f3499ed9490
[   37.800809] R13: 0000000000000001 R14: 00007f3499edce88 R15: 0000000000000000
[   37.801334]  </TASK>
[   37.801515] irq event stamp: 21679
[   37.801765] hardirqs last  enabled at (21687): [<ffffffff811eac21>] __up_console_sem+0x91/0xb0
[   37.802380] hardirqs last disabled at (21694): [<ffffffff811eac06>] __up_console_sem+0x76/0xb0
[   37.803029] softirqs last  enabled at (20856): [<ffffffff83024a4c>] __do_softirq+0x31c/0x49c
[   37.803636] softirqs last disabled at (20851): [<ffffffff8112b5a4>] irq_exit_rcu+0xc4/0x100
[   37.804236] ---[ end trace 0000000000000000 ]---
